<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive BOM for KiCAD</title>
  <style type="text/css">
:root {
  --pcb-edge-color: black;
  --pad-color: #878787;
  --pad-color-highlight: #D04040;
  --pin1-outline-color: #ffb629;
  --pin1-outline-color-highlight: #b4ff03;
  --silkscreen-edge-color: #aa4;
  --silkscreen-polygon-color: #4aa;
  --silkscreen-text-color: #4aa;
  --fabrication-edge-color: #907651;
  --fabrication-polygon-color: #907651;
  --fabrication-text-color: #a27c24;
  --track-color: #def5f1;
  --track-color-highlight: #D04040;
  --zone-color: #def5f1;
  --zone-color-highlight: #d0404080;
}

html, body {
  margin: 0px;
  height: 100%;
  font-family: Verdana, sans-serif;
}

.dark.topmostdiv {
  --pcb-edge-color: #eee;
  --pad-color: #808080;
  --pin1-outline-color: #ffa800;
  --pin1-outline-color-highlight: #ccff00;
  --track-color: #42524f;
  --zone-color: #42524f;
  background-color: #252c30;
  color: #eee;
}

button {
  background-color: #eee;
  border: 1px solid #888;
  color: black;
  height: 44px;
  width: 44px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  font-weight: bolder;
}

.dark button {
  /* This will be inverted */
  background-color: #c3b7b5;
}

button.depressed {
  background-color: #0a0;
  color: white;
}

.dark button.depressed {
  /* This will be inverted */
  background-color: #b3b;
}

button:focus {
  outline: 0;
}

button#tb-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.32 290.12h5.82M1.32 291.45h5.82' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 292.5v4.23M.26 292.63H8.2' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='1.35' y='295.73'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#lr-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.06 290.12H3.7m-2.64 1.33H3.7m-2.64 1.32H3.7m-2.64 1.3H3.7m-2.64 1.33H3.7' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 288.8v7.94m0-4.11h3.96' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='5.11' y='291.96'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#bom-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)' fill='none' stroke='%23000' stroke-width='.4'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' stroke-linejoin='round'/%3E%3Cpath d='M1.59 290.12h5.29M1.59 291.45h5.33M1.59 292.75h5.33M1.59 294.09h5.33M1.59 295.41h5.33'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-grouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m4 0h5m4 0h3M6.1 22h3m3.9 0h5m4 0h4m-16-8h4m4 0h4'/%3E%3Cpath stroke-linecap='null' d='M5 17.5h22M5 26.6h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-ungrouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m-4 8h3m-3 8h4'/%3E%3Cpath stroke-linecap='null' d='M5 13.5h22m-22 8h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-netlist-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg fill='none' stroke='%23000' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-width='2' d='M6 26l6-6v-8m13.8-6.3l-6 6v8'/%3E%3Ccircle cx='11.8' cy='9.5' r='2.8' stroke-width='2'/%3E%3Ccircle cx='19.8' cy='22.8' r='2.8' stroke-width='2'/%3E%3C/g%3E%3C/svg%3E");
}

button#copy {
  background-image: url("data:image/svg+xml,%3Csvg height='48' viewBox='0 0 48 48' width='48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h48v48h-48z' fill='none'/%3E%3Cpath d='M32 2h-24c-2.21 0-4 1.79-4 4v28h4v-28h24v-4zm6 8h-22c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h22c2.21 0 4-1.79 4-4v-28c0-2.21-1.79-4-4-4zm0 32h-22v-28h22v28z'/%3E%3C/svg%3E");
  background-position: 6px 6px;
  background-repeat: no-repeat;
  background-size: 26px 26px;
  border-radius: 6px;
  height: 40px;
  width: 40px;
  margin: 10px 5px;
}

button#copy:active {
    box-shadow: inset 0px 0px 5px #6c6c6c;
}

textarea.clipboard-temp {
  position: fixed;
  top: 0;
  left: 0;
  width: 2em;
  height: 2em;
  padding: 0;
  border: None;
  outline: None;
  box-shadow: None;
  background: transparent;
}

.left-most-button {
  border-right: 0;
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.middle-button {
  border-right: 0;
}

.right-most-button {
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.button-container {
  font-size: 0;
  margin: 10px 10px 10px 0px;
}

.dark .button-container {
  filter: invert(1);
}

.button-container button {
  background-size: 32px 32px;
  background-position: 5px 5px;
  background-repeat: no-repeat;
}

@media print {
  .hideonprint {
    display: none;
  }
}

canvas {
  cursor: crosshair;
}

canvas:active {
  cursor: grabbing;
}

.fileinfo {
  width: 100%;
  max-width: 1000px;
  border: none;
  padding: 5px;
}

.fileinfo .title {
  font-size: 20pt;
  font-weight: bold;
}

.fileinfo td {
  overflow: hidden;
  white-space: nowrap;
  max-width: 1px;
  width: 50%;
  text-overflow: ellipsis;
}

.bom {
  border-collapse: collapse;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 10pt;
  table-layout: fixed;
  width: 100%;
  margin-top: 1px;
}

.bom th, .bom td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

.dark .bom th, .dark .bom td {
  border: 1px solid #777;
}

.bom th {
  background-color: #CCCCCC;
  background-clip: padding-box;
}

.dark .bom th {
  background-color: #3b4749;
}

.bom tr.highlighted:nth-child(n) {
  background-color: #cfc;
}

.dark .bom tr.highlighted:nth-child(n) {
  background-color: #226022;
}

.bom tr:nth-child(even) {
  background-color: #f2f2f2;
}

.dark .bom tr:nth-child(even) {
  background-color: #313b40;
}

.bom tr {
  transition: background-color 0.2s;
}

.bom .numCol {
  width: 25px;
}

.bom .Description {
  width: 10%;
}

.bom .Part {
  width: 10%;
}

.bom .Value {
  width: 15%;
}

.bom .Quantity {
  width: 65px;
}

.bom th .sortmark {
  position: absolute;
  right: 1px;
  top: 1px;
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #221 transparent;
  transform-origin: 50% 85%;
  transition: opacity 0.2s, transform 0.4s;
}

.dark .bom th .sortmark {
  filter: invert(1);
}

.bom th .sortmark.none {
  opacity: 0;
}

.bom th .sortmark.desc {
  transform: rotate(180deg);
}

.bom th:hover .sortmark.none {
  opacity: 0.5;
}

.bom .bom-checkbox {
  width: 30px;
  position: relative;
  user-select: none;
  -moz-user-select: none;
}

.bom .bom-checkbox:before {
  content: "";
  position: absolute;
  border-width: 15px;
  border-style: solid;
  border-color: #51829f transparent transparent transparent;
  visibility: hidden;
  top: -15px;
}

.bom .bom-checkbox:after {
  content: "Double click to set/unset all";
  position: absolute;
  color: white;
  top: -35px;
  left: -26px;
  background: #51829f;
  padding: 5px 15px;
  border-radius: 8px;
  white-space: nowrap;
  visibility: hidden;
}

.bom .bom-checkbox:hover:before, .bom .bom-checkbox:hover:after {
  visibility: visible;
  transition: visibility 0.2s linear 1s;
}

.split {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden;
  background-color: inherit;
}

.split.split-horizontal, .gutter.gutter-horizontal {
  height: 100%;
  float: left;
}

.gutter {
  background-color: #ddd;
  background-repeat: no-repeat;
  background-position: 50%;
  transition: background-color 0.3s;
}

.dark .gutter {
  background-color: #777;
}

.gutter.gutter-horizontal {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
  cursor: ew-resize;
  width: 5px;
}

.gutter.gutter-vertical {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
  cursor: ns-resize;
  height: 5px;
}

.searchbox {
  float: left;
  height: 40px;
  margin: 10px 5px;
  padding: 12px 32px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 18px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 6px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNklEQVQ4T8XSMUvDQBQH8P/LElFa/AIZHcTBQSz0I/gFstTBRR2KUC4ldDxw7h0Bl3RRUATxi4iiODgoiLNrbQYp5J6cpJJqomkX33Z37/14d/dIa33MzDuYI4johOI4XhyNRteO46zNYjDzAxE1yBZprVeZ+QbAUhXEGJMA2Ox2u4+fQIa0mPmsCgCgJYQ4t7lfgF0opQYAdv9ABkKI/UnOFCClXKjX61cA1osQY8x9kiRNKeV7IWA3oyhaSdP0FkAtjxhj3hzH2RBCPOf3pzqYHCilfAAX+URm9oMguPzeWSGQvUcMYC8rOBJCHBRdqxTo9/vbRHRqi8bj8XKv1xvODbiuW2u32/bvf0SlDv4XYOY7z/Mavu+nM1+BmQ+NMc0wDF/LprP0DbTWW0T00ul0nn4b7Q87+X4Qmfiq2wAAAABJRU5ErkJggg==');
  background-position: 10px 10px;
  background-repeat: no-repeat;
}

.dark .searchbox {
  background-color: #111;
  color: #eee;
}

.searchbox::placeholder {
  color: #ccc;
}

.dark .searchbox::placeholder {
  color: #666;
}

.filter {
  width: calc(60% - 64px);
}

.reflookup {
  width: calc(40% - 10px);
}

input[type=text]:focus {
  background-color: white;
  border: 1px solid #333;
}

.dark input[type=text]:focus {
  background-color: #333;
  border: 1px solid #ccc;
}

mark.highlight {
  background-color: #5050ff;
  color: #fff;
  padding: 2px;
  border-radius: 6px;
}

.dark mark.highlight {
  background-color: #76a6da;
  color: #111;
}

.menubtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 20 20'%3E%3Cpath fill='none' d='M0 0h20v20H0V0z'/%3E%3Cpath d='M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z'/%3E%3C/svg%3E%0A");
  background-position: center;
  background-repeat: no-repeat;
}

.statsbtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg width='36' height='36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6h28v24H4V6zm0 8h28v8H4m9-16v24h10V5.8' fill='none' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.iobtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36'%3E%3Cpath fill='none' stroke='%23000' stroke-width='2' d='M3 33v-7l6.8-7h16.5l6.7 7v7H3zM3.2 26H33M21 9l5-5.9 5 6h-2.5V15h-5V9H21zm-4.9 0l-5 6-5-6h2.5V3h5v6h2.5z'/%3E%3Cpath fill='none' stroke='%23000' d='M6.1 29.5H10'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.dark .statsbtn, .dark .savebtn, .dark .menubtn, .dark .iobtn {
  filter: invert(1);
}

.flexbox {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
}

.savebtn {
  background-color: #d6d6d6;
  width: auto;
  height: 30px;
  flex-grow: 1;
  margin: 5px;
  border-radius: 4px;
}

.savebtn:active {
  background-color: #0a0;
  color: white;
}

.dark .savebtn:active {
  /* This will be inverted */
  background-color: #b3b;
}

.stats {
  border-collapse: collapse;
  font-size: 12pt;
  table-layout: fixed;
  width: 100%;
  min-width: 450px;
}

.dark .stats td {
  border: 1px solid #bbb;
}

.stats td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

#checkbox-stats div {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

#checkbox-stats .bar {
  background-color: rgba(28, 251, 0, 0.6);
}

.menu {
  position: relative;
  display: inline-block;
  margin: 10px 10px 10px 0px;
}

.menu-content {
  display: none;
  position: absolute;
  background-color: white;
  right: 0;
  min-width: 300px;
  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
  z-index: 100;
  padding: 8px;
}

.dark .menu-content {
  background-color: #111;
}

.menu:hover .menu-content {
  display: block;
}

.menu:hover .menubtn, .menu:hover .iobtn, .menu:hover .statsbtn {
  background-color: #eee;
}

.menu-label {
  display: inline-block;
  padding: 8px;
  border: 1px solid #ccc;
  border-top: 0;
  width: calc(100% - 18px);
}

.menu-label-top {
  border-top: 1px solid #ccc;
}

.menu-textbox {
  float: left;
  height: 24px;
  margin: 10px 5px;
  padding: 5px 5px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 14px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 4px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  width: calc(100% - 10px);
}

.menu-textbox.invalid, .dark .menu-textbox.invalid {
  color: red;
}

.dark .menu-textbox {
  background-color: #222;
  color: #eee;
}

.topmostdiv {
  width: 100%;
  height: 100%;
  background-color: white;
  transition: background-color 0.3s;
}

#top {
  height: 78px;
  border-bottom: 2px solid black;
}

.dark #top {
  border-bottom: 2px solid #ccc;
}

#dbg {
  display: block;
}

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #aaa;
}

::-webkit-scrollbar-thumb {
  background: #666;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.slider {
  -webkit-appearance: none;
  width: 100%;
  margin: 3px 0;
  padding: 0;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
  border-radius: 3px;
}

.slider:hover {
  opacity: 1;
}

.slider:focus {
  outline: none;
}

.slider::-webkit-slider-runnable-track {
  -webkit-appearance: none;
  width: 100%;
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
  border: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin-top: -4px;
}

.dark .slider::-webkit-slider-thumb {
  background: #3d3;
}

.slider::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
}

.slider::-moz-range-track {
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
}

.dark .slider::-moz-range-thumb {
  background: #3d3;
}

.slider::-ms-track {
  width: 100%;
  height: 8px;
  border-width: 3px 0;
  background: transparent;
  border-color: transparent;
  color: transparent;
  transition: opacity .2s;
}

.slider::-ms-fill-lower {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-fill-upper {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin: 0;
}

.shameless-plug {
  font-size: 0.8em;
  text-align: center;
  display: block;
}

a {
  color: #0278a4;
}

.dark a {
  color: #00b9fd;
}

#frontcanvas, #backcanvas {
    touch-action: none;
}

  </style>
  <script type="text/javascript" >
///////////////////////////////////////////////
/*
  Split.js - v1.3.5
  MIT License
  https://github.com/nathancahill/Split.js
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Split=t()}(this,function(){"use strict";var e=window,t=e.document,n="addEventListener",i="removeEventListener",r="getBoundingClientRect",s=function(){return!1},o=e.attachEvent&&!e[n],a=["","-webkit-","-moz-","-o-"].filter(function(e){var n=t.createElement("div");return n.style.cssText="width:"+e+"calc(9px)",!!n.style.length}).shift()+"calc",l=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(u,c){function z(e,t,n){var i=A(y,t,n);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}function h(e,t){var n=B(y,t);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}function f(e){var t=E[this.a],n=E[this.b],i=t.size+n.size;t.size=e/this.size*i,n.size=i-e/this.size*i,z(t.element,t.size,this.aGutterSize),z(n.element,n.size,this.bGutterSize)}function m(e){var t;this.dragging&&((t="touches"in e?e.touches[0][b]-this.start:e[b]-this.start)<=E[this.a].minSize+M+this.aGutterSize?t=E[this.a].minSize+this.aGutterSize:t>=this.size-(E[this.b].minSize+M+this.bGutterSize)&&(t=this.size-(E[this.b].minSize+this.bGutterSize)),f.call(this,t),c.onDrag&&c.onDrag())}function g(){var e=E[this.a].element,t=E[this.b].element;this.size=e[r]()[y]+t[r]()[y]+this.aGutterSize+this.bGutterSize,this.start=e[r]()[G]}function d(){var t=this,n=E[t.a].element,r=E[t.b].element;t.dragging&&c.onDragEnd&&c.onDragEnd(),t.dragging=!1,e[i]("mouseup",t.stop),e[i]("touchend",t.stop),e[i]("touchcancel",t.stop),t.parent[i]("mousemove",t.move),t.parent[i]("touchmove",t.move),delete t.stop,delete t.move,n[i]("selectstart",s),n[i]("dragstart",s),r[i]("selectstart",s),r[i]("dragstart",s),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor=""}function S(t){var i=this,r=E[i.a].element,o=E[i.b].element;!i.dragging&&c.onDragStart&&c.onDragStart(),t.preventDefault(),i.dragging=!0,i.move=m.bind(i),i.stop=d.bind(i),e[n]("mouseup",i.stop),e[n]("touchend",i.stop),e[n]("touchcancel",i.stop),i.parent[n]("mousemove",i.move),i.parent[n]("touchmove",i.move),r[n]("selectstart",s),r[n]("dragstart",s),o[n]("selectstart",s),o[n]("dragstart",s),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",i.gutter.style.cursor=j,i.parent.style.cursor=j,g.call(i)}function v(e){e.forEach(function(t,n){if(n>0){var i=F[n-1],r=E[i.a],s=E[i.b];r.size=e[n-1],s.size=t,z(r.element,r.size,i.aGutterSize),z(s.element,s.size,i.bGutterSize)}})}function p(){F.forEach(function(e){e.parent.removeChild(e.gutter),E[e.a].element.style[y]="",E[e.b].element.style[y]=""})}void 0===c&&(c={});var y,b,G,E,w=l(u[0]).parentNode,D=e.getComputedStyle(w).flexDirection,U=c.sizes||u.map(function(){return 100/u.length}),k=void 0!==c.minSize?c.minSize:100,x=Array.isArray(k)?k:u.map(function(){return k}),L=void 0!==c.gutterSize?c.gutterSize:10,M=void 0!==c.snapOffset?c.snapOffset:30,O=c.direction||"horizontal",j=c.cursor||("horizontal"===O?"ew-resize":"ns-resize"),C=c.gutter||function(e,n){var i=t.createElement("div");return i.className="gutter gutter-"+n,i},A=c.elementStyle||function(e,t,n){var i={};return"string"==typeof t||t instanceof String?i[e]=t:i[e]=o?t+"%":a+"("+t+"% - "+n+"px)",i},B=c.gutterStyle||function(e,t){return n={},n[e]=t+"px",n;var n};"horizontal"===O?(y="width","clientWidth",b="clientX",G="left","paddingLeft"):"vertical"===O&&(y="height","clientHeight",b="clientY",G="top","paddingTop");var F=[];return E=u.map(function(e,t){var i,s={element:l(e),size:U[t],minSize:x[t]};if(t>0&&(i={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===u.length-1,direction:O,parent:w},i.aGutterSize=L,i.bGutterSize=L,i.isFirst&&(i.aGutterSize=L/2),i.isLast&&(i.bGutterSize=L/2),"row-reverse"===D||"column-reverse"===D)){var a=i.a;i.a=i.b,i.b=a}if(!o&&t>0){var c=C(t,O);h(c,L),c[n]("mousedown",S.bind(i)),c[n]("touchstart",S.bind(i)),w.insertBefore(c,s.element),i.gutter=c}0===t||t===u.length-1?z(s.element,s.size,L/2):z(s.element,s.size,L);var f=s.element[r]()[y];return f<s.minSize&&(s.minSize=f),t>0&&F.push(i),s}),o?{setSizes:v,destroy:p}:{setSizes:v,getSizes:function(){return E.map(function(e){return e.size})},collapse:function(e){if(e===F.length){var t=F[e-1];g.call(t),o||f.call(t,t.size-t.bGutterSize)}else{var n=F[e];g.call(n),o||f.call(n,n.aGutterSize)}},destroy:p}}});

///////////////////////////////////////////////

///////////////////////////////////////////////
// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>
// This work is free. You can redistribute it and/or modify it
// under the terms of the WTFPL, Version 2
// For more information see LICENSE.txt or http://www.wtfpl.net/
//
// For more information, the home page:
// http://pieroxy.net/blog/pages/lz-string/testing.html
//
// LZ-based compression algorithm, version 1.4.4
var LZString=function(){var o=String.fromCharCode,i={};var n={decompressFromBase64:function(o){return null==o?"":""==o?null:n._decompress(o.length,32,function(n){return function(o,n){if(!i[o]){i[o]={};for(var t=0;t<o.length;t++)i[o][o.charAt(t)]=t}return i[o][n]}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o.charAt(n))})},_decompress:function(i,n,t){var r,e,a,s,p,u,l,f=[],c=4,d=4,h=3,v="",g=[],m={val:t(0),position:n,index:1};for(r=0;r<3;r+=1)f[r]=r;for(a=0,p=Math.pow(2,2),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,p=Math.pow(2,8),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;l=o(a);break;case 1:for(a=0,p=Math.pow(2,16),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;l=o(a);break;case 2:return""}for(f[3]=l,e=l,g.push(l);;){if(m.index>i)return"";for(a=0,p=Math.pow(2,h),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,p=Math.pow(2,8),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;f[d++]=o(a),l=d-1,c--;break;case 1:for(a=0,p=Math.pow(2,16),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;f[d++]=o(a),l=d-1,c--;break;case 2:return g.join("")}if(0==c&&(c=Math.pow(2,h),h++),f[l])v=f[l];else{if(l!==d)return null;v=e+e.charAt(0)}g.push(v),f[d++]=e+v.charAt(0),e=v,0==--c&&(c=Math.pow(2,h),h++)}}};return n}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});
///////////////////////////////////////////////

///////////////////////////////////////////////
/*!
 * PEP v0.4.3 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.PointerEventsPolyfill=b()}(this,function(){"use strict";function a(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);
for(var d,e=2;e<m.length;e++)d=m[e],c[d]=b[d]||n[e];c.buttons=b.buttons||0;
var f=0;return f=b.pressure&&c.buttons?b.pressure:c.buttons?.5:0,c.x=c.clientX,c.y=c.clientY,c.pointerId=b.pointerId||0,c.width=b.width||0,c.height=b.height||0,c.pressure=f,c.tiltX=b.tiltX||0,c.tiltY=b.tiltY||0,c.twist=b.twist||0,c.tangentialPressure=b.tangentialPressure||0,c.pointerType=b.pointerType||"",c.hwTimestamp=b.hwTimestamp||0,c.isPrimary=b.isPrimary||!1,c}function b(){this.array=[],this.size=0}function c(a,b,c,d){this.addCallback=a.bind(d),this.removeCallback=b.bind(d),this.changedCallback=c.bind(d),A&&(this.observer=new A(this.mutationWatcher.bind(this)))}function d(a){return"body /shadow-deep/ "+e(a)}function e(a){return'[touch-action="'+a+'"]'}function f(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function g(){if(F){D.forEach(function(a){String(a)===a?(E+=e(a)+f(a)+"\n",G&&(E+=d(a)+f(a)+"\n")):(E+=a.selectors.map(e)+f(a.rule)+"\n",G&&(E+=a.selectors.map(d)+f(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=E,document.head.appendChild(a)}}function h(){if(!window.PointerEvent){if(window.PointerEvent=a,window.navigator.msPointerEnabled){var b=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:b,enumerable:!0}),u.registerSource("ms",_)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",V);u.register(document)}}function i(a){if(!u.pointermap.has(a)){var b=new Error("InvalidPointerId");throw b.name="InvalidPointerId",b}}function j(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b){var c=new Error("InvalidStateError");throw c.name="InvalidStateError",c}}function k(a){var b=u.pointermap.get(a);return 0!==b.buttons}function l(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:X},hasPointerCapture:{value:Y}})}
var m=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],o=window.Map&&window.Map.prototype.forEach,p=o?Map:b;b.prototype={set:function(a,b){return void 0===b?this["delete"](a):(this.has(a)||this.size++,void(this.array[a]=b))},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.array.length=0,this.size=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var q=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!=typeof SVGElementInstance,u={pointermap:new p,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b,d=c.events;d&&(d.forEach(function(a){c[a]&&(this.eventMap[a]=c[a].bind(c))},this),this.eventSources[a]=c,this.eventSourceList.push(c))},register:function(a){for(var b,c=this.eventSourceList.length,d=0;d<c&&(b=this.eventSourceList[d]);d++)
b.register.call(b,a)},unregister:function(a){for(var b,c=this.eventSourceList.length,d=0;d<c&&(b=this.eventSourceList[d]);d++)
b.unregister.call(b,a)},contains:function(a,b){try{return a.contains(b)}catch(c){return!1}},down:function(a){a.bubbles=!0,this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0,this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0,this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1,this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1,this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0,this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0,this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0,this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a),this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a),this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type,c=this.eventMap&&this.eventMap[b];c&&c(a),a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(b,c){this.captureInfo[c.pointerId]&&(c.relatedTarget=null);var d=new a(b,c);return c.preventDefault&&(d.preventDefault=c.preventDefault),d._target=d._target||c.target,d},fireEvent:function(a,b){var c=this.makeEvent(a,b);return this.dispatchEvent(c)},cloneEvent:function(a){for(var b,c=Object.create(null),d=0;d<q.length;d++)b=q[d],c[b]=a[b]||r[d],!t||"target"!==b&&"relatedTarget"!==b||c[b]instanceof SVGElementInstance&&(c[b]=c[b].correspondingUseElement);return a.preventDefault&&(c.preventDefault=function(){a.preventDefault()}),c},getTarget:function(a){var b=this.captureInfo[a.pointerId];return b?a._target!==b&&a.type in s?void 0:b:a._target},propagate:function(a,b,c){for(var d=a.target,e=[];d!==document&&!d.contains(a.relatedTarget);) if(e.push(d),d=d.parentNode,!d)return;c&&e.reverse(),e.forEach(function(c){a.target=c,b.call(this,a)},this)},setCapture:function(b,c,d){this.captureInfo[b]&&this.releaseCapture(b,d),this.captureInfo[b]=c,this.implicitRelease=this.releaseCapture.bind(this,b,d),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var e=new a("gotpointercapture");e.pointerId=b,e._target=c,d||this.asyncDispatchEvent(e)},releaseCapture:function(b,c){var d=this.captureInfo[b];if(d){this.captureInfo[b]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var e=new a("lostpointercapture");e.pointerId=b,e._target=d,c||this.asyncDispatchEvent(e)}},dispatchEvent:/*scope.external.dispatchEvent || */function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);var v={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&Boolean(a.elementFromPoint)},targetingShadow:function(a){var b=this.shadow(a);if(this.canTarget(b))return b},olderShadow:function(a){var b=a.olderShadowRoot;if(!b){var c=a.querySelector("shadow");c&&(b=c.olderShadowRoot)}return b},allShadows:function(a){for(var b=[],c=this.shadow(a);c;)b.push(c),c=this.olderShadow(c);return b},searchRoot:function(a,b,c){if(a){var d,e,f=a.elementFromPoint(b,c);for(e=this.targetingShadow(f);e;){if(d=e.elementFromPoint(b,c)){var g=this.targetingShadow(d);return this.searchRoot(g,b,c)||d} e=this.olderShadow(e)} return f}},owner:function(a){
for(var b=a;b.parentNode;)b=b.parentNode;
return b.nodeType!==Node.DOCUMENT_NODE&&b.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(b=document),b},findTarget:function(a){var b=a.clientX,c=a.clientY,d=this.owner(a.target);
return d.elementFromPoint(b,c)||(d=document),this.searchRoot(d,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),A=window.MutationObserver||window.WebKitMutationObserver,B="[touch-action]",C={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};c.prototype={watchSubtree:function(a){
//
this.observer&&v.canTarget(a)&&this.observer.observe(a,C)},enableOnSubtree:function(a){this.watchSubtree(a),a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll(B):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(y(b))},
installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){
var b=x(a,this.findElements,this);
return b.push(z(a,this.isElement)),b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){if("childList"===a.type){var b=this.flattenMutationTree(a.addedNodes);b.forEach(this.addElement,this);var c=this.flattenMutationTree(a.removedNodes);c.forEach(this.removeElement,this)}else"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var D=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",F=window.PointerEvent||window.MSPointerEvent,G=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,H=u.pointermap,I=25,J=[1,4,2,8,16],K=!1;try{K=1===new MouseEvent("test",{buttons:1}).buttons}catch(L){}
var M,N={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},lastTouches:[],
isEventSimulatedFromTouch:function(a){for(var b,c=this.lastTouches,d=a.clientX,e=a.clientY,f=0,g=c.length;f<g&&(b=c[f]);f++){
var h=Math.abs(d-b.x),i=Math.abs(e-b.y);if(h<=I&&i<=I)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault(),c()},b.pointerId=this.POINTER_ID,b.isPrimary=!0,b.pointerType=this.POINTER_TYPE,b},prepareButtonsForMove:function(a,b){var c=H.get(this.POINTER_ID);
0!==b.which&&c?a.buttons=c.buttons:a.buttons=0,b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=H.get(this.POINTER_ID),c=this.prepareEvent(a);K||(c.buttons=J[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons),H.set(this.POINTER_ID,a),b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,H.set(this.POINTER_ID,a),u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=H.get(this.POINTER_ID),c=this.prepareEvent(a);if(!K){var d=J[c.button];
c.buttons=b?b.buttons&~d:0,a.buttons=c.buttons}H.set(this.POINTER_ID,a),
c.buttons&=~J[c.button],0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,H.set(this.POINTER_ID,a),u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,u.leaveOut(b)}},cancel:function(a){var b=this.prepareEvent(a);u.cancel(b),this.deactivateMouse()},deactivateMouse:function(){H["delete"](this.POINTER_ID)}},O=u.captureInfo,P=v.findTarget.bind(v),Q=v.allShadows.bind(v),R=u.pointermap,S=2500,T=200,U="touch-action",V={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){M.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute(U),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),
Q(a).forEach(function(a){a._scrollType=c,u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0,u.unlisten(a,this.events),
Q(a).forEach(function(a){a._scrollType=void 0,u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute(U),d=this.touchActionToScrollType(c),e=this.touchActionToScrollType(b);
d&&e?(a._scrollType=d,Q(a).forEach(function(a){a._scrollType=d},this)):e?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=a,c=this.scrollTypes;return"none"===b?"none":b===c.XSCROLLER?"X":b===c.YSCROLLER?"Y":c.SCROLLER.exec(b)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){
(0===R.size||1===R.size&&R.has(1))&&(this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(a){a.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(a,T)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;return"touchstart"!==a&&"touchmove"!==a||(b=1),b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=O[d]||P(c),c.bubbles=!0,c.cancelable=!0,c.detail=this.clickCount,c.button=0,c.buttons=this.typeToButtons(b.type),c.width=2*(a.radiusX||a.webkitRadiusX||0),c.height=2*(a.radiusY||a.webkitRadiusY||0),c.pressure=a.force||a.webkitForce||.5,c.isPrimary=this.isPrimaryTouch(a),c.pointerType=this.POINTER_TYPE,
c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey;
var e=this;return c.preventDefault=function(){e.scrolling=!1,e.firstXY=null,b.preventDefault()},c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;for(var d,e=0;e<c.length;e++)d=c[e],b.call(this,this.touchToPointer(d))},
shouldScroll:function(a){if(this.firstXY){var b,c=a.currentTarget._scrollType;if("none"===c)
b=!1;else if("XY"===c)
b=!0;else{var d=a.changedTouches[0],e=c,f="Y"===c?"X":"Y",g=Math.abs(d["client"+e]-this.firstXY[e]),h=Math.abs(d["client"+f]-this.firstXY[f]);
b=g>=h}return this.firstXY=null,b}},findTouch:function(a,b){for(var c,d=0,e=a.length;d<e&&(c=a[d]);d++)if(c.identifier===b)return!0},
vacuumTouches:function(a){var b=a.touches;
if(R.size>=b.length){var c=[];R.forEach(function(a,d){
if(1!==d&&!this.findTouch(b,d-2)){var e=a.out;c.push(e)}},this),c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a),this.setPrimaryTouch(a.changedTouches[0]),this.dedupSynthMouse(a),this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){R.set(a.pointerId,{target:a.target,out:a,outTarget:a.target}),u.enterOver(a),u.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=a,c=R.get(b.pointerId);
if(c){var d=c.out,e=c.outTarget;u.move(b),d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,
d.target=e,b.target?(u.leaveOut(d),u.enterOver(b)):(
b.target=e,b.relatedTarget=null,this.cancelOut(b))),c.out=b,c.outTarget=b.target}},touchend:function(a){this.dedupSynthMouse(a),this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(u.up(a),u.leaveOut(a)),this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a),u.leaveOut(a),this.cleanUpPointer(a)},cleanUpPointer:function(a){R["delete"](a.pointerId),this.removePrimaryPointer(a)},
dedupSynthMouse:function(a){var b=N.lastTouches,c=a.changedTouches[0];
if(this.isPrimaryTouch(c)){
var d={x:c.clientX,y:c.clientY};b.push(d);var e=function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}.bind(null,b,d);setTimeout(e,S)}}};M=new c(V.elementAdded,V.elementRemoved,V.elementChanged,V);var W,X,Y,Z=u.pointermap,$=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,_={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;return $&&(b=u.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]),b},cleanup:function(a){Z["delete"](a)},MSPointerDown:function(a){Z.set(a.pointerId,a);var b=this.prepareEvent(a);u.down(b)},MSPointerMove:function(a){var b=this.prepareEvent(a);u.move(b)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b),this.cleanup(a.pointerId)},MSPointerOut:function(a){var b=this.prepareEvent(a);u.leaveOut(b)},MSPointerOver:function(a){var b=this.prepareEvent(a);u.enterOver(b)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b),this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){var b=u.makeEvent("lostpointercapture",a);u.dispatchEvent(b)},MSGotPointerCapture:function(a){var b=u.makeEvent("gotpointercapture",a);u.dispatchEvent(b)}},aa=window.navigator;aa.msPointerEnabled?(W=function(a){i(a),j(this),k(a)&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},X=function(a){i(a),u.releaseCapture(a,!0),this.msReleasePointerCapture(a)}):(W=function(a){i(a),j(this),k(a)&&u.setCapture(a,this)},X=function(a){i(a),u.releaseCapture(a)}),Y=function(a){return!!u.captureInfo[a]},g(),h(),l();var ba={dispatcher:u,Installer:c,PointerEvent:a,PointerMap:p,targetFinding:v};return ba});

///////////////////////////////////////////////

///////////////////////////////////////////////
var config = {"dark_mode": false, "show_pads": true, "show_fabrication": false, "show_silkscreen": true, "highlight_pin1": false, "redraw_on_drag": true, "board_rotation": 0, "checkboxes": "Sourced,Placed", "bom_view": "left-right", "layer_view": "FB", "extra_fields": []}
///////////////////////////////////////////////

///////////////////////////////////////////////
var pcbdata = JSON.parse(LZString.decompressFromBase64("N4IgpgJg5mDOD6AjRB7AHiAXAAlAWwEsA7DHARjIBYA6ATgCZLbmAabEQogTy2wDYaDJq3Z4AhmlLYyADgCs1AAwB2OYsVk2HCT3IBmBSrUaAvlsgxYvANqgALlwAOYXiADGBAE5uANi62wdmKedjZkakpsZOpKALpanmIQBACuVjgGkewA7gQQdgAWvIrU4Sbx7LAEPgDWsG6eYGBEvKAAYjagjijp2NZkfCUDUYo0igIVIHZgaKE4IADiAHIAIiBaBWAEUAVz2CV8Wrn5RTgHGyieBABe8ABWaXYEAGa6+1qFBG41RHC9Q3ItGI7HZPDZJmIiFA/LwyJlFGZcCBur1+nJaHRxmwZHxqDJlDIyLRlJNprNXAA/FZ8dbsTbbXbFaiHHJ5QpMlkgAqXG73R4vN6KD4FL4/P5M8JAkFgnDWCFQmH6QyIro9MKUejUeiqZi6vW0GTYjFMSikmZ7EAAJRWAEkAPJkWlcrY7PbnVknDkXK63B6BAXFYWi36wf6lQHsYGg8FAhUuHC0EoItiq1EDMh0PSG7CE6hyM3k+aIbbYCAoOx9bxkWJO+mu2FZEDHdnkRvcn18/2vQPsT7fENhon64e67MgKMyvry6Hx/ZKFXItWy8IKPgRvjKPEj4cFi0AalrLsZZzzRzZpznEa5PN9/O7ZyD/fFJ7I9CvE5jkbjTOTSJRYT0TdRhZCgMUYQCqF3VwVgAQQAYUUQ8GTdZkz09E9OXbXk/See93l7EUn1DCV32lT9x2/BMkwXf9lz0DE5HkbdmGzUDShxORlHoKD5ktABRNoYKQ+sMLQls50wm9O1wwVHzFYiX1I6NZWnRVsETecU0XNMNVKegQKJLV6FoDVaB49h+LaAAhYTjwksSL3da8OxwgMHwI4NnznSVIzIlTYxnXgNN/VN1RoPgIqiQzwOUSCPnNaD4MdDYjxQzlm0c1C6Sk1y8KFDyiMHJTJzlAK1OCmilz6KhN3oLFpFkOhwioPRzJAAAZPi1hS5CvQ9cSnKw28u1kgr5KKqVlKnMrZwqrTaOqphqGUSh0WY1i6uoSh1HkPhtzaqyYIAFSOzqADU+Pa2y0ocvrnOwu9RqmQjxpIyaStU2bqPmqq0U3VaopkZlmtMkc2qOgANa67oyu6huktz8OezyFO84ryMhQKqM0v9fvCDFaEB5kOK4trLShnqRPs/rMsklzHp7ZHCre3yptKr8sfU77cbTPhNUoSgDIxVQZDJ/iAGU+KO6HRJpuGcoZ9ymdexT3oxyiuZx0Ll1018WXxJQZEUehtTalY4Rl6mm3PeX6ZGxm+xVtG1f8jm1LhZUfrTTi82GHMgeYU14sLdhxdgy2nNh2X7uGmSHZegcWfHPzprdr6te0sI5H5vR9bA3P5FF4OLQAWTtcWbQjrLrfQq34dyp7HcT1XWY+magu57XqrkQRlDzrVlGJcI2vF9q4IAaSr9Kbej+vFaRpuvIBF3U4ozm5p59VNwMfv6ALxi2pLm1xbtKfbtnhX7aVxfUeX1v1fXzvM51jEZFofWA5Mtq4PayfKbsyOM866XzjtfBOS9wwr3ZmvcqT8Fr9AFniP2MggZcTfKTYurhxbizPnLC+dtQEL3AbfSB99XYwPTiFZ+1V9LUEAtmGQNA1B8DaslOkqUYZAMGiAxG+VlbN2dmQ1emM1JwLxpQWq9VogKEYkXXsCV5hsOdL1aOUdgEEN4XJARd9k5s0+h3DO8CqAZmUGwFacRMHzAALSWwzHwtRYxvQPSvkQlGE0hHQJEbOMRaY9AZgMAwkxr42rLG6uwlRVs1HcI0XlLRECfK6LbmnWE8JKq+IUJoaQ2pSjMT1G1A8/8UJXiiaebKMTG7EMHG+KB+iTxUKMfRZa9FcmBLoBFfJh0Tq4JrgNauc8XF8Jvu4xJD93apK9gBGggFCYNVqrFXJZlLHsFCd0kpdNnGEMGZUpOH5yFeJSZ7TedFNSjBNlFOZQ5mJtT0GdPQqyuF9J4bEsa2jSEjL2RrD2hi8Zri2iZc5A9Ln7SWYsVY9za7RI2Zol58T0YfM5l8+peNc50EFtiDM78WEgrkGdcFvT1mx2hfw2FNT25Km+b4mg219ZBO4iCvcegABudzCmcIhY88p8c3E7JTp4z54yjnVT5ltNFOZNwUEUHIPxISwWstUQ8glCNnnEpIQk3Zwj+WHK7miV+a1clGj+UHeRIcrS2jtIhOVkSFVOMJcqoZPK9Fks1kinSkiDK4mYPpNqFIYJyDxbTG1SqKncpbu8jVCKBXarhEBUVFBxVEj1WDEFMElF1gAdXNZgaG5cuZqG9VfKI1auoQg4Wq0WkAo0HIqYCj2A+ppJawB7LFXZrASGwRYaC1jKLUYxBEV3V0AYFi41FofWUH9bbKFdrtl5t5bU6Qkbi1UE1HrCtsg2owRZeEqmjb8VZvnlsttOj81zsRWkgCDEmLrQBaBRNO5k30HHfgydwbc3tuPU609Ezlw9zxPpa9q1vUrAfQ2jN1qynPpzU7I9s6P0LqMT7JgehV1VrJCOlYm7lHbtA02vdAy4mqrheGrtFKs6anoDif9+YQVUlTRw+VOHwO2pfVBt577knkpdWEYVAsDJATXdRlYfqQPTwYzHINkHXlqpg+x+d3afk0BNpQbEuJKAUBlWEzD6aRO7sY+J8g+HhlsYoQckj36CZSLIHxlDNaQBUjHcJ8+6iIOttfdBx1MnP2CrRDQGQf6cy4nxISYkZsZCPqc0xiTJKPEnrg3jbOWoKP+bxASIkJIQUrFoGFyFEWXMsak+54zHGz3fu3muBZynktBbS8O6Cygsscuc641zrHpOFdk6Zxapbb36gYUBI2JtqvVpNebC1W6tOOey3ppreXCOdtnJ5qNEitT1QNoofrpt0sUHq82/dBmHVJLawtxdvbIpisNsbDbNX5jm2A2Nm6eDwtTYPc1/LB39lFa/YtICchXy5yiIwOhb4KBArySC8WAB1FYP9x4AB0WgOYe5Nlt03JOzZi3J72SZ6J6EYP9wQamwfg9PgjnpAbdPI+ezN0lHnYve3ClxPHwMjZyCo1diyfFJbSxJ5m8nu2YUEep4d2npHlu0FkG/YcG0MmUD0LL1nQ2LRLDgnD7buHNl7ZnQV977XOM6z0MtCMr4mHEnkK1QnZrVe87w/zwzrXtdHfgwoQWihy3zs1H3IdCvXArO52BsTFONdvrt5qjraJNQMEyXCd37SQXjz4gATUt/7vnKrbda5D7r7uJQ3xKbd8tGPbPQUabTfd0nE6cso6ix29HoearLSoFEHH+fPeoe97Ku7bKdPJ+t6n/boz5vC51goPQGhG/R5bzZm5GGS+d7J939XNu+/wuI5ntEJQAbYHMQBkFAApafdHpCNjUXYtXRL7Wa7exrJMCQwDPFhAuBwzhXCwDAFAPAzRQgBCCCEEXfizEmO6zvXYGaAgBF3RH/wNwWUWURz0gfycFnBABfzfw/ydECGCD2DDzzBmVikgIWUmBALAOwP11zkmBKVfDgKf3mCQPfyIE/0qG/wwPCE1HAM32IM9wIO/X1x+zMTYNIIeXIK0kfwQOoJQK/3QKzi4MyWUF4PMCIFAM4N9jYF+SlSgL4PZQEKRCEOf1fxoLoMQIYIkMUP4BkWaVyXwLkK3joRmWUNMKuQm1gMEPgO0OQNoNQIMJ1m3msJMNUNkPkK+ysJ4LoU9zIPoAoOEJ0NEPoPEI8ICNYKCPML8IQSBj/ziJIPsI0PsCcKoIiNcLEJ/x1mSKkJkOAIsIKLoSkIAJ8JgIyKmCyMqByL0LQPyMWkKIgJ1DwN8PVCBhYJwPaLMPSNCMcMoPqJcMaPcKzzoHXG8I6JKMSPCBKFoHXFfigOgLLxfEGM0LqMQIaLcOiImMWKUOWKqPAFKM60mMOK3GOJCLCOcN0N2OaJLXOP4COJmJOLmKWgOOMLzFsOBWqI2MyOGO2NGPuMYKlSMN6MAP1ASMILaMhNBz+JuOyOBLyMYKW3olhOOI4JaPKIxNeOuKGPCORKiIeKYINwuJ+N+LeJF1UCUM3CrXxM2MBJENyOJNBPd3XDpOhO/QANpLxDUN6RqK0KRLuJRKzh5P4E5M6O5LJOeKsKuP4P+NqKZJ2NFOlJpNlIpKTVmOpKWLlLxIVMRJGJFNZK6NIT2j1P6O1LKJ8g3D5IGMNKBONP0L2KSLNMlKtLOJtPdLWO8kVKFKNMiOdJJKWi9LtI9MeJtIxE1KAJ9KGD9K2OZLGJdKoAxEjItLsPDKoCBjTOjKhPtIJNuMDKaNBPFNtKrSxLRFLOmMtNjIcMZMJKdOLJF2qQlLDKpO/TIymO+PlPUPjOVKJKDLZJxM30qNeIrNJJSK4joFUH5MyhqPg3X3RTzDagAFVbtNM9gT8Hstz58z9p0g909OZr92BGg79yBisJi1BB4r1N9cR5dW95gS44IAAFaQmQPxJPfpBfXvC/fvH8LQRlMQHwe/As4Uos8Y10xhMxTcRYrk7EqCzfYWeXBkgEhs8C5M+LeqQeA3OCzArC7eWciURU+DWqfGG8vuX9GckFS0aIWxI/IBHcr8vcw9FrQ82BRsU8kCrzFcLaFBMxV+NqE5P+DvejLvJiqdFi17P8upACoCri1CwslkwcrOKlAQCMZQTcTiZQcYI1ds7uVSjfCi18YyNIhE0CgMpSps79XEcjAWcizSjSnS3C8IGyxhYQEcbMIyk2WgUy2s+cn5EoPuTFFkCi3zVQDQMmTLS1Hc4/NsJ5ZjVHQXbXYKG/M86QC8tET+YK/itsh89gGgZQGoT8+KyLAXaLJ1Y8kAQC4C888yx09Ckk9EPEdEPtMxXEYyny9g04nVZq7KzfBy7SiYfM+sxSpMxqoGRQeiCKQAzy9q7y3y8cxiJQKasrSXaCvMRyoasy7igQOhAWd8+gNqyitQasai0LaK+i2uRikq3LRK8qmTFKk82/eSxdYVTiSgA6nK6zE1Aqoq33UTcShKqvIzbXSq6ql6/0+qyyiCgYfXGXD6nHI6jqha7q2GraPQBGw6/qjawa3SlCpUtC6G5MvgDMEmhGkHFiJG+arquYkm4Gcmjy9arSpy4aqNMsgkI6sKk6smOrC6+xBiuKzlW64G4PR+Di562qna9q9SgSkFMgP6kSq1AGm6yvMq6vCqxscGyWhSsComkk35IkJmza3S8cg27Auaky4Ig0uqxMkErjPjI23G5y200fW8vSS2wi9YjKuEXESatgEyLaAvL3XietRWmKgWvhQG0qtPS/I88WtKsgb22XJQAQdyta9STUPtaaykvKkAaIBWjc2fcvJ7QPNzWO9ivhLW9Km2lUk0uiJ3cIGXFkMXA3LO5ylFHERYgQf2gAtu1mgm0au2+uraRuv7dSLgj3VamM8cjuvaOQbu8ejavtSEz230pOhQUxLJHze8mzS0ITMOy68Sa6oW1WmO6S51VKl6hpf6Q3bJKiwvMjAumfUSufKO4WtWkGq/TWuS7Wge3WsaxglFHuf7J3BgFmzMoB3PI3ZaweAwSk/GyG221U6qLMOhOE3UEBv5OqLavS/oVBuB8rLemBnyle/uoxA268m86B76i0S0ezA+/mq6wWxrSnO69Wh6yqzi3+8hqzf7Oknek1MgEuYqk+1hkWti7xb+mq6uka/+oeoVX2mZV8GRbUcB3BgYRRxnFQD2/uxB2u5S5cW0sXTB7OJ2qUoVGCyPAHbRzq1euMpO1y3PUK7Ubm6i/fCJcOphyOlWsRj+0Wiuy+7h5FGCjGnKjS++4O9gIRkRlh0u1i8uyRyun+mRnWiygBgCIGNypG9QJu9uzJgWJmnueevG622RtJ+RvBoCXHN26IUYFGuYwCJQapjSvMIpnB/G8hjMBG13aBvuAR2h9c5+w/Rho+5hivXxs+5fShQJlJ16uGvh5q65EfGJ8ZuJqSqZ/89gKuxOmugcqyoVfmKBt8LBtR02w5rR6ZAhmMhBhM/R/Z/oXavzZRk5nB02hTECaxy50h7aqNRpFs6h/p1wGiuikZi8Y+2JxfX8jZ7GPhLh2ZntDMKxzcCJ3O+WlZkuyFg8hJzZqq5JnZspqG9JnWIYI50B7Bk21G7aUoI5sYL5+B0p1Jwlip4xSYhZKXF5il94jFdBg0C52B75vy4i8Rdq7A7PXzNqAARVow8cPrBbGYxZ/KxfPsepADhfxcW310TCceYL4BoeghLgWD3g0Cun+rEp8bWbRw1qSekfVb/vKeQYQQUHIwuP0nLMpamV1NdbsbrMZaQbrsWmXSxvNK9fMYQX11GDZZdd1e9cFNub2Zht1iDbAmjdDaXT0ggI1HpIZbtaZYdaoCdezGDZTczNWgSzMUCvIxjaFd5gOF1bMWYLLRrNzp32fOlaw201fvNcxbLvPs4Yltmb0fjeJoWLrZHK2krdTcGCCM8q6YnZ+Zzb9YMaFVJtHfNJxzddppXc8orazd7IdMXfuYGBKALiUKBj5g3a4xHcLbPbncFf3buZhqaoim3eWlvcWoxGffJNvZucBOCDcGZanZPc3x3cmESGSDSCZE3sHOSsqpAPtyNllaIodL/YA6vfLdfarTA9SDDCg+LNBsbDg41hVZ/YQJQ7zanffkLajNvaw4g5PFw4YO1ysRVcI7jtBaQ7qrI/9YeePdXeo8w6SGw8g5RPg9g7kO11UcQ69s+weeRagNYioDaXGDah33ocLtbHY409Pwkpe0tZkz7YTvvaHf1txD8X7WMmU8ndM79goH1z4BHytr3d2cbJhuTr3nM8TBpq42s488s/ncHZc+TLc7Hts+ZAc+dp86ijs/C90bjcC5JOC98687on13c6i7C787vec4asAYxVOwoBss8/boOBC4GC1CK9i/7Pi8AZK6S+K7C4MkEEGEc4FOrazmH1CeA4SzqgivS3capk8dGe8dEYtaSqI4M6vri1IqxukKUD7gOmOi50Vp3U7ZG+7fid7akYhri5y6zl9rXFPeXNTfnpTvUp1araM+q729O/rbzGS+7mSIxtdynPnou+y71tBMe7TvTpe/u8yroSe5vN1aO/nYaVficYCxcd68L3NhBcc3BdWfW/WaI2maesM/e6JYDbxFdoJC2i4nl3HN0iNikKpWUbe4JYPYTc1GJ7MVJ7fGcqpalRJ5Hvp8q8Jsx4QRKCZ9p5Z4J8pa58nKBgkVZ9B7xmMkDo32iFncBfmDgnCDh+3PlYDyR707awm6CbTFoTssIeiHDYNFYXUCIA6FNdW4hcVZ7ehYvq2bxcu92+XHIwNxxwkW3BGE1Fzj54aaGFUFUCxuiDd7XHJ99YfeTId9UCd8of1BGBoFkA94Ai984mzij/YmQuzYaV9qQ2kA0DzEYG/ioAV59IR4VfPyVct/V/heRXDdTpvOYHz1HAN5SGN+W+wzNbW/N428t5Ve2dt4+4Akh8Ah+0Zsz4OEoYveHu2iNwj9HBGGH7r7Z8HrzY7r3lUApt5fUkyb1Un91Hbqdw0EYE39X4NF6uYH39WI6bF+ND80P5xxX/hMiZADl/67skG7leG7N+L4t5R5xbVe9q1++5HH9t1QG9FARvdFsrzb7I85sBia1ttyq528aEqCH7IwGzCH8SGY5VGiPlKDSEfe/tAOFc3pZOcKewfEkqH0QEfVp+rderpZn76+8YgqgFrnOTa7fofMTzFQEEQnwmo5egzA/M/wbCv9Ee4A1XjB3jqTdvYd5DSkn21Da8c6NmWpiAJN7F0wB7/dvp/xkrW8bW3fDnuEE0pwgem4wPMCghWij9u42g3Mqv2iATUKAb4OlP5x2499v0q4f5JnzvIGCPqzlFnMyEcHmClAlg7OIH0XTi8NQzdAqlPWkEcCtsfNeHkrxTxKCIBc6MvrayMS/8oC/tGyjLyiYpBQB0Q/ch/0gEwtZK6gjHsyxIFG5kBw+IwXgy97UD/aZQvwQFzgH9BihSA/2uKhWKUCsBifdSC0J7KtdvaEQDGif0pqZ8CYI+NIff1ooRDFefAovtkOUG5CreqrftgkLizLpiQPTOEMtQjYZk7+0QBvpkJ7wxDBBX9aAb/TqF2Du4GYYyFFFrbKMb+bgi4Uoxdxagswhg2obYM0FglogyQhqNcKByUlFq+uT4Tr0eF7x8QrgshsinT4jAz2vlXOnBCioMNIhUwxQTMNiFWsZmSw3xJXykHp1ogAWTiK8VRb0BHAjfdTkrRb5v8URhwsWscIHZvDmWmQcfnv0H7SJmqsuM3BAz77L9mRkqVkbLleGwCzheDHfhP25GbgNwsuYyH8PQGciB+OI1geKJxxbCz+OkOzupUh7hVTqheOCLzQRGTDtOQNPxhIygHojvapbCRAMNX7YUjYK0JtjZgKq7D5BT6fgQcLG5sd8hMA9nsy0QQ/ZPKmlXVj7wZ5MJZASNQWEgP5Gei82gsAHr6Lu74hfBqbKMbLlmrUs+YYI0Xr4khGZ9DAerWXqHVJE8CtOVub8i6Pupq9hBGvACFiL/5T9M+xBDQASJkFEiSRQzFbgoKyGSUqRATNQR6Pn7ccvkjI53nKLd7z0IonLXvr+n74r9WIxsNBn2hKYECg+xnQBsKKZFyjo+k9McXRBlFTik+lmOcX4LT7LUoobvBgN/H3r5ipOwzfUdHSXwqC5wsLRYUnSrFUNoggdIAXIKb4ds2x+wyka6K7G4sChhApceON8yTjmRFAIIpiXQErjBxPWKKP4j2j6kFxC7IgYA23HciGIsfMfrv1gl6hpxmEg8XjCnJvwDuOYTOizgbEcC1OQzAsVeKLHMVdOf4xJiaJk6WZqe78CMDiFnH19mxB+VsU6OmEdimJOLLvoULzZTkY+TQnMFwUWJoC5is3QYBpQ6HvksCPLcMb2KXb9AJJ8gKSfIBHp/cqBzIFQNgJzAN16BHHbij7A3A0t88owuCI/03KXjC+yIoSaWKEEPj0elkj9gs3kDvjeJESfiY9hcmMS3JRw90ScLpHkcueHzMYFKheGTtopmDCRHzFlHXNs2pw94aglMFmDrGcUtMeoyWrSFI2WSJ3H3F+Faksu3FbJAIC+Et1FA38LgTK0050TdyOnKnKFOpEsTuKfiNBj3QsQP0tQDoz8fYR2w/jXJ7DNrJ3xt5iS+xDvFgi3VijKNrB6jOaTMg0jkZQRu7HoTNM0lwh18mSBaT4OWkz19p/tMVptMIma9NWS6PqRQA1C598+sVJEe2JCkTT8OHkkQWEE2gEhap4eAkLpVRaKAhppIwKUjhentS3p43LbhFIFGaC94y2YyLhL1D+0TkPcY6ajQBwpTVoWNBgEoDRnqS5GebeGXVERkn9/a+uUEejLmKYyc8HQnyslnungirpTUDUNiGp445VybbJ/k5KiFjTXpn9N0Wj0+n297hFomZFxMHjLTc6T5VtoSHoBCRHRQU8GZJhbKQzOp3YmGRGNmlu8saBsVTM5RNiA5sQCgWCnP0JmzTSpXwvWZqJWmWzCGjCLUCn2QkZSihds/VGdn1mpsAcLObEP9BtkkcNJh7Q2YjQ9k2zxyxMziX7Mun21loDCVSipzzE0SeZz0vmRDIFmiJyxtI2GQB0i7STSg7I9RhFHKL6x45Zs+1n2N2oGh9YAIguabVzkqS4QBM8ubtPs7150GDCGuc7X1yxR25xs2Od0IYEaCAO3csituAYQb0JcNZE6Q1z7k/SkJ20oCVd0MYjze5ecxuamwwH2dq5+cpubmz7Gbyx6Dc2uegNq6zzJ5So1PnFmzLOsh+/Uu/iuQcm8DER149+pMzvEqtv+rE1QLHMjwxB6p1FNoCXEWLg5mO4QcWI1PbYjSX5p9W8XMKmmATFxS87uBiHyheD/5mZJqvlFxnoK/KcgIeeJMMBQi7545b+VgpOQxs8FdVDwN4BhBRSsgLI+XLRzDDFJ+ClC7qRikZznythudIDI9IjrQKJmsCudB/MfGsTk6YsnKci1GGdRi8fE5vqb2dG/iOpGcmkbaxdkL9M6pE4yoDgiYz1NFt9UzqCJrIBzzZu0jGpmFvo6zdF6A/Rf9isVOyF5iC+oXCEEAGB/shim0VsJnquLLFOihxYPNYm6RfeGA02YXh3xczHJzU5ycrPEbYtVBCwzyU4sFEtQ8QBTedBmBZztyGeFMtJXtKMjmTpOi85xaW0sxQMepmSlpNktSVlKMlFE9aLvMp7JkZc1S/7AHFe4JiclRzUzu0psHZzIxKmXJQ7y7pVKsmWSNpQUrXo7TD2UYgWDUtaZZKExAyo5uMoaWoT1QnS9xdxOO64hRxmyneKsuAk6wlljeWpQsowU7KF6cIU5ZUrLl7zdpJ3XZekvmU3LzlzIS5bQn2VMywgCHIeK7kWLjscx7AHfDqIvFRLeZxYmYarPTnMShZFY+weV2Kn/LsRoQi0CuWoncDk5Ai0bsophUJLhZExA6dH3XRHRxYMEEuO1HoBkA+IsgKyFYhggrkluIM+Rd+IhXjToVIk6aUUuSVRiQIk1ZkCL3UY8qRghgfxSRHwV9jEx6pd+HQmsXvFTOUqnZa0PSJsKkl7wuzi2WlX983B6qiMNKsQnzy5yKqlCYcu7g6qRgOq7VfysNx8qC5ZBI1eoolXyrrVFqxZTKudV0IKF4q+5WatrFWrLVko3QS6uqL2rIpfYsEilJSFur/V8nSNVquVVerplTq2NbKvVC4hN6mqiJnaoTUJsk1vqlKQzx2Xmq/V8a1iZSt57kCcFzbCBdzLBUpzWV/M/xqjzxWazA5MNTaCTQ1XJEDZQwCNWvw9W3LGlxAg4MoxwH9rMy7akdX2szXpTQ1u0zaOMH+Z8quFUo6mUmF7W68RUA8iyaquZaNRKVjAd2RuuXUVTw5a6xdRTKVW9KtZu08IG8o1XtVnKt6sXPetKAHKkF/QW9RFHPWXE5JYQJ9ZOqPWXrKpO6vNnuqNzuzpVYcjGWet1UPqB1ay+3jBsjVQbV1KdF9SzmjmGMSum9YHK0zajWQIlT8vUfRLalsN2V8Sz+VyveGKNYGBkfmAZJ9gj5yWx4t8fBpNVogaNnVK4cyE3HGC6ExsHStxvaaXyMxmA0dcbBv5b8QU7UQjYWIL7gqGJacxtV/1EVUb6RaagWMU2aHeC2RtwjeTIm2hN1tNGgXTfgMcXGr31PtZaJpoXr/KiQbIqmQBAM11Nm6GSHyhKMw00JAqx6yPg1FJqMIyYHOKWHwq8ZYqVewkvIbCqznXqg5JyHDWtjx4Gy4tUUQQAGovnOzZ1QcwtZnyF6DZw5jiHLYlrY2Wa5pGfLwRIgNndEytinBgFusKUgbZp2Wu6XQDS0rqvpBW5rbVoNXbqLNziuaUQoq1eyqtA2wbCYubmxa5uI2pLaUCm3Fa+tyWhqKlqgnUzl0KWlrXVsmVqaiZw2xbett/X29uia2rrcYpE1hBsKgsXPFxIMAAybMO+c6rqPk11rFNZG5TRRtU1Rpzttm+4TdpNSQhpgRAIgGIBC1DcwtAgiLfePCnl9fEx5bRcioqnNtny1a0vDzlakGi35cw+IdmqC5bloGKZfbSgxx3HMMNc25JRgNa3MjaEAq8OcLE2UCqxtdyoOSgpMZYSaETOohnjpO0Za+ls0mnVkjhrVi8yEDbPDGr52brut9WnNlxzMXC7ipzzYnSeUE50c5wDHdAu9N8LuTblUuxnctGZ2gdFdOHETlDL4Ssd3YCHZqfY047eAihvO3HQLtv5MLhOrJUTgR3E4axJO5un1pLqt0L8ZdPTAHBzq2EO76OhuzmMxzE4QA1d6Y8cZYLt3ICSgvkkFHBHu2grn5JGtHUIrRFRaMRlYlOnDprFvw5ugKkAPaP8mQKYCo0+tUpqNGRaAJPY0xYe0X5gT06BesXNvy2g4T9+DCAmP7JnXc6zF6E5vRNR8238Z6MEzvdiCH0baLd3Ui9KvN+5F6W2j8l+iyue2xLNuH0ltfXoTZc9L0Y8r9uUKoA7659IHEnZoMaQoIQqs7A/X80Sw4FM2b65xag0YjH6MOeTfQavLXbfte9MW1zmBESzA9z27dV+P/pvZbSAlBLLXb/rxD/7+Oeu8Dgbqd0aww9LuiPWFKvWuBIDQXP/SyE/0Cd4Dju6Dp8jN3q63d2lS8dPsZaYGEu2B9DlxDwNCdg9iB9WW8Wd0e7Y2v7b3fvOAMhUT9Cu/A4wcIOCyWDRur5cuDIPjAPmw4yTcwBU7Pl0VAU5lQJOClV64lEOrPVjpJJkG3FWSX2izoeZIVNlkqB/ckpwKbCqG8MkyMtrO12I7dgw55gYGMOaDzS6pX7I7OcpaHb6qXUVRLodUtyUFthnKcPj0MDB/DsuiwwEdP7f6MDnBvwzKVcOWHXiQe5XSHtN3h6JO4hzXTEcPYeH/smrCI3AYYPJGmDakZA8btd1CH6dVBxgjkZKloMCjSuwKikdxUm6m1lRrIzDWcO30gj9RhA4If/EtHYQxBqPccjx4Q9jqZMcIQ9qemg6Sxas/8ZRt+YKZUpg/bChuGOKAyn6cir8UoZiWGjVDYNTlQ1rMUZI+Y2TFzW3oGAzdNKbTeceZt8MN7iCqmZ7u1Ryb1Mc9GNaQzGJZyrRhNyEhFkzhGAft4xheePLJpanTG09N4qFneMx2BLNWowJPr5nYEWgm8fcGQDUAAAS1wYHS/xmNKK5jTa0SVtolXR5pxE9AybpDRMjBfa83U/V6PXyjsN1nECkwyenE0mJlFB3rdyvdzBjb5iYFDeqC568nammIHvXu0mA2QVIiIEAM8DECIArgbgYEAQBQAtAcA7QToIugiAb5dq2+LUSqaIDwANAaAY2DiaI2o6oTJfGE9DOi2tqMK7uCAjVPx2YFN6s3OnQ8hdwrFmAGhoci6a8OWqnGfp+wh6c9PenDCAZtw8d3mZfFHTnO3pMGZWKhmFCueX5DGa8WUtNKShVcPkaDOemvTUyhNhmejPZmS2hZ1094fvG5naAiZ/wupUDMlsgYM3Os7WXjNQFqzrpRsxGfrNagHTxZ5s5WbbNZluzY7VM21o7I67hzvZkpC2YWQDmfsW0dSnYgPVTzUac5z4mQezgBHvW053JLOe5bocNzTp+Yk8XXNLn0tcZ/s/mYwoLF1KXPU86OfOHzmICxsTczmdzO9D18upbKTId3xL7wT/CyE6/Iz36cM49xx9v4nUowVgjmFMxGey3MXniT9yk5GEygtIXN8sF18yGcvONVwL61UJYKoDi4XyzSYeC0cemUEXEKOFBMeRZaZ4WpzJFrk+8NQvYUU1ZRbAkhTgtvnWJWp9Suv1XJI6mQLC9lFeDfowK6k6pAkz+FnPtUVoPF+c24KYQyWYLcljCwmawugkFLhlIXlBY0vqUnWRFpQPRdAsYUdLZiPS24OkuGUzLKl1s2peu6lLdLnZgqRZdku6m+znFyycPhWix7OaowmiqNiZUSKMGMBQKyIHNOAX1i4OjeKRcfbZkmArVTfFZYwWlo+q38t0+ym3PMRZzyV+K6lagvZXTsuPVy3RfcvRWMK+VkKlpbcGxWUrlV6yzOdsvfpqrOV2qxgqasFXErblzC5ZIDhxWQhNY0KsYHUAoqgW8IgK7mfsIhWZkYV0S76UitPwjL+tExEgJDm5Wu5gOTGqZccvFWurpV/WsQWWszcOrptfaxtbQvKWYCGV7cAOdblO9PqZ11y6bSWunXCr+ly6yOGutPW7rL152p9ZWsdXtrqlnaswQOs+X1AQ1+HbvWT0tjlo414K7DemuCKIrOKqAddY9RKWHrqNX5OTp+4tXOrgN3a4wSxsi7vrk7J1sTf+vunDLmWjo2TeKmrWrOdATa2lfPMlWGLOcxmwlcct1yObJNi6/RfIbtUfLPNKuJNYmvw2RLiN2a8jZhYDnzFaM3VXDSzoCtvFeYDULqozA4g+6fN1mwtcAZMI1bfUzW32nbrIsDb6kDW1nQ5MGWdb1NoLqbY1UW2tb6jRpitA1WK3l6ZmzKG9eHCy37bCtwOh7ZPXoD9bbtgO9nQqkA2bL3U9qhqG8sZ03lgdmMrnUtCJy5FotuG56bxOSUsaElupLLYbMGKgiwRlFFoo+UB86rO5hqygx2WF33e7dGu7kdKAjm0p6Vqm33ob0N3RdAwF8xAwLuN3u74uiszbfbuuc+7Xd5u4Ludtj29YRdjiztcXSNNJeAOPpmTHPHQ307tZDexLbWY53yNzqa63JzCOmcgN3N33h8qA2R36rCFw9kXLPvH2rDhjGyv3YvuU3h7P+4mk/a7sn3Mbh9v3QCJfut237tp/Wr/fMP/2H7FjGG0ffTKe2fw/Nn5EBE4Vkx5DWGDeyUi3tdtwBu917fvaruVN85TjJ1pIOXMNMsppgzykQ88WwO6kbd9+wlzIfPdKHtht/dIXIfo2XGc9/G2zYX4MPyKQvDhxvPFSddCrAj7W/Pd1sAQhHTjfhyxZQZSOmbxDs817fge+IQmYx4kOFQytkxfzgVeG+g/FuYOYh2D6vbg+vsdHo+td8u5mTeoBGNopnKx3jajsE2uMDbaB3XcnauO/7Tdnu446vvOPDGnjsB948PO7UfIrhge7GeUdAOt9xNCx/3Ynsj7MbcTnQ7PYruZXWJN12+sEN8v8X6Oejh5Bg9b5GO5rIF228GQ1uWPgjVLf5mXdeu0PgHqJbPJU4Z5NP4nPjy+5XbMdNLWn49nx4TwqdtPB7xF6J+NoTYDPenh51TM1T2UOOOn6T7ilM7MN76iGurMG1o+opgndHmdjOysSzsvZjHqhqK9w5JMykyDdBhnk61oNf7AH4jsp6iWXQvtLMB+3WFR0BxgG4HIzhnVT1Oe8HBVDz9Dk884dOPjnu0l5/voudGRwXaTq63g/zaQuuu5zhMUQ6hdiOuHPabueh2NhizJWmz0pLWWEuGOZhRgcHT4hcd3cLRL7LF5RItDiwUAPgCAGAE8A74UgeAZwJ4HgD0B4AdoZwPDimP/mEb2K3O/MKJNs1t4NnGrc12/j6nDTZAY01DYxW1q9nKh5VgcYQUguG9Bwd+FFBkSLF0G9XPaAZDs6Jg9X0L967C83lauGoRryVCQ+86OzDXHgm10o4+e3OR7H9+1+lz2hOv7zDzVIeZxi6ovgXEjx+x64ag2UA3zt/xCkQK5PDMuczmF104S5RvI8ZXI1gZItcGQdXdS6h0Pfns9pctjXJTsidcCqdTTcm7e+Fulv3ipLW0Q7lBZUwQFbVr9113Q9BINux2x8uYidwkUztloQLvx+q8fZpribJiKq1kF6L9vOn/jh7uO9HfHcJqdbyd/M+nf/d8owPet7W/4DdEl3CbqND7Bm5DAzYOjqB7s52dfCBXSPA5yq9rzn7RUoVHEGbHgDiw3A3IEEDUB4ATDHtSrl7SY/gV17RnTS+jXPty1U7KWQHxh8yHx47uzXib+54HTn2rgoPCYk5O1YHjM2onLbhp+qBQ8hUnWSHktvHr6vDgmb+H3x1O8HfdO8QRH3zaldI+E9CPPLdG6R/jcweV3h+qj4x/ut0ewP8H57iB7qes3/jOVoCGs5tk8LcXaDgpwY6Kcoir3Hfea3c6+l0kq+zEJPioD6cYzlPeeoK37zx4CfMPMT4gVp9sOu89P7dOxCp+5H8xp1Nzrh8G4J25647uniRMXYs/aezBowObu0+bd2fFPdENz0588/qfDz2SHEO54eFjAqHOb4Z3m/P4S93Vij7hTZjl5r207+T9lIU4pHZ2SXpTt1wl2RaTqUB+qk/ibfryLrops/QNwO/s/4PYo5Xu7pV+dtBj6v89Rryx59vmvmv1qiryxHbpdfR178XUCV9NcdfYPkyX2J2raRDefX0aMr7qoDjFfov1t2L6Jpj3V9hY+qovXLxQfppJPGX6T1l/2c5eqENX18Mp/q8CADJoX3tTX1GBqSRv+oAc9d41X+H7vEDCzy96UCNtnXNDz54Oty5obdVr3w8z1IXXdeeNVt7249/Ncffwfl3g2ed7h+CxoPo3qNAEJu/g83vd/B/iLfS+9JMvii7L1W4U95fQSCgI2FAx5H6rbXJWdvZT4cFT7lvvn0n1nH+gImsxHgiB39Dp9ELh9t/dr9D7G+0/DNvP7+12/J/s+vBfPqTVV/I+nf3BFP0X1z54qK+Of1Pn77m7RdxYdlk1XQQRUT2vhcf2zzewd8J9Heq3Rz078991V9Zlf1v6oX8hR+C+2P9v9SKA3M+A+HfTAJ33qFluw+vfqxGev786GGxGfUP33zD898h+1sdvxH8Zul+RHbPwLxIcaBu+uV1jyXyY2NeN/6PjfFbrB8d9nPht4JeG47l0xL/y6yPy7ij9hc3e4bK/i1cv4VocMPeI/Qvh85T+SJQXi/zf/T8z9beGFUFCWlvxgp7/1++/yf5YUOc+GooM/YQ/y+vbx+ZQCfgk830K8t9+eUG/XzPn6LZF9eJv1qk2fZz5Gt/dQst7fyyPfh7/BHc34VW0mv+y/q/p3l2wBp5FX+T/EDAr4ut38f+q/u7mv4Axf+1qj/6du43ogLABd3A/5/+rHgvbtU4Gss64i+eFAGwio1ov45+Unnn6EuRPkK4k+A/kcpGQFLujYJ8gYvyqeUWljZ4s2BngB7Bk4UDfIvWsjggi0BFDo7IUBGHv35YeOsEwFM2xAa6oDYEHuggT+1Xpv4IINlNqD8BPASWyiBhAfdYSB0Aaj7HYTuHQF4iKLMl4gqaAae4m+mATJ7YBe9hv4s+dEBf5BeWdNGT7+4AaZ6Cw+4qf55m7fngyGB9GpYGf+t/pnz2Bo4j75n+5rkAHmBWdLxq1er/mMDGBS3uH7uBNgbN51e1qv4F9oJgRvKGBEQRFBRBj/v/6Hia3ggF8q+kJEHDWuYkb4aBufhoH5+xTsT65eeAXI5OBM/kHQz0ngX5qOyYfvU6GegASUEQSb4Mr5y2AGg0E8sifpQHsBtQWAEtBFwm0GmBr/h+yQ+NQdQF62B/oCZvKpXmEHjBQdAL5t+vzHAF3mcEt8KsaWoql4KGe3vj6m+q/nlhyeVpid7CBlmPcIJOq/HpIRuJCkcFx2KkoNRuB1gWx44ExkMcEdyy0JlwkKVKBxLYg3cnG4+eQbgcFb47wXnLXBqbH8GkSpwV8FJ+QgfoHVQwIZxLD4LwajT3B78JcGwhQwYJ5ES7EiCFMImXLCI7eKEBsHL+WwcoYqyhfrC5LU8gIM40+QqB+bkhGvjF6dBIwZeyPmEzhSE8cjITPbuOCQTAGneU7Evb2OUFuvwzOggXL4HBpIc07zu0zkyE0hTPpP7ewQJozgr2iese54hkHASG7GVSCU77BkIRUIIqfypnSVa45rjIohVAV84h8qCCjLMgeoZvQF6X5u0FsBPwZqGvgpoTmBRkYvnHzahN5FaEAOHQXaFFBWodjZLBHoU0G+61fLqFWBVZqWoMQfUpWrJeuTsrpL+yoVoGHeOweqFPebvDdKL0fcIzLjqqYazLx23dstKzBwQS77ZhOMsugCAjmvbwyIxiBBqlhmYXIHO+AAV9KVhTxqp65hZYQbJNh0huTL54tYQWG3BDYRWG+wzYS7zphbYV7LFhXYRmH5h3wQO6JC10jmG4yiIdIYPSIGEqF5OCYWb5JhBQRqE+h2ilmB9yeFuHJu8vWHUahhT3g3RWy28MEbByx4SP51hcwf2E0I29PuFXh54fbJ3kNwWGEhBxzEOEthXEi+Ej0F4SeEch8gVb5PhpkpMTTa1oc+EfhP/BepWyOyr2a50K5Li6CWvSAS7aBzWMS5bhP/B+yHypcnqYA6MrmgB58n7hCYXuYOhb6qu/7saH60q4HVCu4DcoH6Y2frh8G/ogoU/4HBGbqxFEgztHRFvWTwTxGnh5rpq76wG9H6GJOnvB4LbygkcBH1hXISxHgRXEIGFSRs8uJEy+d4YWEPhvrqG4qSvmMEa3289KpHVBqITpAFu2IPhF38O+KnZNSqeuRGzGe9qS50QMOvDLSG6kdLIoAKQLQTEAUABiZ0uYABy5ageAHgDwAJcDGG0S0SqnI/u+xtabZ6TkW6EIB86oFptAAAFTJRZbi1J5B+Jg5G14GRl/Zz+pcB5FeRUIL5F+AAUfQBBRIUWFGYqAFjNY5CcQjFHe0ZBmpF2GiUdRQCQqUelERRlelFHr6SdMeQqSUsjZglwhUU8DFRfkWVEVRoUZ1EKapGmvql8DUWIpBhyzmbpJRHUaRH8umUWyo4OjkVCH9RqXIfAjR3kSVH+RZGJNFVRirjVGS2dUZnq16cKrtHxRg/CtFtRKUWlHrRoWpdGCu2UduEcBKDGP4fKRimmYNM4UHsoAxgQcME0RgDH9EAicYu3R/RHisw5CRIQeYpn20MQwFwgUMexCsBLrnSEQx43h8xcEoMUHZAx0/i5EwxiMWx7mKHzPDHMhLillCuGjEFF4t2XoTOEV8HNtQyAQCMTDwxhWztkEYBuQVgFr+ugTtHc+jyg6GTExbrLzSuMEJaAlw8ADvhHQMEAsBPukOPADjCfLu9F2RWUTg5/um+vSFD4mAnMpMAZyoKrwmZStnheo5MVpEuURkmw5PKRsS8qCqGSCtAnKfyMbG9hn4Wx4PKuvuYYqYAwOZY2xPTD1L2x9SpbGnezSlqybKqmAxo6+tsTPZRxMEbC7hxkvmToWxJbKbGRxfsZbELkjsssrixKnGCbhRM0enrQmGOrXgOygwLVJC8EsewBwQ0rrXESABAHJQXUG5pEItxH0etwj4SMiOCcgQsQtEhBS2O6pVOd5KZ76WZQCSFcERalU6FmTJp6rjxpSNKrd+pSDPElq/ccPHqQ74ZGbzxG8cGoDmUYtarMEBalvEg8uCr0I+Y6gLyoAiwcRkHsAaKtNFPas0XsbXuq+KFzvwiwb5oimBckhHiwVkPAA/xJcF8CeAKAHfHfuc0e/JURusbjGIa47JN4J+TEahr7qJnn2qwJCcV+Hr4JsPN7Hxp6lqDwBw4YfzsR//lb5oJk3leFEJGCcgmhxBwZtAIJEGpkwuhUCThI0JnPkM5ShEITuHzqOCf/x9q6vjN5UJHCcR59q+CZyEHBNWoV6pCj6t3ovq6HtjHehP0R+oSJsGlzao0hkM+ruqWMb95Gh/3n+r44KgLJKcJ0qqB5zEIiTomQkRamoma+MiV0HLgn6tECDwzdEBCPqq4DYmWuG6jgruxA5iInfqaMcomv+3coInyBRiJZjlqt8lGEmoO+OdG2Rm0Q2q/uwsdbE4a6wrnD5RrgNZAlwGJtfx8AGJqFGUqSwIypJyF0ZrFbRJjuAk2mliTO7NRZgq+BARBUhkgsat4W4kkhDZiLoSolFq1YPROIhUm1J04UKH2h7gim6BUfIa0lLBTSWYm0hFiXrHdw1SQ1DDibghMlDJfifWHwYaahX6jCBGlkHnuOQee6RJm4TgE3uMdm/E1iAdORgOa9fMAntxFEdsmqKvttZoaqsIUck3+rtgomJgpmhHadJHEfaEu2ZttKqPJsuHpoQMIdg8mTU3yWDF/eCGlv6q2L6l8l+IM3nLYfJNyR5oUJbyX8kO+I+LcmOB9yUikApHMlnEQi1LHsmDCkGhimDRJqDJqrJhDJoH8xGEVslfRP/IiwRGJftwkQ2JqBDjwAz5GkBFAb0SDqnJ9kdrFFJailsTUKvgP4AWydCHSlAaSRgAQqAOgi2EaRfYVb4NJsuopz0p09BjJypugmeyehtoawmyJu4WtqKpk9uHIqpL4uFDqp0iZqklJDQm7xEKuqRJFfSFqbtpWp6kXUlfhBqSkFqpdvraleC9qd+ayR94Sn69SlQZ6mrEydkFo5JCrhEkCxyrvJ6FBrgPym0KfYp9qXamTDnwJA+ug2AJIjqR9qp+Cab+g/aFoHdpVwnEPYQFpnKUS5TWVKaWrZknCqMIPArLoy5WIKADy4nJ+SVEmHOPKZclTB/sFqCTBk6gXrvO6iTjGaJdEBUE9p/QS2TDp8KTuHNBo6bLS/JYwR2lTh4IV0kTp2/igidpdyd2kNmKCfMGlAfCXhIGoISRaBJ6JKe7JkpGyeGlEh2EWIpiit+kmBiBtooyl0uDLky4subLhy5cuDaeym4mxaQUktpfcR9p7mKzohE2YtLvS6MuzLjWnsunLty7NAjaZsk9RkaRcnmucNB0KpWiXkTFOaeModYEBnMdKkexVsfCDIZTDjTH4ZM3DI5zJ94c/4iqJGeOxoxydNjLsOwySwmLpWqbRnIZpGbDHzmmGQNjYZ6aQvb/22lDjypkz5l6l38NFBJ5xha4eSmJh56ev64BWqbpDz00gbp444LJm8rTiOsoaH9pIKZzyqZpnspktOOmTv6A4GmaMmQJi0LWzTi28KnF/O5Lnr5GZm6VbHyZaxlQysCemch42Zzmepn2ZYcYiyMmM4q5kEeBmbp5Im9mUJ7CmnnsFkgooJjBlnpoCXArUQEpuCDSmeACgAQAKQH4CogoAHCwgAe+E6DIA6AK0CamXTAuY/qNZI0A+A8CFYjWexgJkhWIGtpo42yVQNcCzg1gB6iDWussyCDWkmiehm60po4BJAGWSAA+AYgFwCMuqICAAkiNkJMA9oxoMVnkJlQDcDNZFwlEDNJbWLVlDGiBAUBiAgJCgDg0HwFsTsgWgBABXAPgD4CwAm2YCQxpgqSABHZ1QKdkLZNgH0lsAfSZMAoAzwM8Av4GBMeRJgsQAuBDZI2Z4BjZE2SABTZcWEVkQEc2YgT3Zy4NP4rZTHLICVUZ2VtkIEgCZ5FHZYAG4B6EjgMQCOg+mHwaFG2eGnR7ZgJAdnsAN2SdmI5F2V4ACpToGTl3ZTWQ9kykz2VoCvZ72WACfZWQN9nlAh2YkC5AUIKiCTAf2Yy5JJIAAuBZZa5LlmoAUgHu5UhZ1gnpPU5Wb9C1ZLWtVlsASuXpFg2NZI1nNZFMm1lsAqomDaSag2OkbcwyIP1kamguQDk2A42cDlaA8GE37YUeFlrlhAKdE9kdZc6JVm5RG2UjmuAjQBjlOgiDHgCgEzOW9kfZDOflCc5WkBbmA5NuewDTZpSA7ny4TudDn1QBwPLhMc7ugEDnZyOejl6EAeUHnsALOaHmygX2XEC/Zw2aNlW5HQCDk6QEYdjQRMSedVAu5EkGnlIGGeZUBZ5PuTnn+5CZIHlOgheWzlh5rufVJl5/2dHnV5WcDLktM9eVDmN5KeW7lOoHuQjkd58wL7m55PefnkgA/eeznh5peZHnl5lubKDW54+dKROMUipMAN5/QE3mp57uW3le5gJKvlOgWOUQA450gETnCEvecHms52+UPk/ZkwEdliAvOVAD85WgBbnC5ouf2xWgasSAB5ZUuZqaeW7nsmJy5CwgrmoglWXp7qANWTSnVZ5+TPnWAggLrnYAZGImDqAy0u5K9ZZubKCgAUeZXkx5cBTKoIFm1gXIX5/iMtkRMTHCqwU5yOYVFo5fucmn8Gc4HeZv5z+B/kF5IeQPnF5HObvlIg1BYflV5tuXFjwFcdrjzWhOBfTnQ5ZWrDlIGHBcvknk3BQ/m252ObCB8F+OVqCE5vYOvl95Yhd/n3iv+dzkAF3kcAXsAoBfMAdA4BWlRWgo1jAUFZ8GD1aYoM1ELY34KBTYBoFLnhgWq5WBRgWqFzWfgVg2WNEQWxFc6O7rkFEAANkyFfQEfnyF3sL4Xh2SwcoVAazBcKmH4bBa3me5nBT7l6FXecYUNGphcjLmFTJCIWb5VhYPk2FI+RXmyFtBT4Wz+ORbumc2TBbgUsFRRS3mh6t+WUUr5FRbwWx5hhbjmqsKaSeCCFdRe/kb5W+c0Wc5f+TzkOF5EM4XsArhVpBZZloMnpeFapq9TA2z1niKgcYAEEWygIRfVnhF1LNgUBAuBTEUkFbAPEUkFiReIbJFqRfvlj5mRWS4bmX1skT5F/RYUUAEN+aUU6FqrOMV6ESRgTm1FC7A0XLFEhTvnD5e+aPk0Fx+QczZ8z1sPhRFzuRoXFFwxeCXe5Yxajn6Fkxc/lGFeOdUXzF8JUsVNFSJT/lc5pOesV85mxfvlgFuxRAWWgIKocVS0M2m7RIFZWRVlVZYRdgBK5+bJEUPFahX0BPFxsC8XlcCRU6gbwpuSkXm53xeiW/FIblIQ4lUpYtkglmhaHraFxJboWkllRVSVhgNJXnmWFX+SsVSFVBeqXtFGJdpFSEgJccQFF+JUMUlGRpfflQlj+VMWv55pUyCWlFhZ/lF5fQCXnD5axfYWsl5CFsXW5bhUCx5ivJVulLocdgaFK2lJEKWK5Ipa7Tilq0JKXzZ0pXgWTEsRfKUWcbxVayfFapWiWOlmpcUF7QGqpoqJ2k9u6WsFnpbOBWIS+caWQlppRMUzF/BbCVBWtJdaVhl1gBGU/ZqJW0XpFchbHnIoxuI2UJ23Rbfytlgxe7ldlPpb2WY5/pZkj9lJhcGX1FdJTaUMlLRVGWAFjhYNnslLhSLmcl7hXvQS5+WUcXX0rIcvYOOWZagU5lmBXcUFlkOUWWylcRQqUVlHDDjAqlXxTWXTlHRcEzPlqXAHoVSK5aCUL53pVwWblToDCU1FQ5VaWhl4heGWSFKJdIUOl4FU6WzePIeUSJ5wJR6Xu5iFeUXIVBhRSXTFqFfuWLFI5VhVjlOFbYXMl0ZUAVsl/2RyVIgexWpzJlr1Ig5EMmHBcXCl6BbmURF0PD+XRFJZc8WEFAFcbDCKJuX1mqllBReVgV1gBkWzlvMEJWuGAqnBUGlXpeuVIVchGSW7l1JWYXDlmFdYUR5eFRpVaVglfQofKpFUWUDF8FTJilGmed2Uo5plWaXIg25VUUWlllRhWiFR5dhXIlbFddkslnFbGWXl2xdeW8VXJRhgCVT5T5RjGXNOcWXFfQNcUq5YpZJUNZjxbJVyl8leWWKVTqEkW25FBX0D2l9lTOUL2ajkpaAQ0+a5X6lBJSUYjFEJT5U8F0JbMUCFwVSGWhVo5eOWtFB+QRV1l+DmlUkezVXqXkVC+R1XeVvpTRUv5O5fRX9VB5UxU2VpeaeUbFsVdxVXlCZbxDrkKVT8jEEWTrZKZVYlaEUSVX5VJUX5f5WWXEFZVUBW/gIFdWVTlmlXVXkMp1Y3aUqPjgZVtVHZZRUklvlX2WrVcJSFWNFYVSxURVI1T8XaVXGN9UpOfiC5UzVbZRRXGVVFSDVbltFQGXmVQVeDUDVkNUNWsVTJVFUcV55XGU7FiVbeVKIx1TpA2GYRtk4XV2ZeJWflEpbdWFVixKWUlVj1aQVG6VZWpVpFH1RBX01X3mEbQVf1WRVo1CFRjXA13VShW9Vg5aFYQ1iJeFWMlk5aNXC1hFYs62OeysPC6leJdLUeVQNSaVY1fpTjUrVitWhXK1hNarXQ1jJdtUxlq8JTUJVmWRAVSs95bAXou45uIa3pgeqJWK5S1rlVK5SkhrljyuJbKBIZ3NVwSdZzEEbn81lVapXVV6le9UOV3tZvTmkVLprm4F8erDY8xxxOwWy1T1H2Uq19JWrUtFGtXDXHY4UMVlZ1Wwhfm512zvnWvEhdY2CjFxdWvnrV1lbaW4VNVanWfV4iOyRPmftZSQN1JWYQzN1NZK3V8I7dQsJ9lT+ctVCFVBAiVl19tSeV2FZ5VxVC5+1TeUlurbJ7XeFAVAZm+12LoEUVZpNDcV5VA8PcWFl2uWgzc1zBG1lKVwFSpWgV/dSLUMhn7BqQEgEdbPmu57ZbwCeV7ed2VuAjwCgB4Aj+XS5cAUACqaog1gGvWdl1mjqBLhbANDVMAQ1qrmBULnmLiWkLFfmxphiDXQaDa2FXvCte2YIg1eu78G9YVALFX4jzIm9BQ3u8Rhqg3HsHEJKiYN5Lqlg0N6+NtDvwNWevi7QqwsxBDoLFRIiMI9qRGCIN9ED9iZhojcSDogWNIg2SiO0LkjVYcjTqCKNTTtw2lISjazgsVEYFo0sNfyBo2u5IvOo0KNpjcwAqNcddo1iNgsAsgGNVhDI3WCojbw0k0ruR9SteFoiI2sNa4Ow2XgG4Fw1GNdDaliu5W8moB6N2eDvCr8mri7gVxGZHg2rQaYTuzENaDcQUzIWDcg24NJeStBZNCTTk16NiDY43301gEU0cNJTceSEN+YLECkgttavXDVldRqXw1WGsfXD8VaAUU75ADTgBANd+QgSgNgQOA3m1i9bOU+A0DbA02A8DVzyu5FTZIUzNO+bk3ogKDdlVJg6DS7jTN2DUs2lNJLM43TNtlGo1KN0TdmCxNVDbg1SNhwcSBhNTDYU2+NETf/WBNwWKg2INAsHE2ZIAjV425IIjU83/SEja7nSNS6DQ1PN8jQwCWNxBXz77N6+EC1Y0hjcs2lI0LVs06NcLYC0mNYpYi0QtyLUo1WNMfjY2PN6+N80ONHDX82yNTzW438NvFO83CNALTc3+NRTfc3gt5RPQ0cN4Tcw0wtpDXtDkNxzfE2/E8Lfg05hhDXs2UtYtRg0otSDYs3ZNWQIQ0bNYrflBVN2jZI3PZNTUvWVAK9VDXDVjtTFXO1cVfGW718wKW5aAdNQBB5chblQ2e4b5cEUa2b4GHXDhauRa3g2o9bgX65GBXHV65NdoqXPVAtcnVC11uVoCTZ41d3Z0AiWJ1qSuBtdDk4afbjLVt1EJTtlNxCxa4Ak5UVbdmz1l2TTnHZdOXqWoKd8nbUNNdle/XetH9QE4ioRrUG231zuaG3x1hpUXWb5u2TG3zAcbbTmJtVObGnxt5OcCXptOCpm0k1jTe0W5thFU1SecR2kW3SVJbawXo1Ebd2VRtwFIq3PQybQm0QlSbdzkJtLbctltt9TR23ZtmtV63sAPrc018a7vDrwSumXAUWltI7TPWRtVbTmy1tKbfW00KV2XW2LtwzC9krtMNZ23gV3bb60/oSJv20HtwJUe3htJ7WO1ntkNBe0ztIDQ203tl7Xe12ID7Sq2rtfdeu1A5PbWRgBt+7Z7iHtw7b+1eV22QB37ZbKcyXAdlOde3TtzbS1WttUHcTVPta7dHmvt27Y8QyWawk1xftLVT+3G1FbeO3d5xOTh1Ntp2bO2gdhHam3O5JHd3XHltlbB2Udm7Xm3+E2DJ+0od37Wh3Mdo7Zh3Rt57Rx11t3HQR3ztRHWm1LtpHcxVZtInTQVUd1dQnZSdv9ZflMdq2SbWVtinYB3Kdl7ap3U56nXx3J5WnYJ3l1wnSnVwdToFu3HYgbIW0MdepWZ3T1GHQgSsdk7UB3k5dnY223txHc52DVOnTB3udonSABedYPO/p0dRbiZ0mIsneZ0sdWHex28dV7fZ24dGnfx0xdRNXF3kdenV21idhFY0zAQxncG2N5AXVoU5dVndh35dEXWB0Lt0Xfe0uda9W52et8Hb61y2FmPR3SdjHVl2BdwDQp0Tt1bQRDtdIHWp1FdjnX/U9dsXZtW91CXfp3VdQ3Ya31dxbSG0TdzXfJ3Z589QFWzdU7Q50FdkXeB3ddkHb12qtG9TtUate1fFUHV7AOhgH1j5VNxDmZBjbKmtVxcDZrOTrVfUJo35XdUDo1WcxARgJ4q62TSylVVW2Am3bWXUdWgkOYAGZPA12X5Ztu5XZdx3ZjXy1gVUGVXgpddB0VdSPWNUo9+7hAQMx2GQUXY9hlYDUVtXVWZUL1lJXjVE9k7bADKtZHQ7WPdTtdAgu1b3SACw8erZLmH1otTlYBYpHv93ZVgPZa3DgDDYixc1HNb+UQ9jrduDQ9VhLD3G5L9Qj2VdFPcdgrsFVvESY90vEbWrZ81RuVm1hPXMXE9dTaT3q1FHU02G9Rnb0WMIrxHT3/MDPYA2W9JlQT3klwzez229nPdz3ldvPexWb1u1dvWvd2rTXHy8ovQ+VVSmaQl6MxMZDL2lNzBJKiil4pfVkmdhgLUzFVw4tr1HC7rYj0Dd4nXgyLm8Wqlyp9LZWRVe9IVlWhMcTPYtWBlcxe5RjgJPTz0V1Tvcj3+CMFMVUbqqGbBX19huCe5ssa5Xj1y1LPWd1B9fVTWJWVa3T3WRV/+ZH3Pd0fVq3U1rgNt6fd0dtum4pB/Bt6Ne6fWgURN2fYiy59mPfn0P199YBWHYPWYnVv1HnTV362iKkf29epvYDhj9jfe7nw5U/abX+9c/UrWd99vd339d+FVrVDdYorX37J7/fryf9OON/2emTfUgZ/9f7Vb2ADrPXRVW1p5iANd1S/UJ1bVfPeq0C9mrVTVu17hTj4J9XtXF6hiQPqkpY+J/Zn3B1F/TfWDtsoNf1yVRfXf3vSpffr2QDKPaD6fejCFj7ulDfcgOT96A371mVYNYMKL9ZXet0TlvfQb2JCdJKe418Igx72j9rBRIML5LfdRUB9bPbIOr88g+20w1arRTVkDrtc2px9R1WL1fdoggHHOZ+vvLliVZ/ddWWYbAxfmcDhfbf1PVbWBVWx5eveT0CDmpjHGqpVHvpXaDRRboMeVvvfj0yDOAx30h9h5WAN2lIQ2nXa+TgykEb0cavt2N5iAzoMrEKA4SX6D1vYYPYDA5dbV4DjFfd0k1Fg1vWTgm/RQPb9Wfvq328qfpIkJ+zNe+V5gWfR4OX9+Q9YA+D/5QYDF9bHHwMZDA9b4iLmCieRhul0QyYixDq2WUOADxgzUPCFqQ2H099/A5kOa8ag7VLp+Wgy1WFDMQ8UOSDQXQkN+VWA7jXrDKQxtXL9pNav1PdpAy93NDNg2ML+W7Q93BkY4wQkalZAdb0PuDbNYMPsDfQCMPylYwzwMJ1QQ0nVl9EA3sPNkRCs8K09iw+P0Oxk3b01XDoNUkML9XfdsPgDtVRX2kkvvBBKkC2dScPiD5w+h1Td0g9cOz9dw+d1c9Ww4oNPD0VZYNvD5Ax8Nwiu/SmU7pNYogF9wUAUwN9DLA5gJeDuBRCPyVUI/4O8Dj/W9XP9UA5B62GbJkgG/+Yg0gPUjHlasOJDVQ7gP3DdQ2T3l9L/aray6egkKPqjaIz/16D//T2XlD/lRbU298/XIP4jrIw0NR9TQ1yNZZ2oryMKBAKj5YRMIo8CO3Fng2D2Sj3gjf0yjfNdSKTDxo761midAWTYo1eJVSPycx7ZcPT9flYyOmDj7Y727D0w+qCKBZAeOwZdX/UUNpjNI1iOZjp3Y6Nt9zoyYOujjw+6Pr9no9YPejSZfYN79yQdyKpcAQRVJBj/QyCMSjRZVKPcDsoyX3yjgtQiMFjg6cqOBqWoH2MxkGo+WMT9No1IPYjPVXqPJDTI6H2sjz7aEMNIr/fONpBcQXa2UjmoxWPajto8z30jtY0APVDBowQOudRAxH0vDAuVYNC9cEOeLfDeDAsFOer4sj5n1LNcGMg9oI94MRjXA34PRjqRrr1wj+Y8SPQp8qQyaljpw0sNajq2WgMZjAA7qN7l24zmMO9Ow1MMIT0AyqPcagE0MP+IqY6uMeVmE7SMbjQzUYO4jLo6AMEjL42TVr9rwxv1ejEBXBD8VnYx9rohnEpiEmtgI8EXMD5/eKNhjI4xBO+DUY/VEvVr9QqNV1RiFvgsEDsswgoTVExiNIGOo1mNMTDYyxN7jygweNESUbpdrCTmkxePUTKw9eOt9Do4H3ZjjY4QORlxAxyNcTbYzxPJV/E5qayhRDPKGuDwE4OMhjYE+GMaAkY0/XlVHxZOMet048SNPstdqI5gjl+ahPojIcXENElGAzhMWVeI4ZOPD+44iNmYHWT9XGwyY+oVaTaUxb0ZTdIzWMOT+kxsPL1LI02OuTjQzxUtDsvHYOJ9aPrXl1SPQ2JOijEk6GMq9zWaONQTz9QpPBDcYyj3i8nEsaB5DSU5RNWT2k+W22TBg/eP6jO441POTSg/BOEV002aHz0UQ+eMrjS00ZUrT9ozcOW1W4zlP4DCg01Ovj/Pe+OcjHk5QO013k7OEsyJYW0g/hafaJMA9/UwMPDjw0zJOjDEU8BbjTcE0RO7TpUhuBmhi4RSMzV5U+HVrjWE3aNrDdU4+O3TW07DXO9iQlIbpq4eAIBLN802WNnDl4zZPrj1Y9jW1TV08xM3TZg+H3sTb4yAUfjsfSADIRvo+9OwJFWMcHqRIo/jwSTodba2S4effObR1rTAbnYtMmIEOvVU40SO7TcEfbLVWxw3qUZNqU1sLp5VU53kl1uU1jP5TM4zQjh4tKeBEwVI/S1Wqzk1mCVM9flU5PPjG3ZNP+CYEXpImzS48CXmzuZpbPXjt44H02zfXWxPPDD08zNPTQvVZEcz8mP60lyKwcgXn1bEfL38J1rYNbwzNgA631i24JvQl2oMwENRTsI0/2JdyXWHNVy5kZHOodRRR7MUzHdQxPTF1nfN34dhXZx0dNpXfTOET5fQZ3kMhzBHPkTxM012lDtoyF3ndYXVx0Ldtc1F2adq3ZjO2z200RMtzcWOZjtzY3f52Hd3c2XOWdM3Up3VzfTTx2XdEHRm25jTc7FNTz3sKViceDsh3PFzc7ulMtdK81XOXdHXfl1bzy7QROEjObdt2U9zArPOljXc+1Waz8wL3Orz184PPXdXXSPN3dT477N2ze88/OamiHW/Of9H8x2XxD387l0IE/c1d2ddxXU52jzjc4/Med+8+qBdYDERZGnzYbefM9ziC7G02deHevOLddc3fPadRk/BM4LMRJJ05gBCzJ0lzc1V/MF5pCzW3kL4Xf/OoLy3ZfkCdIC7p2TzECz2jhQp2MfNzzQ7WwvELS8z/NXzS3Sgu3zt3dvMPz6Q83NiLg9XpDQLFE+OZnzlUxfNsdSCzwsDzNcwAtoLK3cAtjzoCxPOaLSXQhOz6+C0XOsLBixrNGLoXaYvKLm86ov3zaQ2AtEjDC8UF1dzCy4vjdsi4YskLrXXl1/z5i/wv1zGCzvNYLucwhPCThcyfOuLRC5EvyLXC3N2xLlC0PM3dQC2ov+Ldi+AsOLNXbt2hLGS+EtuLJRR4t9zXizfM+LxS34usTLk/dMkDj0+5NC9lkGtHsAP43kqoKrUQFO9DV1TVkflJnfdXYAf5fJOxj5S3nPQ6Tld9mY9KwisSb0ay1ARltJRhW1ztFQ7jWKLdc80tKLuBZssLIGyzkjrLtC3dOMzAc04UszW/bxDtRr0QMtvTREs5ErLoy31PjLquZMuY90y7MuVl0U/COBLWi2mC5Rr4J8tJTZy6o3ylrkUN4XDdE/MB7L9k2z2HLKnXwsqLzWTCvA9OK6nPXLWM82OcTrY70vPLoc0sv5QT0V8t/TPy2KV/LQwwCtFV0E4kzzLoKxUtDd/UVCsX5eKyOAXL8K8fyIrVY+wAorF054trz0aRvMnLRZTysK9cK56aDYmC37PsjLUzvWPL7OC9HkrZ2pyt3yIo7Ss5VUkzJXK9xVYCtgzrK0/PsrKPblFUr0K5ctbLcq1cvIzSK8KuSrqK5XNtd+SxKtULw8zYAyr+oHyvyrBK+PNsj5NSqsx9aq2zNeTnU45VD+UKyf1gQkjRNQhTrlYdrSA0tOMMV0Zq4qMo9U7GQp3y3K0vGrpcnUvNmVPsyIv2zrc1kDYKJncwTLZzK4A0WdJazrNBres8SO7Uuazgr5rY/XWvdNDa9bNNrti9jN99AtpWvkKqywWvdrYpb2vazdM0ksaLsU4RXA87a9Wvjr6Y06tz1ndbUPCL8XeWvvLI63munLK65WOz1jazOvqLAS+/WEVU5EutjrXa6utCr668YubDDw7rPGTBU1CEFaVazeu1rd68et9rp66UuDrKg0RIdaCWh2sHrt60eudVf65us2LZa/Ou+tV60Qpgb0q4etFrKMyeswbiq+etZri6BCugby6xBtoba6xhtPrho3mOQzvrYutIbBG9+uQb3ldBukbW60aPwb2a77TUbX64fgTrPTb+vTrmG7OvYbyk2HND+E1DRucbP61Bu8bjG7BvbrLG8cX0K+GxxsXC4m/RuSbDU8+vNrr6/rMshwm/usobhG7j3FrXs2iv9rD3Z0tuTJK6zO8K1A+L056PbnKFkx1K7L3Z8QPanMhjyvQVWq9zAJD0a9kI7zXvF8PRDM7rmImrODJlOjAPqRnvd/1dNdKxwuozWUxaV29/6+0tlLcs0N3dyjSfDJ9FLVfT0A1PvbFs3jNU4xN6jiW3xtnrK/cqsejrUx8PhKmq/rGlKjeObEiTWVaU3mtCcy2Hxzsc3X1FlNlGs7BK2POmuUImayks9tHXEcxXpog5kvbLjPVEuXz7q0ovHL1C74uBrA6y2tBLaIKNsNb+Su/MLzp0zkvRLJi+KvIrLq96voL1i1hspb5q4svUkPlH7rjbyszIt1Ly03tuzbMS/NuYrLSyV2JLZW4BvC1a26SSwMgcY1vbbES5iOz1Ci3NtHL721KutLy23BtsrV29+hNOY28TATbtS1kug7p7fttkLh286terRS59tnb/GxdvYLYKxPk5xm2ybDSLB3SDtHdz24+vcLOO+4DHb+O6dslLyWz9sbtFq8dgFeyO7qyo788zTtPbKM+DuvbkO3EtYrBO2zt0Loi1zs9oPOxTtWZhC1Nv1rDS7/Nvb4ux9us7bS9Lv2LCO4tBOxvO7vpnjAu49u7bwu7ksXd6uwUsWLAizjpS7eU5puedxIyUrOx86EDswLO29NuGbhW26ui7GKxrvQ7ku9rs3L/s10uBzPS6zPAqtW9VC5gMazqu/T2VXWKKNJyJilDDOvrniCAp4pFMBbOc1t2y7REt0S61wSaWNCL2SyjMirs/eiu2dUO4tvNZ7oAcCw7Mm/ZV67Wkt0RaKf8iXtLt0W4vmezPuwcsmbTe6nUt7aA+mrdEB/cJkdNmvfysPNci+hsMbam2Ru7zze8SNm68Wl0zTV/HVPsBr7C1bOqbSrZtMabO0762r7o6sQ3Ez/jb6t6gyu903wL5cxjPnbHO1psj7IwBkpZbabVvsOrs+8Rvz7+++psrbju4RWx7FaqWNtx/gbpTuLve1TPGbSWzruybRiEAch+NS3qWgHueqXNz7e+4gS7jDu0fso9CB7p4qE929DkoHajBAfe7G61JsP7+U8PsIHxIGEvIH1TGAdoH3+xgfMjf+3DtD7K+zjoziBB4nNEHDB6gc77kB/Tu/7i+6sXNTlW6qttTN8XxNRr2cXHs4KJ/cPg2tl1qrlKHbW6bOLZqeRLPDhr4n43q9FUmQXArOB36MuGM4u03AlbQUFZc8ERsJlw562TxvkHC+0xvkbQW4WNxGM4shvIHedaaNAadh7vuOHIh84dL7F6/GMb01qkr0LDLVZYciA1h56a/99hxJsBHmBwfv/7xhz2hhH5AioWf90R6rM9wcRwvm0T96yRtOH0m8xupbKPaWxSqH7CAfeHeR74eoDCRyptJHrB6Idzr5RyYdkJNR03U+HBdQ0f+Hwh8kdsHg+zhvpHMpIfyeHzuTkf/1Nh6sR+HQh/ftE7j+87sZHIfvytdHp7rEf1HoeoUcOHAxy0dBHySzjPiItUA74b7RB7UczHym/fk/7gx60cCbRx6ZGVrYR+sdfCmx70dC7zB80dYHL62kfiIqCCLr/KZx43lTHl4Jcd0b1xywffHh+xRsVH3km74rZBRSCdvHLdbTvoHXxykfsHIx3FiLk8J0CeX5SJz0conHx0Uc3H+x6UcuHcB6DlDmgJ6VPAnFx/kdEbJJ5CcYnwx4JvewqFjScvHE9YSdT1qJ58d7HUJ6kcwnkCyFs9FnJ9kf0nWx2bv8nCx99strPbUsbaaaxxKfdHdR+8clGOx4kcCnLJ2UchHL847LiaXJ+7LInvJ9seNHEJ+idDHup1id04Bp0glGnLYSafqzfR/McbTVpxSftH8GIqfqQ1RyqcbHPJ86dmn/R7KcAb8p2+3enH8UCVRHkp+qcdlmp00fan7p8Ec2nKlHadS8tq7wd0nqp2Cc0T5pyd2Wndx8TtsnqZ4uqjreiwSdqnRJxqd5nWswWcHHbR3qeamEZ2YcOnw4U6eUkcx2QeJnhZ0scIdopwKOeeh014fZnDJwZton3Z/Wf3HQ61P5D+Sxq2ecJ7ZwYd8nTJ3WfknyZ8WfSkNAnOd+nrxwGcdny57schn7O2GeU9OJ9EDbn5ZzGdVnXu+OdHnsB56fiIcJ+eeOWiJ1eemn0pyucTna54cfTnjx3ZuZ8F58TMVnOZ2Ocynbpz2cnnx2Au4AXL5xYdvngZx+eHn4F5OdFnDx5YRbnsF9GcjnUpzedgXrq/3swHIexVstjVW1llhJ0ex+rJEwB0BOoFVKDa0TLZLQas2A6/NzVpr0I5zDSzik7LONnASUBA3e4qKWO+8dAEwefnd59gfCnvF1H5BZUZ3qVCXsx/Uuun+E6GeO7f24Elg+k8YJfLZ8l4vPm7WOwzser384gA+AKplAAS7EhSBBjq35w2ck7+e2mBqXafsfEFFcl1cfBdFu8guRtRlyZdmX2FRZcFylBwAe+t9l594THRB1pciXSF0pfHnKl6TtWJG3uPsjxpY5LznWZe2usorVexQuerhS4AsM5ZIXOBIF/l78d2XcV4gkimIV9hXWhx/MtmA8sZ3lvBnyF1ZdTnQG0Vf548V7fI8zE+znUwOwPf4ggXpB7ef1XBVxJd4whkGVIlXWfG/sM5FVxc2H41V9ee1Xil6WusnaF7FctXiCYfwBpJncey5mobbNfvncC/ltGbvu6VvKXhV3+rFXEGlGS0ntDdtdVXvVwpddnYlz8cy7w+yNepiEGppSJXY/a5Z9XqVy6vpXvCwHu17OV4435Xix5BeSX6l5nzWLiJ2FeCHD1wNeLHRK90sWb4aysnWbDg9dxxJtSr1M0rl9XmWAzNgNMuvF44xMNGHQ197BOsPQaX56LOW93u6Tfe5dN7lJWxQdg3AV5T3ZkcYksmJXDfXTdnTaM8VuPXQa0jfh7KN1IcdQr07IfYpqZdXwvGKKVHMs1eq/lVTLTKw9UDbgxjntKTy16ClrgCibrxwpNNzzfxH9N5uNM3gt0KeuHs4/ZzIaBKdzdRbRt3zcz9d4/RXM3JRw/vC39y0HOszEsMFro3VUsPgipxxIodzc6h3HNw09Fxl0Ag2h5wl4iatzgCcXE05SfMy/jTYmvsIBzYesQllz9eiXCN3Kds3/fa0wjAyLMtKIn6d1VfhXWp0tXQHx11FenX9vNcbaukHpEfIHpdzNfl3CZ5XdHXLN7ne13NCOGyG4n6hIpp3xQ2Xdw3/V5Fduj4hyReSH1WwcVvL4K5mkT62aTjfZVGKPRe3FzOJ1vLl9rc1RizJNFHcK9cy2Te67xI/GmL3vmLpSdrmvZX7N9Dt4de3D+k1Nb/XZi9bvxLFhy3cZK6d43vmDk98SukXEBS2wdTNAxSuVpy9y1uQeYo1DxDTSc1BPylLOLHeEFWczLMxTD58A/s6Ml59tc8bdxdlgNEDR3e413QKM0wNRAHA36N0zZE2zN5D/M2StCTYg0RsQrZk2itND9s3JNGHKk0HNZDWE2JgJzUw/0toTRJBXNArVmB+NjjQplBNMLc818NHjYI3eNArXY0/Nc4IS0uNSLRY0CFmLWC2yPkLaY3XNsLZ2bwtcrbo/KPwLcK1mNhj5o0Iq1jfis4tePOI34twrYo+yPJLRw2eNe0DI9WPQj7c3CtojzPvwtITdNeMNwjwK2stq/BQ1cPnLVqTctSTby0pNdLXQ9rNwrQs04N+TeK0MPiT1y2VNTOdhX6PM5Aq053J1+TeuhwyzIid7l4Fg99NOD5A2EP4zbKCTNyTyK2pP4Tys3pN5TdQ9pPdxQQ3RP2jUE/stjrtw+tPvjww21cETdo3uP1LdFL0NtjY4/Ctzj0I3bgPjdY/2NuSPo/2PRjUwDotMuhY+8rtjZo/GP5D/o9mNUzQIXkPqzyo9wtaLSc/mPWLZY/YVcj7Y9bXzjRM8vNUj+S2zPwz2w0iPtLcM/nNm9IM/MtLFV0+cPcTdQ1GNPLVC2sPajY0/0PdT5s05NLTw08UPArcU3aPWT5Q/lN1TbU2EXhKz/fI3f95QOz3kt6t78jgwgXoKHCexn3/TQ40xccDwM5CMZzrBkNta3+DtZIMRKCpZPHTFU52fobdk6Kt1jwA2beYnG56CmVnj0Sy8IDiMx5T23xa3ZOOTA+9/dmboa+8NkXz5JGtAP56Kl3kUN6afWObYDxuAQPSa3fVRjsD7S+kGGt9xcpndEE4vqvkHuYfddmD6PepX5T/IWVPxDxM0INKT9C+CtcTxK15NrTyC/lN/LUY3/PwrZQ1hPQBLQ1fPjLQI/BNbzxw1eP4LyKiPPUz9I8fNtjXi2LPBLYsT/NKz9s8YtoLao1bPaz7o8HPujbK1aP+b+c/7PxjeW9qPebys+pvUPb80ZvsjTw0JvbzS4/JvUb8I93N4z8E3hv/DwE8BvhzQC+9PcL76/K6/r+FWrN5s7C+hvML969wv8zUi9kPCL6i/aN0rfK3ov1d/ec8XyKBa/LOa7D/Wf9nTaU/RpDr/ss7lBD2M3Ov1T6Q/K6KL7e+rv6zXO+hvtD5O+PvjD1y2INo7x09WPgbxy1AvMLf0+XN/bwB/RvATd2/iPkz628zP3cbI91vPmwo+NvSj2c9GP6z5c+bPVj8c8ofBjwc+otCLdh+VvRj8W8Yf2b6h/qPGH3B8jgSz4h8OPCb081JvFLW4+gfNLeB8+Pvb/49DPP74O9BvoT/+8RPOzfE/jv8LbE8zIXr++/zvzT0++C6rr80k3vMrTk/j3RFyGsSHYa2LctsMhyq9iGjT37rhQvZif0X1urwTeR1MD/JVwP7FxmtH3id1qti1fujqV6LR7+CdlPAzbg9nvjr5e8kPOHzJ8FND78rrTvUny+9NPPn5J/wkfHyw9ENdLb+89PIb35/Hsvbz8/aPIz+88sfxLS29ktbbwx/iPFH8OCONyz+I/bPpHzW+5fyLbh+ONJj0W+4fmH2Y+lfBH5V/Vvks/C03Pab3Y/UfGH5M90fzzzB+Mfnb548fPbj2x9xfgT1x8hPgL6c3MPUT2C8CtwnxJ9ifM77U8JP7r2u+efeH9k8bvXd3k8W390Us4U6YwMU+2vjJ4m2nvi4E6/ufs375/BfEL569uvYraO98tjCHG+BvQ38O8zfgH0G+Rv5V0x9jPYj6420fUH64/XPmX/qBUf9z1m8FvyjWh8H3wPyo9EfmTxw0VvJX0c95fhb9V8gtGz+D9/fNj4193Pmb9c+QfqX9B/Dgczwl9dvn3zF8Mtfbxx8kNXH3+9XfkT6C9hfq76++Bf031J+zvTP2d/wvVj4i/Lv8T3e9yfK367eI3WLyLc4vQLG0Nz343uVLLOzjIGOkv+qx4P5lUD7KBE3ClROvx3gW5Z8GBjsp8ZTVV125Xe9N+/ltcvDIw/d8vS17+fi/yxjjYyqeJ7r+5b+v8bcK1NMzbUYvQt4L8e3Ee+GtRZvt4tik0YWa/OgPViGMBr3V9WraUvfQBNQEF1PEa8cXiD1xfIP27xL1hZZGFmBXXZGOqSX7CK3a/Z3+FzuWLX1pwK8IIPvxZkj0t4fmsuM9q1svHvK+aSeCnpm7cth7bvySuTA7+EEAR6QQAVlPAdgGpDQFKAMEAb5jQIygEAVQCqauAToG4DgNfWdwAj/h2cCAIEJMmQCdlegJVl6Aqa5gACwmAMZAJV3fxA1HFqAOJDwNV4LIIkicEKrHYM8AGkklwbOQqbMpSQFG7ER2PBVEYmkIBADAZj6bSDwN9/JuhzsmlV+O0gqcd/+G+LxXQU//03QMkX/++9EswOTzlANDVzwedCBkR/xP+4wDP+lKj4AF/1BAXwGv+EAFv+GtkUAD/yf+L/yFyqDX/+tIBHwNDXv49DEuw//1GwJsFIBO/SiAosBoakAJzsr4GJEToGP+kKz4ASAIGAqAKv+z5Bv+APDv+RsFwBchHwBYIEIB9/FDoZjXv48Ij3gkAMYBWgBL0rAIQBHAPP+l/3QBvAMwB/AOwBQgOf+D6QIBfQG/+OoiTS6RUPSbAFcEDAJoaO5TIwwMjYBp/xUBaALcAGAKwB9/2Cij/2EBugNEB+gPv4t2GMgsgIsBWgDIAGQi0ANgMQBdgJ4BfANlwAgJwBLgLwB7gLf+//zYQlKl8BqDSYBBdEtASgM4BKANUBDgPUB/iEUAd/1UA2gJEBcQMgKtIAJw6RW5KtIGqaqDTkBUTGEYWgDSB7AIyB3ALUB4QLyBABEKBsQLEBloE3Q0BE0qdDFpA9AOqBNDSYBigFSB6QNCBLQI0BI+HyBcgA6BIGQ8B7/xTstIBEakBTYQP2CSBfQBzsv1CdADQNsByAOaB2QNaBMwLmBr/y6B92iNQfQPhErUHMBqDR3KsuH8suwJCB+wKyBjgP40xwOiBbgPmBxQMtAt2GiAGwP6AWgEfoOwPGBzwPsBrwOmB7QI+BOgK+BXQP3oJIBuB1UEBBSgGEoVoBBBXAJeBOQLeBkIPgArgOhBpwM8Bfll/+/wJ3KOwidA7UDRBmQLBBmII1A7wJxBMQJhBngOJSpgNNACIIBB73SfcL7nLAdgHfcToBWAFIIOBrwJpB2INxBRQLEBIvVTWxIK0AMijJBXUH5BGIL4BQoINwJwL0B7/ys22ACzAkoM3ai3BlBfIMaBEwMOBGgMVBBQKhBooM8BH3SiAVQKnAfgIsggCmAUoCjkA4Ch2BtoLkA4OGKBD8mIB8IKGBtwK0AMsjfIH5C0AJ8COgS/ysQ+9Hf+4uSiAmoJAAMslkAr4AVkocDtAQYL3gdILkIsAHcB3kTdBbCGlQrIJ3Kx0FJU5KkpU1KhkAtKnpUjKiOgErDaAz5CsQOOHgAygDQAygAqiz5Hj0QUTdB9DH1k2YK0AqJl1YmJmxMQQM8AXADQIPgCfcJcD5B/8QaAKADggfYIHB8ADggvEzOgViCOgZABgglWWfIxAHgAhgDv+tAGVBVwChAxQM9+2AF8E7YO2KVkBSSaSQySJsDIA2STJBcoKpBCoPoAtIJFBnQM8BaNxmW1wK9BiIPe6BrCNYZABNY8YMTBm6Hf+HtX+wkYKZSLKTOyToCZS4sGfI4sCOgzKRJUalG+BwaVpAAGEPB9/DriPfzQAjcRXmtcQB0OeUuA04PQhmEKHBMEHgAFgH8iY/zwAxYF+A+eXf+Ue1MB9UhQh2EINMRphNMWgB3w0EOZSGJifc9AFpUz5AxMViHHgqsWNMnLkR0SgCiBOIJvAKpiCAM3Rohm6Hohb4LZBqEMIizEOT0K4KIAGJjAASQEZcgkKoAzKQbYFUTOgjLieAipmkhmlV1a0gBZB8kJ3KjEKIiJEXYAqkPUhmkPZcsrh0hIkJ7g+kMMhXwGjaNENDoHMgYhUsRlicsQViSsQhwuoP8s9kI0hj6Q5cxpjkAukNVs7kJCAnkJMh2WUzBZkBQhK5G/iv8RCiACSASWgHShf8WyhViD/ifkTQAtWSz6lmE7KGBWKB5F1MB3EHMB5+RqABAEcAzgAaYeuQz4nXG0MY9FFQEiFMBMyDUAkwA6A1TwP+hvHgBeoNBBYQKmBegEiBW4OKB9kl/+ciG/++9D/+Ywm8BQALGEIAN6BYwnABnoKtBqDRgBOwhGhewPRBN4ImhU0JNBj4Pf+cvGIBq0N4mv/zUanw1/+LjTGE9DDXQrIKYBTYkUBo0KOh40KcBggLOhDIIuhEgL0aUgN/+r4J2hmwPkBy0GsB14O+hmgOcByYLxBKoIMBv/wuB9/HOBgwLBhCkKsBB0KeBX0MmBP0LEhD4P+h3/28BqUMsh/gMCBNcWhheMNhhv0PhhpoIuhkxkSBr0P8BYwM+hlIJhhEIKVBf0PxBiwLYQZQL6BOoktBUAOSB/gLqBFkCphBoNyB94PpBPML6BPQNIB/QOxA/wJGBrMMOh7MOphnMONBdMPOhfQNDoKwNEylQOrAzMPyoy0FVhOMPVhksKxBXMO1hRMKtA5wIVhVwMjB9wOBBbMIFBmIM1hswO5hiMKtAvwLkhGMMsBWoDNhygLGhGsLaB1sMJhssKtAcIMjBQlBdhasLdhRwOFBMsO9hhIJeKkYNJBUoIlhgoLvBScM+BkcKZBMywsh/sK0AfIOfcr7m5BH7nZBrsPlBhoJzh4cOThCwM0q4oL9iKEOlBUoNlB1cOOhs7GlhecO9haoI1BKEM6QjKhkUWcOpBdcK1hEcL7hIAKFhkAJ3KloGdBICjFwDoPXI88KAULoLdBm6EAgkYN9BWYH9Bv4ODBoYM0q4YOkA28JfIMYPlk4EITBS/3hhqYPmB6YLEB7Mz1yRsLJh7AFzBZKgpUVKhpUdKgZUToDLBFYKrBnLlrB9YOCijYLxAzYIfhrYOfhxcPYAnYPRMWJlYBk4KkhQ4JHB2UInB/YKQRM4MoAc4IXBS4PoAqkLXBSgA3BW4PvhngL3BB4Jfh42WPBqSWQBZ4KySw8NHht4J7hCMMbhlCLYQMuEjBKwE/BI+G/Bl8L/BxQMAhWSGAh4OGZSrKXAhwiMgh7EOfIcENWgCEM5wSEJnh1oMUhBpnriGEMU6jENwh7LhURhEPFgJcGIhpEPgA5EMohkACqhOom2gkYOshzEPXIbEJghvEK4hPEL4hAkNlcxsFih6gAf+EkNoIXkNMhskPMR0rmUhToHChjkO0hlAFihbkOCiBkIShxkKqhz0KLhwsPfBSiJshanACRkUOchwSNchlAHihRkM8R2WR8htUIoR1kOlissXliisWVioUP8RxAAchkULvBkqBCR6SLCRHkMiRYgJq2euVJh0CLZmGUPyhY4KdAeUKyhY4MKhIUWKhpUJOoygAqhGgCqht2HukdUNzaUpi0AzwEkh8AFb+QOiOKCwAKy2QDNM0jHgaLFT7gRIFGAWyK1YuyNuKQANrYltmOR8ViVyOyJJoeyIuROyIuBt5izALuGzgdyMWIS/AORyUm2RryL2RNyLoQRsCeRjyIeR3yIz4ZyM6e8gFigmbE4gS6GBRHDUuRbyN2ROyM6evyJBE9yIRR3T2+RfyMRRvyO0a0KKuR7yJ2RjLUxReKNb0wLyhRRKJxRUzxhR2KNeRczwRRPyJRRSKJh+wKPBRYKNBRd33pRTKIZRAzxyQ5yPxRsKKjeaKJpRjyIBRxFlRR1KLRRsrSpRQqIeR7KM5RxKIpR2jSxRZKN2RpLSlRSqJlRRjXlRcqIuRHDV5RWqJ+R2jT5ReqPuRHDTZRRqNBRuqO1R4qKceaqLxRcz3VR+KNJa5KMtRLCBqa0piWAKyN4E9qLlRMAPWRNTzFRPqLuRAqK+8lqKhRlKPhRIaKNgAKJsMgaOuRpqOFRMaNzwL70jRKqOwq+qNjRLyITRK0BqaSg2F6rqLk0XqL+eoaK1R/qOVRDqLhRyaNRR4aIDRNqI+RKb0rRnKNTRNaIkQnyPrR+yKvqhyPrwrKPbRZj2lR8qO0aaaI1RwrVLRYqOjR4qKpRcaOHUXaIuRmohYqA6MeRo6Lx4TaJJocz17RhtGMeLKPIwjKLXRcbxBRG6ONRZjy5R9qNlRe6ObRtDxjRw6PZEojSXRmqPdRVqJLRZqIRRhaKvRQaIzR0pgpA2aOV0O6NXRIBRdegqN9RfKKce26I7R8gHIe76PXRuVy+a86MziFP2nRRsG6ep6L5RcbwAxIGJ9kUz3/RKGMAxoqPzRPyPZRD6M5Rcz0QxW6JZRMbx/RaKPhBmaJpARxVWRJ4BPRvqM/R17yORJyOORdaMPRnyOwxFKMYxXaM+RGGKFR5aNbRbIl4xfGN4xkKNgxIqIHeUGLWwHDVExoSjwa46OhRuKOkxBKOwqh6LlRMP04xSKJvRVGLuR3T2Ax+GPIeqGLwxmqPUxfKNeet6P5Rl6KXRuGO0xFmIbwwrSLRNqOtR9GJOR+mKExOqNVRWmPaeOKVXRHmPIeS6JE+UTVEx80MCo4GJ8xc6MUxEGM2RrmLG+eGONRsqPsxDGKDeIWPkx+jUsx7aMZaMWMtsRmIMxLuH9RqWLSxAb08xFmNkxNmKJAk6N8xxmOgxMbySx/6IxRcmJJRYGJCxjqMzRloFfRO5FzR8elKxLuFnRhWMfRtb3AxhGJUxW8JoaeaNEx96LMxamKEx3GJYx6aKMagWLYxRaM+RFWI/RLaJ7R02OFaGWOcxSaLaxjgkQaeWKNRQ6KIxm2MCo4WJcaAWPixBWIfRxWLbRumK3R5WPCxB6LkxvWOnRd3z6xYaPuxxmJIx0pkrg5GKZAE2IXRNGP0Bg2Lax3T06xOGNGxRGPIaEaKbRLIMzRp8E+xGnAmxnqK/RAKkixoKJmx9qMbRJ2JbRcOJ7Rh2IORu2Iwxs6OqxqTXj0SOI3R5TUOxuqOJxEKLseEmLPRrWNWxs6Pix3KOwq82PXRjmL2xDyNuxnWNMx4GLmeCGO0xXOLqxwz34xQuOUyrOL6xIOPzR/qIZxhOI5RLGIJa1OKqxQONnRzOK3R4uP1R/qIJxcb2FxQuL8wgKJWel2IZRKOPlRkOOlML+VAAFGLnAq2IeRv2I2Rx2Lux1mO+xoWKGAGuP5x0mMdRhANxa3OJdxhWJ5xZmMNxHqPSxTmPVxiuOZRFOKLSW2I2xQGOdx8T0CxT6L1ar6IWIweOtx3qKexYmPtxI2JExAOL9x0KJiR/2Iyx3T2yxWtloaWuP4xpON5xWP30abOOeR8TzJxU2PixpLQLxxtimxDeJZAFDTrxWOLLxEWMrxW8JcxHeMq+KeP8xi5WyxhqN7xcuRYqgWMVRluJkBRjScxEqK9xV6IJ+xeL4xc+OLRGeLzxouOnRsePYABAHjxwWNdxSeNzxQmMBxDuODRfmNLx+uImR7uKeEp+IxxaaM+RUuMV6/UgPxoOMExXeKBRoeIfxraK7xZWJvxEONVxWqO6ek+OuBmaNMuMOItxieKcKCOObxLeIOxveOixDeKHygBI5xZ2Ndy9+NlayuKsxJWLzx1aLqxpjW2xTKMFxi+LZEuBPfxf+OFRRzSvxAOMgBY+Obx6+OMxaBPCxy+NsxAeL2xw2O5xb+OVxtBPUxpBNRRmmJHxkePAJBzT8xCuImxL2PUxj2OvxreLkx52PPxJOKDezeOYJGGP9R6BKbeG1AYJ1eNgJTePgJchIbxm+JAA7AFAJtuM5xEBOmRpOR3xUeMGykBJoJaeLYJmhILxWeKrRA2LoxQ+OsxiBOnxyhMYJ16J5Rq2NYJAuNyx7+M4Jp6O4JtKOFah2NHxTuIEJmBMPxwhLTRohNPR4hMzxcWKkJ7BK0xKWJ0JXhMDxZ+LwJR2NUJHeMyJxOLgJdhO0JBeN0JQCQMJmIBEJxhL+xrDQ2xPhNdxyRN5xARN9RQRI0xw+JkJYRJlxMROMe/eOiJTaNiJvqPiJa+MSJnWOkJWRMpxFDXkJ6RJYJeRIqx6GIex0xJ3RSBMDR9eImJPlysJkhOGJ7eJkJfRJDRm6OxxXRKEJthOcJn7z4JixMrRE+JnxU+MyeXeMlRx+IUJyaNqJ3uN0JewDNxAlncJlRJtxBlguJShJrxf309x6hJkJVBMiJz+J/xTGOaJ3+M/eGuPqJl2MaJIaLuJ2qIeJ8+OwJe+OsJAuKdRWgE0qZRKgJ++NuRcxIEKoxM4gUJLyxxBOVxhJL0xIPRHxsxNexIYwpJaJJPIO+PHx2JIoJgxPjRNhMgxCRMIaZOMcJTJMPx2xLgxpJPyxQxLOxBBMIJWWJWJojTaJSGI5JGhKuJfWPZRyhNqhmaP/YZRPxJsUEZJWJJcJXxPoJuRJRJdRMmJihI8JXWJIaKpJhJhmNXxPJJCJJxMJRERO5JoOJ6Jh6N5JxGLBJqePWJQpL8JHBKKJ2WLhJMaO+J0pMSxahKlJAJMOJqWNSJxRNpJwOXpJVhIsJtGPcxoeOJJWmK9JXGLjJvOITJVKPLRoRIxRfBOpJbRN0JB4FAJFwiexO5RaxNpNDRVmKeaEpL0aW5DLJ+JKFhY+LrxBpOBxteKkJ4mIjxuhKEgypPfxhZIRx9+IJaIpI/81BK0JUjV7JoMJqeEeL3g9ZMTR4pOrJ9hKjRqqOWxLJNRJmaLggTWMbARZIkx+j1CJXmLnJ36LFxjZOGJ45K2RuGOuJ+5IXRKZJMxGpNfxbpJSJIRMhJZpOBJSjRVJdpK7RFqNZJUmOtJ4+KdJyKJbJl5IaJK2ODxp5P+ROOOnxR5JBJ7GNOJtqOnJDaKWx6ON1x62MtxL+LFxYZMQgZRMAJjJL4JkjXBxoJKApspIgpk2J8udZMWxQZJix8FI3xPeK2J/aI7JUFLtx4xLSJTOK3JiOOZxXmL2JghMoJhFPsxrRPxJYFKJR5xIvJMpNxJ85N1J1z3LJx5MdxAPF7JJpOExRpP8JFpIlJH5OUxBxIUxUeKrJoeP4JFROopxRNvJ+aORRFFO/J0JJWxmpOCaQ5MApglKnJIFNmxuhL4gZhPAJUZKqJxZP1RMGOUJWpPPx12I7xgJIuxWROEpJ+PZJKzXTxbJOZJGFNAppFPcpplNRxuhIGhSIHNxROPQJjJI7Js6JipslM8eDlK5JX+OdJ3lJfJQJM0pOFLmxTFP8pZlLDJkpnCpayIRxMVOcp5+M2JQVKKa1xMopRhNqxAlKnRG2NnRKeJ8ouOOTRs6OSpA+O8x7FNDxZVOJx4lLWxtZKopqVN8JvlLGxHlKdJ42NvxjlLwJmVIKJqWPQpj+JgJZFMQarhNop0FMiprmKqpD6PKaMeMCpPVI9JqWJmpMWP0e75LcJ/pK54DlI0pauJKpeBN0JV0GVJEeMZJ8pNGpF1P/xT1OGpd5JypIVLDJ0sDKJHVPeJI5JQpwVKNxB1KIpgNP9xXJMapCJJXxb3xqJ01LDJuKHbJUVL+p0NQBpZyMxxeuJMp/FMeJs5OgpH1KBpYZKhgyFK+JjJI3J01KMaa5NGpXJPJpoNOzxGZIlJFNMzROCEJpXeOJpilO3JJFPKuhlJ1JWNMyebxMxpiJNYp9GN6p7OJ2pFWM6pzOI2pgaLkpLFJWpA1NEpIpO6potOQx1ZOBpbFNJRaVJyJTlM8elVL1J9xKupSOP5JbKNOxSxPipalM9JVpNUphhIfRj5KLR4mO0pb1IypelJ4pfz2NJBFOhp3hNJpeFKbJ1NKrR2NKopkHTDJdyCZpfWOJpmZO9pM5Jlp1VNxp/uPRpylJDJZtJ5pp1MHx+1IFpDmMFJxtJFpO6L1pSWIlplaOfJQ1M2RdFLapCtMzp0lI4pKdNixx6P0pCdO1JfNKhpztKkptdKYJ5tM6JldKdpJLDpppdK6pYZOEYeZJjJ82MZJbVNepT+IdpqNImpJ1Jrpx7CHJ2jUUpUdJppRjVZpFaIXJ0pkngvdL4QRZOSpkNKbp9tMupYdMgplNPqpQ9OqJq2KNpZxNcpEmLjRs9J9p29ILRedLqJYZJsQvdK/xnZOjJT9NnRaFIsBtT3fpYZL9QQdOnRD1Oypi9ICp19LIJHtNfJFtI1p11OepIDLTpp9IMpYlL2pMWMmpSOLjpydNWJA5LHRGxIzpHaKzpUWN9p1VI9x+dMtpktP2J0tLCxveLFpwGJVpgtPPJO5OrpmtMbpnhI5p8DIYZhpOHpdlKFplxLAZLdPbpHFLDJjKB3xv1OspHxJJp/xKyJ/5Myxh9OBgXtIDJYjLDJY6F/pxmLVJaxIWpYjPLpltgppl+LQpByMtx52O7JVOJqJzVLNRcuIMZYZIfQCjPUxLNOtJy1LYZL1NdpReOYZl9PDpfpJrpjjMgpajKzoRlLIZi1OvMbdPzwq1Oao6BJzp+KK2p8WOLp2DJgZtqNpp+JMkZv1JYZwOLDJoWHMZp6MZJENJPpkTJ0pRJIQZ9mJNpKjPyJzdN6J/aK/JClOtJKpOkJ/eOIpdBIyZZJJgptDWpxoDLOp/pNcZuFP7JhRJqZuTMVpS1KrpBdP8ZpTKCZRKObJluLCZKGPmJHaKoZqdNNpqDOcZ9DIwZrpLdpGRIiZXFINpTKJwZ7aJyZ2fFlJ1tPtRf6OVp+TPtJJDKwJUDJ4JFDIQxSzNkJrdNoZtTJhpXNP5pdDKmp1zLrpThODJNDPZpXjPKpPDK6peDM2p+zKiJnzOIZSlIYpQzIWxFVI2Z7jNORDTJcp49OmZUjI2JYZMywSTOoxSNLFYDdMGptVIIZyJLiZE5PBZULNHJNOOhZyBM7p4tKwZwzJXRJBN+ZudLVphDL8ZstN6ZRLKBZPjIuZjzJBpbTIgZyDN3pzTKPp8zNHpv+KqZApOZZg9MdpDLI6JBTK2xdtK4ZwrJmZ6dOAZRzK1pILMkp7pJqp3NMuZ7tKVpylKQZSWO2ZqrNBZp2AVZNzNeZu1OBZD2L6ZUqLSZizLDJdWHhZIaJDpHdK5ZmFNgpM+PqZXyKuZGLIPJuhNdBvdNCJVrOiZbLI4xdTPuZW9KmZdzMIa21IjpXzOdZJ5NuB4rSaZxuK0AieARprmNQpQlJlZhrJjpDFI0Z+gLZpijO9ZtjUTZBrNexRrPeRsNMzRO+AEZy2KEZNTy+JH+LRpvFKpJdjynp3WJwJ15L/JOtPhJHDNxZ/LLDZIlJEZHbPqx0phXIy5ODx8OJfpKePGp3LKlZd6KlpBzLlZwGIXoxxJkpcDMIJOuIzZXBJTZwGMkZdFODx4bKZxTFKXZgRLJZwTIJZlDLJpB9O+ZtpKPZdOMLZ0pmfI/bIHpw7MkZG9IdZc5KjZgLJZxdjKIZ5LM6ZvjPPpttMCZZ7KcxSuJ+J3TNlpx1K3Z5DISpN2N3JobJxJebMOZ47KTZebLDJ1AB3xx+JvZEhPeZhLKnZP5POZLzPSp7DL9ZjDLFZezKw5lTLHZLRIPZJzJg5pHO7ZuhKKod1LgpiLNsptjKo5FHPBJT7PBpnNP+ZwGPIeDJLw5j6K5J3HJkZeTJI54JMnpvZN0JErH7ZcOMZJUeJRZirNpxf7J/ytLJfZRHOXZtzNZZzFMnZ56J6xJLJJJzbJjRdKJIJXJNDpTHKYZC7OgJnxN8Z97MbZE2M2ZZKOMZ3hJs5WKJGZKGLGpkKKbZJnMXxOuOAWk5NjJWbIg5fzKfZinKuxr7Ox457N/J1nLJpyLLcpgnKnRkXIhphjJTRVnLTRz7KC5ynN3ZntPwZgDNk59FNXZPHPiZmaNVMBVMoxVlPXp5TNEZ0XJw5jHJk5iJKSppXJdJkrPrp8rMZZ2TN05iZLK5MxKwpfFPaZCxL85ZxJQZiDK1ZZnLipA3Ppp0pgyEyFOK5lhPQZUXPa5aDNaZVXOLRNXNQ503O65QnJSpQrMPRpzLGJO7KaJLXNTJkjIrZa7PwpqXJ25s3KOJaHMoZYZMcAllIqJZbJsZ0DIE5M3Lu50rKRZJJMW5XlKTp/XPc5i+Kc5q6MpJYhJ+566M4pUqOWJNFJaZZ3LxZ9XK654TNzZYhOS5bmKLpw3LI5umKB57yO4pgrIO5uXMxZctMIJd7Nq523NhJYZMWRhXLAJN3KLJ6pOM5YPKeZRTXOp6XPxZEzM+5FeOwpbXJW59jJFJAPJVxzHLW5UBNcp5PPx5ppNU56rMx5LrPnZOPKF5m7Ke5wROO5sJN2ZT5MS5TaIc5MmO058ZM553Tzi5IvO+5KrIBZkLMDZaCR2Zp3Kp5aLMeJYZNnALxJPApTLVJR3L55ElMZ5nXMy5urJE5bPLF5IlPbZVvL6p4RPAZqBJl5NtLA5ELNW5+eLFJDvNF5D3JZ5UHP+5zPNGZPXPApWTPoxYzIrpWLMgZ+vKZZhvPt563Nl5UjXlxYZIxMEnNvxKHLaxm9Pw5FXOFRI7NBJb3Iyx/qKG5drL2xsVMSpl+K/ZTvLmedfJtZoFLDJ2Jlo59rPo5XbKh5znMR5wfIj5CmKM583P9ZTXOoZVHLDJ8ABLZ6ONu5EZVuJe7P6Z94luJYZNgKEVJC57fKn5fdJy5FPOH54zK75v3K5JnfOW5ffMp5SfLt5C3MzR0jFN5l4GApa/NSZ9fM25YeNd5wtL95hqJvJT/KzZYZO3+xPKjc8DLX5LvJP5Q/IY593J35gPNL55pLq5sDIw5ulPp5zXLmZUxPD53fOrZYfN758Av6pe5Oj5JyNj56jJ95pVJ75g/OvRfHOUZLLOzpgXLcx3PN/ZbOPZ55ePpZf9LgFv3IjZA7L650AsEWOjJWZlWLoFzAtv5YZIvAF/ITxpPIRxv/I3ZzvNq5rHMvxvPL/5BfI+5qtOp54HNp5SxIYFMfI65NbKQFtApgF+pJoFgPJ5ZhtLQFxyLWZ75LDJbwG4FVLKMJa/P358pPEZPlDTZNT345QAo55Kgt1pt/I0FyzO8gL/Il5pHML5PBKiZPnJe58ZLDJaUR+ppbKLJN/Kb5ZlN25Z5PDxgzL35A/PKJSXJCFAFMKZgzMj5XFNc51nJAFd5IlZ4AqVZnLLk5bOL+5cRJNZwPN0JvQAMFVNOMFC9JxZd/JuJPlM05DbM35hAuNRrbJR5CqOf5bnJQFdPLcFqmO15anMD5i+KRJ3uLs5geOFJQfI5ZLBLWZ79K95WzLg5sPLGF8qJYFLKJ0FAfOx5GvKUF6gt+J1QusFlAtqFyWK0FaWLDJdwCQ5vuPo5v/NMFKvJQJlpOKZFRLaFGmNXeANK8FyZKMaAgpZANwsuxrlPbZAXLOFLdK85FwuE5kxAs5LtL5ZQgrEFV9JcFXwsQJTqJMAJgCAAAA="))
///////////////////////////////////////////////

///////////////////////////////////////////////
/* Utility functions */

var storagePrefix = 'KiCad_HTML_BOM__' + pcbdata.metadata.title + '__' +
  pcbdata.metadata.revision + '__#';
var storage;

function initStorage(key) {
  try {
    window.localStorage.getItem("blank");
    storage = window.localStorage;
  } catch (e) {
    // localStorage not available
  }
  if (!storage) {
    try {
      window.sessionStorage.getItem("blank");
      storage = window.sessionStorage;
    } catch (e) {
      // sessionStorage also not available
    }
  }
}

function readStorage(key) {
  if (storage) {
    return storage.getItem(storagePrefix + key);
  } else {
    return null;
  }
}

function writeStorage(key, value) {
  if (storage) {
    storage.setItem(storagePrefix + key, value);
  }
}

function fancyDblClickHandler(el, onsingle, ondouble) {
  return function() {
    if (el.getAttribute("data-dblclick") == null) {
      el.setAttribute("data-dblclick", 1);
      setTimeout(function() {
        if (el.getAttribute("data-dblclick") == 1) {
          onsingle();
        }
        el.removeAttribute("data-dblclick");
      }, 200);
    } else {
      el.removeAttribute("data-dblclick");
      ondouble();
    }
  }
}

function smoothScrollToRow(rowid) {
  document.getElementById(rowid).scrollIntoView({
    behavior: "smooth",
    block: "center",
    inline: "nearest"
  });
}

function focusInputField(input) {
  input.scrollIntoView(false);
  input.focus();
  input.select();
}

function copyToClipboard() {
  var text = '';
  for (var node of bomhead.childNodes[0].childNodes) {
    if (node.firstChild) {
      text = text + node.firstChild.nodeValue;
    }
    if (node != bomhead.childNodes[0].lastChild) {
      text += '\t';
    }
  }
  text += '\n';
  for (var row of bombody.childNodes) {
    for (var cell of row.childNodes) {
      for (var node of cell.childNodes) {
        if (node.nodeName == "INPUT") {
          if (node.checked) {
            text = text + '✓';
          }
        } else if (node.nodeName == "MARK") {
          text = text + node.firstChild.nodeValue;
        } else {
          text = text + node.nodeValue;
        }
      }
      if (cell != row.lastChild) {
        text += '\t';
      }
    }
    text += '\n';
  }
  var textArea = document.createElement("textarea");
  textArea.classList.add('clipboard-temp');
  textArea.value = text;

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    if (document.execCommand('copy')) {
      console.log('Bom copied to clipboard.');
    }
  } catch (err) {
    console.log('Can not copy to clipboard.');
  }

  document.body.removeChild(textArea);
}

function removeGutterNode(node) {
  for (var i = 0; i < node.childNodes.length; i++) {
    if (node.childNodes[i].classList &&
      node.childNodes[i].classList.contains("gutter")) {
      node.removeChild(node.childNodes[i]);
      break;
    }
  }
}

function cleanGutters() {
  removeGutterNode(document.getElementById("bot"));
  removeGutterNode(document.getElementById("canvasdiv"));
}

var units = {
  prefixes: {
    giga: ["G", "g", "giga", "Giga", "GIGA"],
    mega: ["M", "mega", "Mega", "MEGA"],
    kilo: ["K", "k", "kilo", "Kilo", "KILO"],
    milli: ["m", "milli", "Milli", "MILLI"],
    micro: ["U", "u", "micro", "Micro", "MICRO", "μ", "µ"], // different utf8 μ
    nano: ["N", "n", "nano", "Nano", "NANO"],
    pico: ["P", "p", "pico", "Pico", "PICO"],
  },
  unitsShort: ["R", "r", "Ω", "F", "f", "H", "h"],
  unitsLong: [
    "OHM", "Ohm", "ohm", "ohms",
    "FARAD", "Farad", "farad",
    "HENRY", "Henry", "henry"
  ],
  getMultiplier: function(s) {
    if (this.prefixes.giga.includes(s)) return 1e9;
    if (this.prefixes.mega.includes(s)) return 1e6;
    if (this.prefixes.kilo.includes(s)) return 1e3;
    if (this.prefixes.milli.includes(s)) return 1e-3;
    if (this.prefixes.micro.includes(s)) return 1e-6;
    if (this.prefixes.nano.includes(s)) return 1e-9;
    if (this.prefixes.pico.includes(s)) return 1e-12;
    return 1;
  },
  valueRegex: null,
}

function initUtils() {
  var allPrefixes = units.prefixes.giga
                    .concat(units.prefixes.mega)
                    .concat(units.prefixes.kilo)
                    .concat(units.prefixes.milli)
                    .concat(units.prefixes.micro)
                    .concat(units.prefixes.nano)
                    .concat(units.prefixes.pico);
  var allUnits = units.unitsShort.concat(units.unitsLong);
  units.valueRegex = new RegExp("^([0-9\.]+)" +
                         "\\s*(" + allPrefixes.join("|") + ")?" +
                         "(" + allUnits.join("|") + ")?" +
                         "(\\b.*)?$", "");
  units.valueAltRegex = new RegExp("^([0-9]*)" +
                         "(" + units.unitsShort.join("|") + ")?" +
                         "([GgMmKkUuNnPp])?" +
                         "([0-9]*)" +
                         "(\\b.*)?$", "");
  for (var bom_type of ["both", "F", "B"]) {
    for (var row of pcbdata.bom[bom_type]) {
      row.push(parseValue(row[1], row[3][0][0]));
    }
  }
}

function parseValue(val, ref) {
  var inferUnit = (unit, ref) => {
    if (unit) {
      unit = unit.toLowerCase();
      if (unit == 'Ω' || unit == "ohm" || unit == "ohms") {
        unit = 'r';
      }
      unit = unit[0];
    } else {
      ref = /^([a-z]+)\d+$/i.exec(ref);
      if (ref) {
        ref = ref[1].toLowerCase();
        if (ref == "c") unit = 'f';
        else if (ref == "l") unit = 'h';
        else if (ref == "r" || ref == "rv") unit = 'r';
        else unit = null;
      }
    }
    return unit;
  };
  val = val.replace(/,/g, "");
  var match = units.valueRegex.exec(val);
  var unit;
  if (match) {
    val = parseFloat(match[1]);
    if (match[2]) {
      val = val * units.getMultiplier(match[2]);
    }
    unit = inferUnit(match[3], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[4],
    }
  }
  match = units.valueAltRegex.exec(val);
  if (match && (match[1] || match[4])) {
    val = parseFloat(match[1] + "." + match[4]);
    if (match[3]) {
      val = val * units.getMultiplier(match[3]);
    }
    unit = inferUnit(match[2], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[5],
    }
  }
  return null;
}

function valueCompare(a, b, stra, strb) {
  if (a === null && b === null) {
    // Failed to parse both values, compare them as strings.
    if (stra != strb) return stra > strb ? 1 : -1;
    else return 0;
  } else if (a === null) {
    return 1;
  } else if (b === null) {
    return -1;
  } else {
    if (a.unit != b.unit) return a.unit > b.unit ? 1 : -1;
    else if (a.val != b.val) return a.val > b.val ? 1 : -1;
    else if (a.extra != b.extra) return a.extra > b.extra ? 1 : -1;
    else return 0;
  }
}

function validateSaveImgDimension(element) {
  var valid = false;
  var intValue = 0;
  if (/^[1-9]\d*$/.test(element.value)) {
    intValue = parseInt(element.value);
    if (intValue <= 16000) {
      valid = true;
    }
  }
  if (valid) {
    element.classList.remove("invalid");
  } else {
    element.classList.add("invalid");
  }
  return intValue;
}

function saveImage(layer) {
  var width = validateSaveImgDimension(document.getElementById("render-save-width"));
  var height = validateSaveImgDimension(document.getElementById("render-save-height"));
  var bgcolor = null;
  if (!document.getElementById("render-save-transparent").checked) {
    var style = getComputedStyle(topmostdiv);
    bgcolor = style.getPropertyValue("background-color");
  }
  if (!width || !height) return;

  // Prepare image
  var canvas = document.createElement("canvas");
  var layerdict = {
    transform: {
      x: 0,
      y: 0,
      s: 1,
      panx: 0,
      pany: 0,
      zoom: 1,
    },
    bg: canvas,
    fab: canvas,
    silk: canvas,
    highlight: canvas,
    layer: layer,
  }
  // Do the rendering
  recalcLayerScale(layerdict, width, height);
  prepareLayer(layerdict);
  clearCanvas(canvas, bgcolor);
  drawBackground(layerdict, false);
  drawHighlightsOnLayer(layerdict, false);

  // Save image
  var imgdata = canvas.toDataURL("image/png");

  var filename = pcbdata.metadata.title;
  if (pcbdata.metadata.revision) {
    filename += `.${pcbdata.metadata.revision}`;
  }
  filename += `.${layer}.png`;
  saveFile(filename, dataURLtoBlob(imgdata));
}

function saveSettings() {
  var data = {
    type: "InteractiveHtmlBom settings",
    version: 1,
    pcbmetadata: pcbdata.metadata,
    settings: settings,
  }
  var blob = new Blob([JSON.stringify(data, null, 4)], {type: "application/json"});
  saveFile(`${pcbdata.metadata.title}.settings.json`, blob);
}

function loadSettings() {
  var input = document.createElement("input");
  input.type = "file";
  input.accept = ".settings.json";
  input.onchange = function(e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onload = readerEvent => {
      var content = readerEvent.target.result;
      var newSettings;
      try {
        newSettings = JSON.parse(content);
      } catch(e) {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      if (newSettings.type != "InteractiveHtmlBom settings") {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      var metadataMatches = newSettings.hasOwnProperty("pcbmetadata");
      if (metadataMatches) {
        for (var k in pcbdata.metadata) {
          if (!newSettings.pcbmetadata.hasOwnProperty(k) || newSettings.pcbmetadata[k] != pcbdata.metadata[k]) {
            metadataMatches = false;
          }
        }
      }
      if (!metadataMatches) {
        var currentMetadata = JSON.stringify(pcbdata.metadata, null, 4);
        var fileMetadata = JSON.stringify(newSettings.pcbmetadata, null, 4);
        if (!confirm(
          `Settins file metadata does not match current metadata.\n\n` +
          `Page metadata:\n${currentMetadata}\n\n` +
          `Settings file metadata:\n${fileMetadata}\n\n` +
          `Press OK if you would like to import settings anyway.`)) {
          return;
        }
      }
      overwriteSettings(newSettings.settings);
    }
    reader.readAsText(file, 'UTF-8');
  }
  input.click();
}

function overwriteSettings(newSettings) {
  initDone = false;
  Object.assign(settings, newSettings);
  writeStorage("bomlayout", settings.bomlayout);
  writeStorage("bommode", settings.bommode);
  writeStorage("canvaslayout", settings.canvaslayout);
  writeStorage("bomCheckboxes", settings.checkboxes.join(","));
  document.getElementById("bomCheckboxes").value = settings.checkboxes.join(",");
  for (var checkbox of settings.checkboxes) {
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
  }
  padsVisible(settings.renderPads);
  document.getElementById("padsCheckbox").checked = settings.renderPads;
  fabricationVisible(settings.renderFabrication);
  document.getElementById("fabricationCheckbox").checked = settings.renderFabrication;
  silkscreenVisible(settings.renderSilkscreen);
  document.getElementById("silkscreenCheckbox").checked = settings.renderSilkscreen;
  referencesVisible(settings.renderReferences);
  document.getElementById("referencesCheckbox").checked = settings.renderReferences;
  valuesVisible(settings.renderValues);
  document.getElementById("valuesCheckbox").checked = settings.renderValues;
  tracksVisible(settings.renderTracks);
  document.getElementById("tracksCheckbox").checked = settings.renderTracks;
  zonesVisible(settings.renderZones);
  document.getElementById("zonesCheckbox").checked = settings.renderZones;
  dnpOutline(settings.renderDnpOutline);
  document.getElementById("dnpOutlineCheckbox").checked = settings.renderDnpOutline;
  setRedrawOnDrag(settings.redrawOnDrag);
  document.getElementById("dragCheckbox").checked = settings.redrawOnDrag;
  setDarkMode(settings.darkMode);
  document.getElementById("darkmodeCheckbox").checked = settings.darkMode;
  setHighlightPin1(settings.highlightpin1);
  document.getElementById("highlightpin1Checkbox").checked = settings.highlightpin1;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  initDone = true;
  prepCheckboxes();
  changeBomLayout(settings.bomlayout);
}

function saveFile(filename, blob) {
  var link = document.createElement("a");
  var objurl = URL.createObjectURL(blob);
  link.download = filename;
  link.href = objurl;
  link.click();
}

function dataURLtoBlob(dataurl) {
  var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
  while(n--){
      u8arr[n] = bstr.charCodeAt(n);
  }
  return new Blob([u8arr], {type:mime});
}

var settings = {
  canvaslayout: "default",
  bomlayout: "default",
  bommode: "grouped",
  checkboxes: [],
  checkboxStoredRefs: {},
  darkMode: false,
  highlightpin1: false,
  redrawOnDrag: true,
  boardRotation: 0,
  renderPads: true,
  renderReferences: true,
  renderValues: true,
  renderSilkscreen: true,
  renderFabrication: true,
  renderDnpOutline: false,
  renderTracks: true,
  renderZones: true,
}

function initDefaults() {
  settings.bomlayout = readStorage("bomlayout");
  if (settings.bomlayout === null) {
    settings.bomlayout = config.bom_view;
  }
  if (!['bom-only', 'left-right', 'top-bottom'].includes(settings.bomlayout)) {
    settings.bomlayout = config.bom_view;
  }
  settings.bommode = readStorage("bommode");
  if (settings.bommode === null) {
    settings.bommode = "grouped";
  }
  if (!["grouped", "ungrouped", "netlist"].includes(settings.bommode)) {
    settings.bommode = "grouped";
  }
  settings.canvaslayout = readStorage("canvaslayout");
  if (settings.canvaslayout === null) {
    settings.canvaslayout = config.layer_view;
  }
  var bomCheckboxes = readStorage("bomCheckboxes");
  if (bomCheckboxes === null) {
    bomCheckboxes = config.checkboxes;
  }
  settings.checkboxes = bomCheckboxes.split(",").filter((e) => e);
  document.getElementById("bomCheckboxes").value = bomCheckboxes;

  function initBooleanSetting(storageString, def, elementId, func) {
    var b = readStorage(storageString);
    if (b === null) {
      b = def;
    } else {
      b = (b == "true");
    }
    document.getElementById(elementId).checked = b;
    func(b);
  }

  initBooleanSetting("padsVisible", config.show_pads, "padsCheckbox", padsVisible);
  initBooleanSetting("fabricationVisible", config.show_fabrication, "fabricationCheckbox", fabricationVisible);
  initBooleanSetting("silkscreenVisible", config.show_silkscreen, "silkscreenCheckbox", silkscreenVisible);
  initBooleanSetting("referencesVisible", true, "referencesCheckbox", referencesVisible);
  initBooleanSetting("valuesVisible", true, "valuesCheckbox", valuesVisible);
  if ("tracks" in pcbdata) {
    initBooleanSetting("tracksVisible", true, "tracksCheckbox", tracksVisible);
    initBooleanSetting("zonesVisible", true, "zonesCheckbox", zonesVisible);
  } else {
    document.getElementById("tracksAndZonesCheckboxes").style.display = "none";
    tracksVisible(false);
    zonesVisible(false);
  }
  initBooleanSetting("dnpOutline", false, "dnpOutlineCheckbox", dnpOutline);
  initBooleanSetting("redrawOnDrag", config.redraw_on_drag, "dragCheckbox", setRedrawOnDrag);
  initBooleanSetting("darkmode", config.dark_mode, "darkmodeCheckbox", setDarkMode);
  initBooleanSetting("highlightpin1", config.highlight_pin1, "highlightpin1Checkbox", setHighlightPin1);
  settings.boardRotation = readStorage("boardRotation");
  if (settings.boardRotation === null) {
    settings.boardRotation = config.board_rotation * 5;
  } else {
    settings.boardRotation = parseInt(settings.boardRotation);
  }
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
}

///////////////////////////////////////////////

///////////////////////////////////////////////
/* PCB rendering code */

var emptyContext2d = document.createElement("canvas").getContext("2d");

function deg2rad(deg) {
  return deg * Math.PI / 180;
}

function calcFontPoint(linepoint, text, offsetx, offsety, tilt) {
  var point = [
    linepoint[0] * text.width + offsetx,
    linepoint[1] * text.height + offsety
  ];
  // Adding half a line height here is technically a bug
  // but pcbnew currently does the same, text is slightly shifted.
  point[0] -= (point[1] + text.height * 0.5) * tilt;
  return point;
}

function drawtext(ctx, text, color, flip) {
  if ("ref" in text && !settings.renderReferences) return;
  if ("val" in text && !settings.renderValues) return;
  ctx.save();
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  ctx.lineWidth = text.thickness;
  if (text.svgpath) {
    ctx.stroke(new Path2D(text.svgpath));
    ctx.restore();
    return;
  }
  ctx.translate(...text.pos);
  var angle = -text.angle;
  if (text.attr.includes("mirrored")) {
    ctx.scale(-1, 1);
    angle = -angle;
  }
  var tilt = 0;
  if (text.attr.includes("italic")) {
    tilt = 0.125;
  }
  var interline = (text.height * 1.5 + text.thickness) / 2;
  var txt = text.text.split("\n");
  // KiCad ignores last empty line.
  if (txt[txt.length - 1] == '') txt.pop();
  ctx.rotate(deg2rad(angle));
  for (var i in txt) {
    var offsety = (-(txt.length - 1) + i * 2) * interline + text.height / 2;
    var lineWidth = 0;
    for (var c of txt[i]) {
      if (c == '\t') {
        var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
        lineWidth += fourSpaces - lineWidth % fourSpaces;
      } else {
        lineWidth += pcbdata.font_data[c].w * text.width;
      }
    }
    var offsetx = 0;
    switch (text.horiz_justify) {
      case -1:
        // Justify left, do nothing
        break;
      case 0:
        // Justify center
        offsetx -= lineWidth / 2;
        break;
      case 1:
        // Justify right
        offsetx -= lineWidth;
        break;
    }
    for (var c of txt[i]) {
      if (c == '\t') {
        var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
        offsetx += fourSpaces - offsetx % fourSpaces;
        continue;
      }
      for (var line of pcbdata.font_data[c].l) {
        ctx.beginPath();
        ctx.moveTo(...calcFontPoint(line[0], text, offsetx, offsety, tilt));
        for (var i = 1; i < line.length; i++) {
          ctx.lineTo(...calcFontPoint(line[i], text, offsetx, offsety, tilt));
        }
        ctx.stroke();
      }
      offsetx += pcbdata.font_data[c].w * text.width;
    }
  }
  ctx.restore();
}

function drawedge(ctx, scalefactor, edge, color) {
  ctx.strokeStyle = color;
  ctx.lineWidth = Math.max(1 / scalefactor, edge.width);
  ctx.lineCap = "round";
  if (edge.svgpath) {
    ctx.stroke(new Path2D(edge.svgpath));
  } else {
    ctx.beginPath();
    if (edge.type == "segment") {
      ctx.moveTo(...edge.start);
      ctx.lineTo(...edge.end);
    }
    if (edge.type == "arc") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        deg2rad(edge.startangle),
        deg2rad(edge.endangle));
    }
    if (edge.type == "circle") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        0, 2 * Math.PI);
      ctx.closePath();
    }
    if (edge.type == "curve") {
      ctx.moveTo(...edge.start);
      ctx.bezierCurveTo(...edge.cpa, ...edge.cpb, ...edge.end);
    }
    ctx.stroke();
  }
}

function getChamferedRectPath(size, radius, chamfpos, chamfratio) {
  // chamfpos is a bitmask, left = 1, right = 2, bottom left = 4, bottom right = 8
  var path = new Path2D();
  var width = size[0];
  var height = size[1];
  var x = width * -0.5;
  var y = height * -0.5;
  var chamfOffset = Math.min(width, height) * chamfratio;
  path.moveTo(x, 0);
  if (chamfpos & 4) {
    path.lineTo(x, y + height - chamfOffset);
    path.lineTo(x + chamfOffset, y + height);
    path.lineTo(0, y + height);
  } else {
    path.arcTo(x, y + height, x + width, y + height, radius);
  }
  if (chamfpos & 8) {
    path.lineTo(x + width - chamfOffset, y + height);
    path.lineTo(x + width, y + height - chamfOffset);
    path.lineTo(x + width, 0);
  } else {
    path.arcTo(x + width, y + height, x + width, y, radius);
  }
  if (chamfpos & 2) {
    path.lineTo(x + width, y + chamfOffset);
    path.lineTo(x + width - chamfOffset, y);
    path.lineTo(0, y);
  } else {
    path.arcTo(x + width, y, x, y, radius);
  }
  if (chamfpos & 1) {
    path.lineTo(x + chamfOffset, y);
    path.lineTo(x, y + chamfOffset);
    path.lineTo(x, 0);
  } else {
    path.arcTo(x, y, x, y + height, radius);
  }
  path.closePath();
  return path;
}

function getOblongPath(size) {
  return getChamferedRectPath(size, Math.min(size[0], size[1]) / 2, 0, 0);
}

function getPolygonsPath(shape) {
  if (shape.path2d) {
    return shape.path2d;
  }
  if (shape.svgpath) {
    shape.path2d = new Path2D(shape.svgpath);
  } else {
    var path = new Path2D();
    for (var polygon of shape.polygons) {
      path.moveTo(...polygon[0]);
      for (var i = 1; i < polygon.length; i++) {
        path.lineTo(...polygon[i]);
      }
      path.closePath();
    }
    shape.path2d = path;
  }
  return shape.path2d;
}

function drawPolygonShape(ctx, shape, color) {
  ctx.save();
  ctx.fillStyle = color;
  if (!shape.svgpath) {
    ctx.translate(...shape.pos);
    ctx.rotate(deg2rad(-shape.angle));
  }
  ctx.fill(getPolygonsPath(shape));
  ctx.restore();
}

function drawDrawing(ctx, layer, scalefactor, drawing, color) {
  if (["segment", "arc", "circle", "curve"].includes(drawing.type)) {
    drawedge(ctx, scalefactor, drawing, color);
  } else if (drawing.type == "polygon") {
    drawPolygonShape(ctx, drawing, color);
  } else {
    drawtext(ctx, drawing, color, layer == "B");
  }
}

function getCirclePath(radius) {
  var path = new Path2D();
  path.arc(0, 0, radius, 0, 2 * Math.PI);
  path.closePath();
  return path;
}

function getCachedPadPath(pad) {
  if (!pad.path2d) {
    // if path2d is not set, build one and cache it on pad object
    if (pad.shape == "rect") {
      pad.path2d = new Path2D();
      pad.path2d.rect(...pad.size.map(c => -c * 0.5), ...pad.size);
    } else if (pad.shape == "oval") {
      pad.path2d = getOblongPath(pad.size);
    } else if (pad.shape == "circle") {
      pad.path2d = getCirclePath(pad.size[0] / 2);
    } else if (pad.shape == "roundrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, 0, 0);
    } else if (pad.shape == "chamfrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, pad.chamfpos, pad.chamfratio)
    } else if (pad.shape == "custom") {
      pad.path2d = getPolygonsPath(pad);
    }
  }
  return pad.path2d;
}

function drawPad(ctx, pad, color, outline, hole) {
  ctx.save();
  ctx.translate(...pad.pos);
  ctx.rotate(deg2rad(pad.angle));
  if (pad.offset) {
    ctx.translate(...pad.offset);
  }
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  var path = getCachedPadPath(pad);
  if (outline) {
    ctx.stroke(path);
  } else {
    ctx.fill(path);
  }
  if (pad.type == "th" && hole) {
    if (pad.offset) {
      ctx.translate(-pad.offset[0], -pad.offset[1]);
    }
    ctx.fillStyle = "#CCCCCC";
    if (pad.drillshape == "oblong") {
      ctx.fill(getOblongPath(pad.drillsize));
    } else {
      ctx.fill(getCirclePath(pad.drillsize[0] / 2));
    }
  }
  ctx.restore();
}

function drawModule(ctx, layer, scalefactor, module, padcolor, outlinecolor, highlight, outline) {
  if (highlight) {
    // draw bounding box
    if (module.layer == layer) {
      ctx.save();
      ctx.globalAlpha = 0.2;
      ctx.translate(...module.bbox.pos);
      ctx.rotate(deg2rad(-module.bbox.angle));
      ctx.translate(...module.bbox.relpos);
      ctx.fillStyle = padcolor;
      ctx.fillRect(0, 0, ...module.bbox.size);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = padcolor;
      ctx.strokeRect(0, 0, ...module.bbox.size);
      ctx.restore();
    }
  }
  // draw drawings
  for (var drawing of module.drawings) {
    if (drawing.layer == layer) {
      drawDrawing(ctx, layer, scalefactor, drawing.drawing, padcolor);
    }
  }
  // draw pads
  if (settings.renderPads) {
    for (var pad of module.pads) {
      if (pad.layers.includes(layer)) {
        drawPad(ctx, pad, padcolor, outline, true);
        if (pad.pin1 && settings.highlightpin1) {
          drawPad(ctx, pad, outlinecolor, true, false);
        }
      }
    }
  }
}

function drawEdgeCuts(canvas, scalefactor) {
  var ctx = canvas.getContext("2d");
  var edgecolor = getComputedStyle(topmostdiv).getPropertyValue('--pcb-edge-color');
  for (var edge of pcbdata.edges) {
    drawedge(ctx, scalefactor, edge, edgecolor);
  }
}

function drawModules(canvas, layer, scalefactor, highlight) {
  var ctx = canvas.getContext("2d");
  ctx.lineWidth = 3 / scalefactor;
  var style = getComputedStyle(topmostdiv);
  var padcolor = style.getPropertyValue('--pad-color');
  var outlinecolor = style.getPropertyValue('--pin1-outline-color');
  if (highlight) {
    padcolor = style.getPropertyValue('--pad-color-highlight');
    outlinecolor = style.getPropertyValue('--pin1-outline-color-highlight');
  }
  for (var i = 0; i < pcbdata.modules.length; i++) {
    var mod = pcbdata.modules[i];
    var outline = settings.renderDnpOutline && pcbdata.bom.skipped.includes(i);
    if (!highlight || highlightedModules.includes(i)) {
      drawModule(ctx, layer, scalefactor, mod, padcolor, outlinecolor, highlight, outline);
    }
  }
}

function drawBgLayer(layername, canvas, layer, scalefactor, edgeColor, polygonColor, textColor) {
  var ctx = canvas.getContext("2d");
  for (var d of pcbdata[layername][layer]) {
    if (["segment", "arc", "circle", "curve"].includes(d.type)) {
      drawedge(ctx, scalefactor, d, edgeColor);
    } else if (d.type == "polygon") {
      drawPolygonShape(ctx, d, polygonColor);
    } else {
      drawtext(ctx, d, textColor, layer == "B");
    }
  }
}

function drawTracks(canvas, layer, color, highlight) {
  ctx = canvas.getContext("2d");
  ctx.strokeStyle = color;
  ctx.lineCap = "round";
  for(var track of pcbdata.tracks[layer]) {
    if (highlight && highlightedNet != track.net) continue;
    ctx.lineWidth = track.width;
    ctx.beginPath();
    ctx.moveTo(...track.start);
    ctx.lineTo(...track.end);
    ctx.stroke();
  }
}

function drawZones(canvas, layer, color, highlight) {
  ctx = canvas.getContext("2d");
  ctx.strokeStyle = color;
  ctx.fillStyle = color;
  ctx.lineJoin = "round";
  for(var zone of pcbdata.zones[layer]) {
    if (!zone.path2d) {
      zone.path2d = getPolygonsPath(zone);
    }
    if (highlight && highlightedNet != zone.net) continue;
    ctx.lineWidth = zone.width ? zone.width : 0;
    ctx.fill(zone.path2d);
    ctx.stroke(zone.path2d);
  }
}

function clearCanvas(canvas, color = null) {
  var ctx = canvas.getContext("2d");
  ctx.save();
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  if (color) {
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  } else {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
  ctx.restore();
}

function drawNets(canvas, layer, highlight) {
  var style = getComputedStyle(topmostdiv);
  if (settings.renderTracks) {
    var trackColor = style.getPropertyValue(highlight ? '--track-color-highlight' : '--track-color');
    drawTracks(canvas, layer, trackColor, highlight);
  }
  if (settings.renderZones) {
    var zoneColor = style.getPropertyValue(highlight ? '--zone-color-highlight' : '--zone-color');
    drawZones(canvas, layer, zoneColor, highlight);
  }
  if (highlight && settings.renderPads) {
    var padColor = style.getPropertyValue('--pad-color-highlight');
    var ctx = canvas.getContext("2d");
    for (var mod of pcbdata.modules) {
      // draw pads
      for (var pad of mod.pads) {
        if (highlightedNet != pad.net) continue;
        if (pad.layers.includes(layer)) {
          drawPad(ctx, pad, padColor, false, true);
        }
      }
    }
  }
}

function drawHighlightsOnLayer(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.highlight);
  }
  if (highlightedModules.length > 0) {
    drawModules(canvasdict.highlight, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom, true);
  }
  if (highlightedNet !== null) {
    drawNets(canvasdict.highlight, canvasdict.layer, true);
  }
}

function drawHighlights() {
  drawHighlightsOnLayer(allcanvas.front);
  drawHighlightsOnLayer(allcanvas.back);
}

function drawBackground(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.bg);
    clearCanvas(canvasdict.fab);
    clearCanvas(canvasdict.silk);
  }

  drawNets(canvasdict.bg, canvasdict.layer, false);
  drawModules(canvasdict.bg, canvasdict.layer,
    canvasdict.transform.s * canvasdict.transform.zoom, false);

  drawEdgeCuts(canvasdict.bg, canvasdict.transform.s);

  var style = getComputedStyle(topmostdiv);
  var edgeColor = style.getPropertyValue('--silkscreen-edge-color');
  var polygonColor = style.getPropertyValue('--silkscreen-polygon-color');
  var textColor = style.getPropertyValue('--silkscreen-text-color');
  if (settings.renderSilkscreen) {
    drawBgLayer(
      "silkscreen", canvasdict.silk, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
  edgeColor = style.getPropertyValue('--fabrication-edge-color');
  polygonColor = style.getPropertyValue('--fabrication-polygon-color');
  textColor = style.getPropertyValue('--fabrication-text-color');
  if (settings.renderFabrication) {
    drawBgLayer(
      "fabrication", canvasdict.fab, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
}

function prepareCanvas(canvas, flip, transform) {
  var ctx = canvas.getContext("2d");
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  var fontsize = 1.55;
  ctx.scale(transform.zoom, transform.zoom);
  ctx.translate(transform.panx, transform.pany);
  if (flip) {
    ctx.scale(-1, 1);
  }
  ctx.translate(transform.x, transform.y);
  ctx.rotate(deg2rad(settings.boardRotation));
  ctx.scale(transform.s, transform.s);
}

function prepareLayer(canvasdict) {
  var flip = (canvasdict.layer == "B");
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    prepareCanvas(canvasdict[c], flip, canvasdict.transform);
  }
}

function rotateVector(v, angle) {
  angle = deg2rad(angle);
  return [
    v[0] * Math.cos(angle) - v[1] * Math.sin(angle),
    v[0] * Math.sin(angle) + v[1] * Math.cos(angle)
  ];
}

function applyRotation(bbox) {
  var corners = [
    [bbox.minx, bbox.miny],
    [bbox.minx, bbox.maxy],
    [bbox.maxx, bbox.miny],
    [bbox.maxx, bbox.maxy],
  ];
  corners = corners.map((v) => rotateVector(v, settings.boardRotation));
  return {
    minx: corners.reduce((a, v) => Math.min(a, v[0]), Infinity),
    miny: corners.reduce((a, v) => Math.min(a, v[1]), Infinity),
    maxx: corners.reduce((a, v) => Math.max(a, v[0]), -Infinity),
    maxy: corners.reduce((a, v) => Math.max(a, v[1]), -Infinity),
  }
}

function recalcLayerScale(layerdict, width, height) {
  var bbox = applyRotation(pcbdata.edges_bbox);
  var scalefactor = 0.98 * Math.min(
    width / (bbox.maxx - bbox.minx),
    height / (bbox.maxy - bbox.miny)
  );
  if (scalefactor < 0.1) {
    scalefactor = 1;
  }
  layerdict.transform.s = scalefactor;
  var flip = (layerdict.layer == "B");
  if (flip) {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor + width) * 0.5;
  } else {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor - width) * 0.5;
  }
  layerdict.transform.y = -((bbox.maxy + bbox.miny) * scalefactor - height) * 0.5;
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    canvas = layerdict[c];
    canvas.width = width;
    canvas.height = height;
    canvas.style.width = (width / devicePixelRatio) + "px";
    canvas.style.height = (height / devicePixelRatio) + "px";
  }
}

function redrawCanvas(layerdict) {
  prepareLayer(layerdict);
  drawBackground(layerdict);
  drawHighlightsOnLayer(layerdict);
}

function resizeCanvas(layerdict) {
  var canvasdivid = {
    "F": "frontcanvas",
    "B": "backcanvas"
  } [layerdict.layer];
  var width = document.getElementById(canvasdivid).clientWidth * devicePixelRatio;
  var height = document.getElementById(canvasdivid).clientHeight * devicePixelRatio;
  recalcLayerScale(layerdict, width, height);
  redrawCanvas(layerdict);
}

function resizeAll() {
  resizeCanvas(allcanvas.front);
  resizeCanvas(allcanvas.back);
}

function pointWithinDistanceToSegment(x, y, x1, y1, x2, y2, d) {
  var A = x - x1;
  var B = y - y1;
  var C = x2 - x1;
  var D = y2 - y1;

  var dot = A * C + B * D;
  var len_sq = C * C + D * D;
  var dx, dy;
  if (len_sq == 0) {
    // start and end of the segment coincide
    dx = x - x1;
    dy = y - y1;
  } else {
    var param = dot / len_sq;
    var xx, yy;
    if (param < 0) {
      xx = x1;
      yy = y1;
    } else if (param > 1) {
      xx = x2;
      yy = y2;
    } else {
      xx = x1 + param * C;
      yy = y1 + param * D;
    }
    dx = x - xx;
    dy = y - yy;
  }
  return dx * dx + dy * dy <= d * d;
}

function pointWithinPad(x, y, pad) {
  var v = [x - pad.pos[0], y - pad.pos[1]];
  v = rotateVector(v, -pad.angle);
  if (pad.offset) {
    v[0] -= pad.offset[0];
    v[1] -= pad.offset[1];
  }
  return emptyContext2d.isPointInPath(getCachedPadPath(pad), ...v);
}

function netHitScan(layer, x, y) {
  // Check track segments
  if (settings.renderTracks && pcbdata.tracks) {
    for(var track of pcbdata.tracks[layer]) {
      if (pointWithinDistanceToSegment(x, y, ...track.start, ...track.end, track.width / 2)) {
        return track.net;
      }
    }
  }
  // Check pads
  if (settings.renderPads) {
    for (var mod of pcbdata.modules) {
      for(var pad of mod.pads) {
        if (pad.layers.includes(layer) && pointWithinPad(x, y, pad)) {
          return pad.net;
        }
      }
    }
  }
  return null;
}

function pointWithinModuleBbox(x, y, bbox) {
  var v = [x - bbox.pos[0], y - bbox.pos[1]];
  v = rotateVector(v, bbox.angle);
  return bbox.relpos[0] <= v[0] && v[0] <= bbox.relpos[0] + bbox.size[0] &&
         bbox.relpos[1] <= v[1] && v[1] <= bbox.relpos[1] + bbox.size[1];
}

function bboxHitScan(layer, x, y) {
  var result = [];
  for (var i = 0; i < pcbdata.modules.length; i++) {
    var module = pcbdata.modules[i];
    if (module.layer == layer) {
      if (pointWithinModuleBbox(x, y, module.bbox)) {
        result.push(i);
      }
    }
  }
  return result;
}

function handlePointerDown(e, layerdict) {
  if (e.button != 0) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  layerdict.pointerStates[e.pointerId] = {
    distanceTravelled: 0,
    lastX: e.offsetX,
    lastY: e.offsetY,
    downTime: Date.now(),
  };
}

function handleMouseClick(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var x = e.offsetX;
  var y = e.offsetY;
  var t = layerdict.transform;
  if (layerdict.layer == "B") {
    x = (devicePixelRatio * x / t.zoom - t.panx + t.x) / -t.s;
  } else {
    x = (devicePixelRatio * x / t.zoom - t.panx - t.x) / t.s;
  }
  y = (devicePixelRatio * y / t.zoom - t.y - t.pany) / t.s;
  var v = rotateVector([x, y], -settings.boardRotation);
  if ("nets" in pcbdata) {
    var net = netHitScan(layerdict.layer, ...v);
    if (net !== highlightedNet) {
      netClicked(net);
    }
  }
  if (highlightedNet === null) {
    var modules = bboxHitScan(layerdict.layer, ...v);
    if (modules.length > 0) {
      modulesClicked(modules);
    }
  }
}

function handlePointerLeave(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();

  if (!settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }

  delete layerdict.pointerStates[e.pointerId];
}

function resetTransform(layerdict) {
  layerdict.transform.panx = 0;
  layerdict.transform.pany = 0;
  layerdict.transform.zoom = 1;
  redrawCanvas(layerdict);
}

function handlePointerUp(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  e.preventDefault();
  e.stopPropagation();

  if (e.button == 2) {
    // Reset pan and zoom on right click.
    resetTransform(layerdict);
    layerdict.anotherPointerTapped = false;
    return;
  }

  // We haven't necessarily had a pointermove event since the interaction started, so make sure we update this now
  var ptr = layerdict.pointerStates[e.pointerId];
  ptr.distanceTravelled += Math.abs(e.offsetX - ptr.lastX) + Math.abs(e.offsetY - ptr.lastY);

  if (e.button == 0 && ptr.distanceTravelled < 10 && Date.now() - ptr.downTime <= 500) {
    if (Object.keys(layerdict.pointerStates).length == 1) {
      if (layerdict.anotherPointerTapped) {
        // This is the second pointer coming off of a two-finger tap
        resetTransform(layerdict);
      } else {
        // This is just a regular tap
        handleMouseClick(e, layerdict);
      }
      layerdict.anotherPointerTapped = false;
    } else {
      // This is the first finger coming off of what could become a two-finger tap
      layerdict.anotherPointerTapped = true;
    }
  } else {
    if (!settings.redrawOnDrag) {
      redrawCanvas(layerdict);
    }
    layerdict.anotherPointerTapped = false;
  }

  delete layerdict.pointerStates[e.pointerId];
}

function handlePointerMove(e, layerdict) {
  if (!layerdict.pointerStates.hasOwnProperty(e.pointerId)) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var thisPtr = layerdict.pointerStates[e.pointerId];

  var dx = e.offsetX - thisPtr.lastX;
  var dy = e.offsetY - thisPtr.lastY;

  // If this number is low on pointer up, we count the action as a click
  thisPtr.distanceTravelled += Math.abs(dx) + Math.abs(dy);

  if (Object.keys(layerdict.pointerStates).length == 1) {
    // This is a simple drag
    layerdict.transform.panx += devicePixelRatio * dx / layerdict.transform.zoom;
    layerdict.transform.pany += devicePixelRatio * dy / layerdict.transform.zoom;
  } else if (Object.keys(layerdict.pointerStates).length == 2) {
    var otherPtr = Object.values(layerdict.pointerStates).filter((ptr) => ptr != thisPtr)[0];

    var oldDist = Math.sqrt(Math.pow(thisPtr.lastX - otherPtr.lastX, 2) + Math.pow(thisPtr.lastY - otherPtr.lastY, 2));
    var newDist = Math.sqrt(Math.pow(e.offsetX - otherPtr.lastX, 2)     + Math.pow(e.offsetY - otherPtr.lastY, 2));

    var scaleFactor = newDist/oldDist;

    if (scaleFactor != NaN) {
      layerdict.transform.zoom *= scaleFactor;

      var zoomd = (1 - scaleFactor) / layerdict.transform.zoom;
      layerdict.transform.panx += devicePixelRatio * otherPtr.lastX * zoomd;
      layerdict.transform.pany += devicePixelRatio * otherPtr.lastY * zoomd;
    }
  }

  thisPtr.lastX = e.offsetX;
  thisPtr.lastY = e.offsetY;

  if (settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }
}

function handleMouseWheel(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();
  var t = layerdict.transform;
  var wheeldelta = e.deltaY;
  if (e.deltaMode == 1) {
    // FF only, scroll by lines
    wheeldelta *= 30;
  } else if (e.deltaMode == 2) {
    wheeldelta *= 300;
  }
  var m = Math.pow(1.1, -wheeldelta / 40);
  // Limit amount of zoom per tick.
  if (m > 2) {
    m = 2;
  } else if (m < 0.5) {
    m = 0.5;
  }
  t.zoom *= m;
  var zoomd = (1 - m) / t.zoom;
  t.panx += devicePixelRatio * e.offsetX * zoomd;
  t.pany += devicePixelRatio * e.offsetY * zoomd;
  redrawCanvas(layerdict);
}

function addMouseHandlers(div, layerdict) {
  div.addEventListener("pointerdown", function(e) {
    handlePointerDown(e, layerdict);
  });
  div.addEventListener("pointermove", function(e) {
    handlePointerMove(e, layerdict);
  });
  div.addEventListener("pointerup", function(e) {
    handlePointerUp(e, layerdict);
  });
  var pointerleave = function(e) {
    handlePointerLeave(e, layerdict);
  }
  div.addEventListener("pointercancel", pointerleave);
  div.addEventListener("pointerleave", pointerleave);
  div.addEventListener("pointerout", pointerleave);

  div.onwheel = function(e) {
    handleMouseWheel(e, layerdict);
  }
  for (var element of [div, layerdict.bg, layerdict.fab, layerdict.silk, layerdict.highlight]) {
    element.addEventListener("contextmenu", function(e) {
      e.preventDefault();
    }, false);
  }
}

function setRedrawOnDrag(value) {
  settings.redrawOnDrag = value;
  writeStorage("redrawOnDrag", value);
}

function setBoardRotation(value) {
  settings.boardRotation = value * 5;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  resizeAll();
}

function initRender() {
  allcanvas = {
    front: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("F_bg"),
      fab: document.getElementById("F_fab"),
      silk: document.getElementById("F_slk"),
      highlight: document.getElementById("F_hl"),
      layer: "F",
    },
    back: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("B_bg"),
      fab: document.getElementById("B_fab"),
      silk: document.getElementById("B_slk"),
      highlight: document.getElementById("B_hl"),
      layer: "B",
    }
  };
  addMouseHandlers(document.getElementById("frontcanvas"), allcanvas.front);
  addMouseHandlers(document.getElementById("backcanvas"), allcanvas.back);
}

///////////////////////////////////////////////

///////////////////////////////////////////////
/* DOM manipulation and misc code */

var bomsplit;
var canvassplit;
var initDone = false;
var bomSortFunction = null;
var currentSortColumn = null;
var currentSortOrder = null;
var currentHighlightedRowId;
var highlightHandlers = [];
var moduleIndexToHandler = {};
var netsToHandler = {};
var highlightedModules = [];
var highlightedNet = null;
var lastClicked;

function dbg(html) {
  dbgdiv.innerHTML = html;
}

function redrawIfInitDone() {
  if (initDone) {
    redrawCanvas(allcanvas.front);
    redrawCanvas(allcanvas.back);
  }
}

function padsVisible(value) {
  writeStorage("padsVisible", value);
  settings.renderPads = value;
  redrawIfInitDone();
}

function referencesVisible(value) {
  writeStorage("referencesVisible", value);
  settings.renderReferences = value;
  redrawIfInitDone();
}

function valuesVisible(value) {
  writeStorage("valuesVisible", value);
  settings.renderValues = value;
  redrawIfInitDone();
}

function tracksVisible(value) {
  writeStorage("tracksVisible", value);
  settings.renderTracks = value;
  redrawIfInitDone();
}

function zonesVisible(value) {
  writeStorage("zonesVisible", value);
  settings.renderZones = value;
  redrawIfInitDone();
}

function dnpOutline(value) {
  writeStorage("dnpOutline", value);
  settings.renderDnpOutline = value;
  redrawIfInitDone();
}

function setDarkMode(value) {
  if (value) {
    topmostdiv.classList.add("dark");
  } else {
    topmostdiv.classList.remove("dark");
  }
  writeStorage("darkmode", value);
  settings.darkMode = value;
  redrawIfInitDone();
}

function fabricationVisible(value) {
  writeStorage("fabricationVisible", value);
  settings.renderFabrication = value;
  redrawIfInitDone();
}

function silkscreenVisible(value) {
  writeStorage("silkscreenVisible", value);
  settings.renderSilkscreen = value;
  redrawIfInitDone();
}

function setHighlightPin1(value) {
  writeStorage("highlightpin1", value);
  settings.highlightpin1 = value;
  redrawIfInitDone();
}

function getStoredCheckboxRefs(checkbox) {
  function convert(ref) {
    var intref = parseInt(ref);
    if (isNaN(intref)) {
      for (var i = 0; i < pcbdata.modules.length; i++) {
        if (pcbdata.modules[i].ref == ref) {
          return i;
        }
      }
      return -1;
    } else {
      return intref;
    }
  }
  if (!(checkbox in settings.checkboxStoredRefs)) {
    var val = readStorage("checkbox_" + checkbox);
    settings.checkboxStoredRefs[checkbox] = val ? val : "";
  }
  if (!settings.checkboxStoredRefs[checkbox]) {
    return new Set();
  } else {
    return new Set(settings.checkboxStoredRefs[checkbox].split(",").map(r => convert(r)).filter(a => a >= 0));
  }
}

function getCheckboxState(checkbox, references) {
  var storedRefsSet = getStoredCheckboxRefs(checkbox);
  var currentRefsSet = new Set(references.map(r => r[1]));
  // Get difference of current - stored
  var difference = new Set(currentRefsSet);
  for (ref of storedRefsSet) {
    difference.delete(ref);
  }
  if (difference.size == 0) {
    // All the current refs are stored
    return "checked";
  } else if (difference.size == currentRefsSet.size) {
    // None of the current refs are stored
    return "unchecked";
  } else {
    // Some of the refs are stored
    return "indeterminate";
  }
}

function setBomCheckboxState(checkbox, element, references) {
  var state = getCheckboxState(checkbox, references);
  element.checked = (state == "checked");
  element.indeterminate = (state == "indeterminate");
}

function createCheckboxChangeHandler(checkbox, references) {
  return function() {
    refsSet = getStoredCheckboxRefs(checkbox);
    if (this.checked) {
      // checkbox ticked
      for (var ref of references) {
        refsSet.add(ref[1]);
      }
    } else {
      // checkbox unticked
      for (var ref of references) {
        refsSet.delete(ref[1]);
      }
    }
    settings.checkboxStoredRefs[checkbox] = [...refsSet].join(",");
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
    updateCheckboxStats(checkbox);
  }
}

function clearHighlightedModules() {
  if (currentHighlightedRowId) {
    document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    currentHighlightedRowId = null;
    highlightedModules = [];
    highlightedNet = null;
  }
}

function createRowHighlightHandler(rowid, refs, net) {
  return function() {
    if (currentHighlightedRowId) {
      if (currentHighlightedRowId == rowid) {
        return;
      }
      document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    }
    document.getElementById(rowid).classList.add("highlighted");
    currentHighlightedRowId = rowid;
    highlightedModules = refs ? refs.map(r => r[1]) : [];
    highlightedNet = net;
    drawHighlights();
  }
}

function entryMatches(entry) {
  if (settings.bommode == "netlist") {
    // entry is just a net name
    return entry.toLowerCase().indexOf(filter) >= 0;
  }
  // check refs
  for (var ref of entry[3]) {
    if (ref[0].toLowerCase().indexOf(filter) >= 0) {
      return true;
    }
  }
  // check extra fields
  for (var i in config.extra_fields) {
    if (entry[4][i].toLowerCase().indexOf(filter) >= 0) {
      return true;
    }
  }
  // check value
  if (entry[1].toLowerCase().indexOf(filter) >= 0) {
    return true;
  }
  // check footprint
  if (entry[2].toLowerCase().indexOf(filter) >= 0) {
    return true;
  }
  return false;
}

function findRefInEntry(entry) {
  return entry[3].filter(r => r[0].toLowerCase() == reflookup);
}

function highlightFilter(s) {
  if (!filter) {
    return s;
  }
  var parts = s.toLowerCase().split(filter);
  if (parts.length == 1) {
    return s;
  }
  var r = "";
  var pos = 0;
  for (var i in parts) {
    if (i > 0) {
      r += '<mark class="highlight">' +
        s.substring(pos, pos + filter.length) +
        '</mark>';
      pos += filter.length;
    }
    r += s.substring(pos, pos + parts[i].length);
    pos += parts[i].length;
  }
  return r;
}

function checkboxSetUnsetAllHandler(checkboxname) {
  return function() {
    var checkboxnum = 0;
    while (checkboxnum < settings.checkboxes.length &&
      settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
      checkboxnum++;
    }
    if (checkboxnum >= settings.checkboxes.length) {
      return;
    }
    var allset = true;
    var checkbox;
    var row;
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      if (!checkbox.checked || checkbox.indeterminate) {
        allset = false;
        break;
      }
    }
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      checkbox.checked = !allset;
      checkbox.indeterminate = false;
      checkbox.onchange();
    }
  }
}

function createColumnHeader(name, cls, comparator) {
  var th = document.createElement("TH");
  th.innerHTML = name;
  th.classList.add(cls);
  th.style.cursor = "pointer";
  var span = document.createElement("SPAN");
  span.classList.add("sortmark");
  span.classList.add("none");
  th.appendChild(span);
  th.onclick = function() {
    if (currentSortColumn && this !== currentSortColumn) {
      // Currently sorted by another column
      currentSortColumn.childNodes[1].classList.remove(currentSortOrder);
      currentSortColumn.childNodes[1].classList.add("none");
      currentSortColumn = null;
      currentSortOrder = null;
    }
    if (currentSortColumn && this === currentSortColumn) {
      // Already sorted by this column
      if (currentSortOrder == "asc") {
        // Sort by this column, descending order
        bomSortFunction = function(a, b) {
          return -comparator(a, b);
        }
        currentSortColumn.childNodes[1].classList.remove("asc");
        currentSortColumn.childNodes[1].classList.add("desc");
        currentSortOrder = "desc";
      } else {
        // Unsort
        bomSortFunction = null;
        currentSortColumn.childNodes[1].classList.remove("desc");
        currentSortColumn.childNodes[1].classList.add("none");
        currentSortColumn = null;
        currentSortOrder = null;
      }
    } else {
      // Sort by this column, ascending order
      bomSortFunction = comparator;
      currentSortColumn = this;
      currentSortColumn.childNodes[1].classList.remove("none");
      currentSortColumn.childNodes[1].classList.add("asc");
      currentSortOrder = "asc";
    }
    populateBomBody();
  }
  return th;
}

function populateBomHeader() {
  while (bomhead.firstChild) {
    bomhead.removeChild(bomhead.firstChild);
  }
  var tr = document.createElement("TR");
  var th = document.createElement("TH");
  th.classList.add("numCol");
  tr.appendChild(th);
  var checkboxCompareClosure = function(checkbox) {
    return (a, b) => {
      var stateA = getCheckboxState(checkbox, a[3]);
      var stateB = getCheckboxState(checkbox, b[3]);
      if (stateA > stateB) return -1;
      if (stateA < stateB) return 1;
      return 0;
    }
  }
  if (settings.bommode == "netlist") {
    th = createColumnHeader("Net name", "bom-netname", (a, b) => {
      if (a > b) return -1;
      if (a < b) return 1;
      return 0;
    });
    tr.appendChild(th);
  } else {
    for (var checkbox of settings.checkboxes) {
      th = createColumnHeader(
        checkbox, "bom-checkbox", checkboxCompareClosure(checkbox));
      th.onclick = fancyDblClickHandler(
        th, th.onclick.bind(th), checkboxSetUnsetAllHandler(checkbox));
      tr.appendChild(th);
    }
    tr.appendChild(createColumnHeader("References", "References", (a, b) => {
      var i = 0;
      while (i < a[3].length && i < b[3].length) {
        if (a[3][i] != b[3][i]) return a[3][i] > b[3][i] ? 1 : -1;
        i++;
      }
      return a[3].length - b[3].length;
    }));
    // Extra fields
    if (config.extra_fields.length > 0) {
      var extraFieldCompareClosure = function(fieldIndex) {
        return (a, b) => {
          var fa = a[4][fieldIndex];
          var fb = b[4][fieldIndex];
          if (fa != fb) return fa > fb ? 1 : -1;
          else return 0;
        }
      }
      for (var i in config.extra_fields) {
        tr.appendChild(createColumnHeader(
          config.extra_fields[i], "extra", extraFieldCompareClosure(i)));
      }
    }
    tr.appendChild(createColumnHeader("Value", "Value", (a, b) => {
      return valueCompare(a[5], b[5], a[1], b[1]);
    }));
    tr.appendChild(createColumnHeader("Footprint", "Footprint", (a, b) => {
      if (a[2] != b[2]) return a[2] > b[2] ? 1 : -1;
      else return 0;
    }));
    if (settings.bommode == "grouped") {
      tr.appendChild(createColumnHeader("Quantity", "Quantity", (a, b) => {
        return a[3].length - b[3].length;
      }));
    }
  }
  bomhead.appendChild(tr);
}

function populateBomBody() {
  while (bom.firstChild) {
    bom.removeChild(bom.firstChild);
  }
  highlightHandlers = [];
  moduleIndexToHandler = {};
  netsToHandler = {};
  currentHighlightedRowId = null;
  var first = true;
  if (settings.bommode == "netlist") {
    bomtable = pcbdata.nets.slice();
  } else {
    switch (settings.canvaslayout) {
      case 'F':
        bomtable = pcbdata.bom.F.slice();
        break;
      case 'FB':
        bomtable = pcbdata.bom.both.slice();
        break;
      case 'B':
        bomtable = pcbdata.bom.B.slice();
        break;
    }
    if (settings.bommode == "ungrouped") {
      // expand bom table
      expandedTable = []
      for (var bomentry of bomtable) {
        for (var ref of bomentry[3]) {
          expandedTable.push([1, bomentry[1], bomentry[2], [ref], bomentry[4], bomentry[5]]);
        }
      }
      bomtable = expandedTable;
    }
  }
  if (bomSortFunction) {
    bomtable = bomtable.sort(bomSortFunction);
  }
  for (var i in bomtable) {
    var bomentry = bomtable[i];
    if (filter && !entryMatches(bomentry)) {
      continue;
    }
    var references = null;
    var netname = null;
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    var rownum = +i + 1;
    tr.id = "bomrow" + rownum;
    td.textContent = rownum;
    tr.appendChild(td);
    if (settings.bommode == "netlist") {
      netname = bomentry;
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(netname ? netname : "&lt;no net&gt;");
      tr.appendChild(td);
    } else {
      if (reflookup) {
        references = findRefInEntry(bomentry);
        if (references.length == 0) {
          continue;
        }
      } else {
        references = bomentry[3];
      }
      // Checkboxes
      for (var checkbox of settings.checkboxes) {
        if (checkbox) {
          td = document.createElement("TD");
          var input = document.createElement("input");
          input.type = "checkbox";
          input.onchange = createCheckboxChangeHandler(checkbox, references);
          setBomCheckboxState(checkbox, input, references);
          td.appendChild(input);
          tr.appendChild(td);
        }
      }
      // References
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(references.map(r => r[0]).join(", "));
      tr.appendChild(td);
      // Extra fields
      for (var i in config.extra_fields) {
        td = document.createElement("TD");
        td.innerHTML = highlightFilter(bomentry[4][i]);
        tr.appendChild(td);
      }
      // Value
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(bomentry[1]);
      tr.appendChild(td);
      // Footprint
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(bomentry[2]);
      tr.appendChild(td);
      if (settings.bommode == "grouped") {
        // Quantity
        td = document.createElement("TD");
        td.textContent = bomentry[3].length;
        tr.appendChild(td);
      }
    }
    bom.appendChild(tr);
    var handler = createRowHighlightHandler(tr.id, references, netname);
    tr.onmousemove = handler;
    highlightHandlers.push({
      id: tr.id,
      handler: handler,
    });
    if (references !== null) {
      for (var refIndex of references.map(r => r[1])) {
        moduleIndexToHandler[refIndex] = handler;
      }
    }
    if (netname !== null) {
      netsToHandler[netname] = handler;
    }
    if ((filter || reflookup) && first) {
      handler();
      first = false;
    }
  }
}

function highlightPreviousRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[highlightHandlers.length - 1].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[0].id == currentHighlightedRowId) {
      highlightHandlers[highlightHandlers.length - 1].handler();
    } else {
      for (var i = 0; i < highlightHandlers.length - 1; i++) {
        if (highlightHandlers[i + 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function highlightNextRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[0].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[highlightHandlers.length - 1].id == currentHighlightedRowId) {
      highlightHandlers[0].handler();
    } else {
      for (var i = 1; i < highlightHandlers.length; i++) {
        if (highlightHandlers[i - 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function populateBomTable() {
  populateBomHeader();
  populateBomBody();
}

function modulesClicked(moduleIndexes) {
  var lastClickedIndex = moduleIndexes.indexOf(lastClicked);
  for (var i = 1; i <= moduleIndexes.length; i++) {
    var refIndex = moduleIndexes[(lastClickedIndex + i) % moduleIndexes.length];
    if (refIndex in moduleIndexToHandler) {
      lastClicked = refIndex;
      moduleIndexToHandler[refIndex]();
      smoothScrollToRow(currentHighlightedRowId);
      break;
    }
  }
}

function netClicked(net) {
  if (net in netsToHandler) {
    netsToHandler[net]();
    smoothScrollToRow(currentHighlightedRowId);
  } else {
    clearHighlightedModules();
    highlightedNet = net;
    drawHighlights();
  }
}

function updateFilter(input) {
  filter = input.toLowerCase();
  populateBomTable();
}

function updateRefLookup(input) {
  reflookup = input.toLowerCase();
  populateBomTable();
}

function changeCanvasLayout(layout) {
  document.getElementById("fl-btn").classList.remove("depressed");
  document.getElementById("fb-btn").classList.remove("depressed");
  document.getElementById("bl-btn").classList.remove("depressed");
  switch (layout) {
    case 'F':
      document.getElementById("fl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(1);
      }
      break;
    case 'B':
      document.getElementById("bl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(0);
      }
      break;
    default:
      document.getElementById("fb-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.setSizes([50, 50]);
      }
  }
  settings.canvaslayout = layout;
  writeStorage("canvaslayout", layout);
  resizeAll();
  changeBomMode(settings.bommode);
}

function populateMetadata() {
  document.getElementById("title").innerHTML = pcbdata.metadata.title;
  document.getElementById("revision").innerHTML = "Rev: " + pcbdata.metadata.revision;
  document.getElementById("company").innerHTML = pcbdata.metadata.company;
  document.getElementById("filedate").innerHTML = pcbdata.metadata.date;
  if (pcbdata.metadata.title != "") {
    document.title = pcbdata.metadata.title + " BOM";
  }
  var fp_f = 0, fp_b = 0, pads_f = 0, pads_b = 0, pads_th = 0;
  for (var i = 0; i < pcbdata.modules.length; i++) {
    if (pcbdata.bom.skipped.includes(i)) continue;
    var mod = pcbdata.modules[i];
    if (mod.layer == "F") {
      fp_f++;
    } else {
      fp_b++;
    }
    for (var pad of mod.pads) {
      if (pad.type == "th") {
        pads_th++;
      } else {
        if (pad.layers.includes("F")) {
          pads_f++;
        }
        if (pad.layers.includes("B")) {
          pads_b++;
        }
      }
    }
  }
  document.getElementById("stats-components-front").innerHTML = fp_f;
  document.getElementById("stats-components-back").innerHTML = fp_b;
  document.getElementById("stats-components-total").innerHTML = fp_f + fp_b;
  document.getElementById("stats-groups-front").innerHTML = pcbdata.bom.F.length;
  document.getElementById("stats-groups-back").innerHTML = pcbdata.bom.B.length;
  document.getElementById("stats-groups-total").innerHTML = pcbdata.bom.both.length;
  document.getElementById("stats-smd-pads-front").innerHTML = pads_f;
  document.getElementById("stats-smd-pads-back").innerHTML = pads_b;
  document.getElementById("stats-smd-pads-total").innerHTML = pads_f + pads_b;
  document.getElementById("stats-th-pads").innerHTML = pads_th;
}

function changeBomLayout(layout) {
  document.getElementById("bom-btn").classList.remove("depressed");
  document.getElementById("lr-btn").classList.remove("depressed");
  document.getElementById("tb-btn").classList.remove("depressed");
  switch (layout) {
    case 'bom-only':
      document.getElementById("bom-btn").classList.add("depressed");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      document.getElementById("frontcanvas").style.display = "none";
      document.getElementById("backcanvas").style.display = "none";
      document.getElementById("bot").style.height = "";
      break;
    case 'top-bottom':
      document.getElementById("tb-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.remove("split-horizontal");
      document.getElementById("canvasdiv").classList.remove("split-horizontal");
      document.getElementById("frontcanvas").classList.add("split-horizontal");
      document.getElementById("backcanvas").classList.add("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        direction: "vertical",
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        onDragEnd: resizeAll
      });
      break;
    case 'left-right':
      document.getElementById("lr-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.add("split-horizontal");
      document.getElementById("canvasdiv").classList.add("split-horizontal");
      document.getElementById("frontcanvas").classList.remove("split-horizontal");
      document.getElementById("backcanvas").classList.remove("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        direction: "vertical",
        onDragEnd: resizeAll
      });
  }
  settings.bomlayout = layout;
  writeStorage("bomlayout", layout);
  changeCanvasLayout(settings.canvaslayout);
}

function changeBomMode(mode) {
  document.getElementById("bom-grouped-btn").classList.remove("depressed");
  document.getElementById("bom-ungrouped-btn").classList.remove("depressed");
  document.getElementById("bom-netlist-btn").classList.remove("depressed");
  switch (mode) {
    case 'grouped':
      document.getElementById("bom-grouped-btn").classList.add("depressed");
      break;
    case 'ungrouped':
      document.getElementById("bom-ungrouped-btn").classList.add("depressed");
      break;
    case 'netlist':
      document.getElementById("bom-netlist-btn").classList.add("depressed");
  }
  writeStorage("bommode", mode);
  if (mode != settings.bommode) {
    settings.bommode = mode;
    bomSortFunction = null;
    currentSortColumn = null;
    currentSortOrder = null;
    clearHighlightedModules();
  }
  populateBomTable();
}

function focusFilterField() {
  focusInputField(document.getElementById("filter"));
}

function focusRefLookupField() {
  focusInputField(document.getElementById("reflookup"));
}

function toggleBomCheckbox(bomrowid, checkboxnum) {
  if (!bomrowid || checkboxnum > settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum].childNodes[0];
  checkbox.checked = !checkbox.checked;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function checkBomCheckbox(bomrowid, checkboxname) {
  var checkboxnum = 0;
  while (checkboxnum < settings.checkboxes.length &&
    settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
    checkboxnum++;
  }
  if (!bomrowid || checkboxnum >= settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum + 1].childNodes[0];
  checkbox.checked = true;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function setBomCheckboxes(value) {
  writeStorage("bomCheckboxes", value);
  settings.checkboxes = value.split(",").filter((e) => e);
  prepCheckboxes();
  populateBomTable();
}

function prepCheckboxes() {
  var table = document.getElementById("checkbox-stats");
  while (table.childElementCount > 1) {
    table.removeChild(table.lastChild);
  }
  if (settings.checkboxes.length) {
    table.style.display = "";
  } else {
    table.style.display = "none";
  }
  for (var checkbox of settings.checkboxes) {
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    td.innerHTML = checkbox;
    tr.appendChild(td);
    td = document.createElement("TD");
    td.id = "checkbox-stats-" + checkbox;
    var progressbar = document.createElement("div");
    progressbar.classList.add("bar");
    td.appendChild(progressbar);
    var text = document.createElement("div");
    text.classList.add("text");
    td.appendChild(text);
    tr.appendChild(td);
    table.appendChild(tr);
    updateCheckboxStats(checkbox);
  }
}

function updateCheckboxStats(checkbox) {
  var checked = getStoredCheckboxRefs(checkbox).size;
  var total = pcbdata.modules.length - pcbdata.bom.skipped.length;
  var percent = checked * 100.0 / total;
  var td = document.getElementById("checkbox-stats-" + checkbox);
  td.firstChild.style.width = percent + "%";
  td.lastChild.innerHTML = checked + "/" + total + " (" + Math.round(percent) + "%)";
}

document.onkeydown = function(e) {
  switch (e.key) {
    case "n":
      if (document.activeElement.type == "text") {
        return;
      }
      if (currentHighlightedRowId !== null) {
        checkBomCheckbox(currentHighlightedRowId, "placed");
        highlightNextRow();
        e.preventDefault();
      }
      break;
    case "ArrowUp":
      highlightPreviousRow();
      e.preventDefault();
      break;
    case "ArrowDown":
      highlightNextRow();
      e.preventDefault();
      break;
    default:
      break;
  }
  if (e.altKey) {
    switch (e.key) {
      case "f":
        focusFilterField();
        e.preventDefault();
        break;
      case "r":
        focusRefLookupField();
        e.preventDefault();
        break;
      case "z":
        changeBomLayout("bom-only");
        e.preventDefault();
        break;
      case "x":
        changeBomLayout("left-right");
        e.preventDefault();
        break;
      case "c":
        changeBomLayout("top-bottom");
        e.preventDefault();
        break;
      case "v":
        changeCanvasLayout("F");
        e.preventDefault();
        break;
      case "b":
        changeCanvasLayout("FB");
        e.preventDefault();
        break;
      case "n":
        changeCanvasLayout("B");
        e.preventDefault();
        break;
      default:
        break;
    }
    if (e.key >= '1' && e.key <= '9') {
      toggleBomCheckbox(currentHighlightedRowId, parseInt(e.key));
    }
  }
}

function hideNetlistButton() {
  document.getElementById("bom-ungrouped-btn").classList.remove("middle-button");
  document.getElementById("bom-ungrouped-btn").classList.add("right-most-button");
  document.getElementById("bom-netlist-btn").style.display = "none";
}

window.onload = function(e) {
  initUtils();
  initRender();
  initStorage();
  initDefaults();
  cleanGutters();
  populateMetadata();
  dbgdiv = document.getElementById("dbg");
  bom = document.getElementById("bombody");
  bomhead = document.getElementById("bomhead");
  filter = "";
  reflookup = "";
  if (!("nets" in pcbdata)) {
    hideNetlistButton();
  }
  initDone = true;
  prepCheckboxes();
  // Triggers render
  changeBomLayout(settings.bomlayout);
}

window.onresize = resizeAll;
window.matchMedia("print").addListener(resizeAll);

///////////////////////////////////////////////

  </script>
</head>

<body>
<div id="topmostdiv" class="topmostdiv">
  <div id="top">
    <div style="float: right; height: 100%;">
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="menubtn"></button>
        <div class="menu-content">
          <label class="menu-label menu-label-top">
            <input id="darkmodeCheckbox" type="checkbox" onchange="setDarkMode(this.checked)">
            Dark mode
          </label>
          <label class="menu-label">
            <input id="padsCheckbox" type="checkbox" checked onchange="padsVisible(this.checked)">
            Show footprint pads
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="fabricationCheckbox" type="checkbox" checked onchange="fabricationVisible(this.checked)">
            Fab layer
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="silkscreenCheckbox" type="checkbox" checked onchange="silkscreenVisible(this.checked)">
            Silkscreen
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="referencesCheckbox" type="checkbox" checked onchange="referencesVisible(this.checked)">
            References
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="valuesCheckbox" type="checkbox" checked onchange="valuesVisible(this.checked)">
            Values
          </label>
          <div id="tracksAndZonesCheckboxes">
            <label class="menu-label" style="width: calc(50% - 18px)">
              <input id="tracksCheckbox" type="checkbox" checked onchange="tracksVisible(this.checked)">
              Tracks
            </label><!-- This comment eats space! All of it!
            --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
              <input id="zonesCheckbox" type="checkbox" checked onchange="zonesVisible(this.checked)">
              Zones
            </label>
          </div>
          <label class="menu-label">
            <input id="dnpOutlineCheckbox" type="checkbox" checked onchange="dnpOutline(this.checked)">
            DNP components outlined
          </label>
          <label class="menu-label">
            <input id="highlightpin1Checkbox" type="checkbox" onchange="setHighlightPin1(this.checked)">
            Highlight first pin
          </label>
          <label class="menu-label">
            <input id="dragCheckbox" type="checkbox" checked onchange="setRedrawOnDrag(this.checked)">
            Continuous redraw on drag
          </label>
          <label class="menu-label">
            <span>Board rotation</span>
            <span style="float: right"><span id="rotationDegree">0</span>&#176;</span>
            <input id="boardRotation" type="range" min="-36" max="36" value="0" class="slider" oninput="setBoardRotation(this.value)">
          </label>
          <label class="menu-label">
            <div style="margin-left: 5px">Bom checkboxes</div>
            <input id="bomCheckboxes" class="menu-textbox" type=text
                   oninput="setBomCheckboxes(this.value)">
          </label>
          <label class="menu-label">
            <span class="shameless-plug">
              <span>Created using</span>
              <a target="blank" href="https://github.com/openscopeproject/InteractiveHtmlBom">InteractiveHtmlBom</a>
            </span>
          </label>
        </div>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="fl-btn" class="left-most-button" onclick="changeCanvasLayout('F')"
                title="Front only">F
        </button>
        <button id="fb-btn" class="middle-button" onclick="changeCanvasLayout('FB')"
                title="Front and Back">FB
        </button>
        <button id="bl-btn" class="right-most-button" onclick="changeCanvasLayout('B')"
                title="Back only">B
        </button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-btn" class="left-most-button" onclick="changeBomLayout('bom-only')"
                title="BOM only"></button>
        <button id="lr-btn" class="middle-button" onclick="changeBomLayout('left-right')"
                title="BOM left, drawings right"></button>
        <button id="tb-btn" class="right-most-button" onclick="changeBomLayout('top-bottom')"
                title="BOM top, drawings bot"></button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-grouped-btn" class="left-most-button" onclick="changeBomMode('grouped')"
                title="Grouped BOM"></button>
        <button id="bom-ungrouped-btn" class="middle-button" onclick="changeBomMode('ungrouped')"
                title="Ungrouped BOM"></button>
        <button id="bom-netlist-btn" class="right-most-button" onclick="changeBomMode('netlist')"
                title="Netlist"></button>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="statsbtn"></button>
        <div class="menu-content">
          <table class="stats">
            <tbody>
              <tr>
                <td width="40%">Board stats</td>
                <td>Front</td>
                <td>Back</td>
                <td>Total</td>
              </tr>
              <tr>
                <td>Components</td>
                <td id="stats-components-front">~</td>
                <td id="stats-components-back">~</td>
                <td id="stats-components-total">~</td>
              </tr>
              <tr>
                <td>Groups</td>
                <td id="stats-groups-front">~</td>
                <td id="stats-groups-back">~</td>
                <td id="stats-groups-total">~</td>
              </tr>
              <tr>
                <td>SMD pads</td>
                <td id="stats-smd-pads-front">~</td>
                <td id="stats-smd-pads-back">~</td>
                <td id="stats-smd-pads-total">~</td>
              </tr>
              <tr>
                <td>TH pads</td>
                <td colspan=3 id="stats-th-pads">~</td>
              </tr>
            </tbody>
          </table>
          <table class="stats">
            <col width="40%"/><col />
            <tbody id="checkbox-stats">
              <tr>
                <td colspan=2 style="border-top: 0">Checkboxes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="iobtn"></button>
        <div class="menu-content">
          <div class="menu-label menu-label-top">
            <div style="margin-left: 5px;">Save board image</div>
            <div class="flexbox">
              <input id="render-save-width" class="menu-textbox" type="text" value="1000" placeholder="Width"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
              <span>X</span>
              <input id="render-save-height" class="menu-textbox" type="text" value="1000" placeholder="Height"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
            </div>
            <label>
              <input id="render-save-transparent" type="checkbox">
              Transparent background
            </label>
            <div class="flexbox">
              <button class="savebtn" onclick="saveImage('F')">Front</button>
              <button class="savebtn" onclick="saveImage('B')">Back</button>
            </div>
          </div>
          <div class="menu-label">
            <span style="margin-left: 5px;">Config and checkbox state</span>
            <div class="flexbox">
              <button class="savebtn" onclick="saveSettings()">Export</button>
              <button class="savebtn" onclick="loadSettings()">Import</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="fileinfodiv" style="overflow: auto;">
      <table class="fileinfo">
        <tbody>
          <tr>
            <td id="title" class="title" style="width: 70%">
              Title
            </td>
            <td id="revision" class="title" style="width: 30%">
              Revision
            </td>
          </tr>
          <tr>
            <td id="company">
              Company
            </td>
            <td id="filedate">
              Date
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div id="bot" class="split" style="height: calc(100% - 80px)">
    <div id="bomdiv" class="split split-horizontal">
      <div style="width: 100%">
        <input id="reflookup" class="textbox searchbox reflookup hideonprint" type="text" placeholder="Ref lookup"
               oninput="updateRefLookup(this.value)">
        <input id="filter" class="textbox searchbox filter hideonprint" type="text" placeholder="Filter"
               oninput="updateFilter(this.value)">
        <div class="button-container hideonprint" style="float: left; margin: 0;">
          <button id="copy" title="Copy bom table to clipboard"
               onclick="copyToClipboard()"></button>
        </div>
      </div>
      <div id="dbg"></div>
      <table class="bom">
        <thead id="bomhead">
        </thead>
        <tbody id="bombody">
        </tbody>
      </table>
    </div>
    <div id="canvasdiv" class="split split-horizontal">
      <div id="frontcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="F_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="F_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="F_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="F_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
      <div id="backcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="B_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="B_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="B_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="B_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
</body>

</html>
